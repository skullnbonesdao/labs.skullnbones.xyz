import{a as ue,d as nt,g as Ml,o as Pl,c as Ye,r as rt,e as Ec,u as Ll,f as Cl,h as Ol,n as xo,w as Xr,s as ri,i as ni,t as ii,j as Ut,k as rr,l as jr,m as jn,p as nr,q as Ze,v as Bi,x as Zn,y as ir,z as sr,A as $n,B as Nl,F as ka,C as Ul,D as Ac,E as zl,T as Wl,G as Rs,H as Kl,I as on}from"./index.ca3a514a.js";import{c as cr,g as Ic,a as xc}from"./_commonjsHelpers.2cf1d77b.js";var Ki={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,p,y){this.fn=u,this.context=p,this.once=y||!1}function s(u,p,y,v,R){if(typeof y!="function")throw new TypeError("The listener must be a function");var E=new i(y,v||u,R),T=t?t+p:p;return u._events[T]?u._events[T].fn?u._events[T]=[u._events[T],E]:u._events[T].push(E):(u._events[T]=E,u._eventsCount++),u}function o(u,p){--u._eventsCount===0?u._events=new n:delete u._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],y,v;if(this._eventsCount===0)return p;for(v in y=this._events)e.call(y,v)&&p.push(t?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(y)):p},a.prototype.listeners=function(p){var y=t?t+p:p,v=this._events[y];if(!v)return[];if(v.fn)return[v.fn];for(var R=0,E=v.length,T=new Array(E);R<E;R++)T[R]=v[R].fn;return T},a.prototype.listenerCount=function(p){var y=t?t+p:p,v=this._events[y];return v?v.fn?1:v.length:0},a.prototype.emit=function(p,y,v,R,E,T){var B=t?t+p:p;if(!this._events[B])return!1;var x=this._events[B],P=arguments.length,N,L;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),P){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,y),!0;case 3:return x.fn.call(x.context,y,v),!0;case 4:return x.fn.call(x.context,y,v,R),!0;case 5:return x.fn.call(x.context,y,v,R,E),!0;case 6:return x.fn.call(x.context,y,v,R,E,T),!0}for(L=1,N=new Array(P-1);L<P;L++)N[L-1]=arguments[L];x.fn.apply(x.context,N)}else{var U=x.length,z;for(L=0;L<U;L++)switch(x[L].once&&this.removeListener(p,x[L].fn,void 0,!0),P){case 1:x[L].fn.call(x[L].context);break;case 2:x[L].fn.call(x[L].context,y);break;case 3:x[L].fn.call(x[L].context,y,v);break;case 4:x[L].fn.call(x[L].context,y,v,R);break;default:if(!N)for(z=1,N=new Array(P-1);z<P;z++)N[z-1]=arguments[z];x[L].fn.apply(x[L].context,N)}}return!0},a.prototype.on=function(p,y,v){return s(this,p,y,v,!1)},a.prototype.once=function(p,y,v){return s(this,p,y,v,!0)},a.prototype.removeListener=function(p,y,v,R){var E=t?t+p:p;if(!this._events[E])return this;if(!y)return o(this,E),this;var T=this._events[E];if(T.fn)T.fn===y&&(!R||T.once)&&(!v||T.context===v)&&o(this,E);else{for(var B=0,x=[],P=T.length;B<P;B++)(T[B].fn!==y||R&&!T[B].once||v&&T[B].context!==v)&&x.push(T[B]);x.length?this._events[E]=x.length===1?x[0]:x:o(this,E)}return this},a.prototype.removeAllListeners=function(p){var y;return p?(y=t?t+p:p,this._events[y]&&o(this,y)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(Ki);var Dl=Ki.exports;class Nt extends Error{constructor(e,t){super(e),this.error=t}}class Jn extends Nt{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Xm extends Nt{constructor(){super(...arguments),this.name="WalletLoadError"}}class wi extends Nt{constructor(){super(...arguments),this.name="WalletConfigError"}}class Qs extends Nt{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Bc extends Nt{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Fl extends Nt{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class bi extends Nt{constructor(){super(...arguments),this.name="WalletAccountError"}}class eo extends Nt{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class mr extends Nt{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Gr extends Nt{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Cr extends Nt{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class to extends Nt{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var tt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(tt||(tt={}));class Rc extends Dl{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const i=this.publicKey;if(!i)throw new mr;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function Qm(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const s of e)s()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function ew(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function _a(r){return"version"in r}class $l extends Rc{async sendTransaction(e,t,n={}){let i=!0;try{if(_a(e)){if(!this.supportedTransactionVersions)throw new Gr("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Gr(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,n)}catch(s){throw s instanceof Cr?(i=!1,s):new Gr(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(s){throw s instanceof Cr?(i=!1,s):new Gr(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(_a(n)){if(!this.supportedTransactionVersions)throw new Cr("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Cr(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class ql extends $l{}function Ri(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function Hl(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Bo(r,...e){if(!Hl(r))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function Vl(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ri(r.outputLen),Ri(r.blockLen)}function kn(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Tc(r,e){Bo(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Ts=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jl=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4));function Mc(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}const Ms=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),hr=(r,e)=>r<<32-e|r>>>e,Gl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Gl)throw new Error("Non little-endian hardware is not supported");function Pc(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Di(r){if(typeof r=="string"&&(r=Pc(r)),!Mc(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Lc(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];if(!Mc(i))throw new Error("Uint8Array expected");e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class Ro{clone(){return this._cloneInto()}}function To(r){const e=n=>r().update(Di(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Cc(r=32){if(Ts&&typeof Ts.getRandomValues=="function")return Ts.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Yl(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),u=n?4:0,p=n?0:4;r.setUint32(e+u,o,n),r.setUint32(e+p,a,n)}class Oc extends Ro{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ms(this.buffer)}update(e){kn(this);const{view:t,buffer:n,blockLen:i}=this;e=Di(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=Ms(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){kn(this),Tc(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let v=o;v<i;v++)t[v]=0;Yl(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Ms(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,y=this.get();if(p>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<p;v++)a.setUint32(4*v,y[v],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}}const fi=BigInt(2**32-1),ro=BigInt(32);function Nc(r,e=!1){return e?{h:Number(r&fi),l:Number(r>>ro&fi)}:{h:Number(r>>ro&fi)|0,l:Number(r&fi)|0}}function Uc(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=Nc(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const Zl=(r,e)=>BigInt(r>>>0)<<ro|BigInt(e>>>0),Jl=(r,e,t)=>r>>>t,Xl=(r,e,t)=>r<<32-t|e>>>t,Ql=(r,e,t)=>r>>>t|e<<32-t,ef=(r,e,t)=>r<<32-t|e>>>t,tf=(r,e,t)=>r<<64-t|e>>>t-32,rf=(r,e,t)=>r>>>t-32|e<<64-t,nf=(r,e)=>e,sf=(r,e)=>r,zc=(r,e,t)=>r<<t|e>>>32-t,Wc=(r,e,t)=>e<<t|r>>>32-t,Kc=(r,e,t)=>e<<t-32|r>>>64-t,Dc=(r,e,t)=>r<<t-32|e>>>64-t;function of(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const af=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),cf=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,uf=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),lf=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,ff=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),hf=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,df={fromBig:Nc,split:Uc,toBig:Zl,shrSH:Jl,shrSL:Xl,rotrSH:Ql,rotrSL:ef,rotrBH:tf,rotrBL:rf,rotr32H:nf,rotr32L:sf,rotlSH:zc,rotlSL:Wc,rotlBH:Kc,rotlBL:Dc,add:of,add3L:af,add3H:cf,add4L:uf,add4H:lf,add5H:hf,add5L:ff};var we=df;const[pf,gf]=(()=>we.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),Tr=new Uint32Array(80),Mr=new Uint32Array(80);class yf extends Oc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:p,El:y,Fh:v,Fl:R,Gh:E,Gl:T,Hh:B,Hl:x}=this;return[e,t,n,i,s,o,a,u,p,y,v,R,E,T,B,x]}set(e,t,n,i,s,o,a,u,p,y,v,R,E,T,B,x){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=p|0,this.El=y|0,this.Fh=v|0,this.Fl=R|0,this.Gh=E|0,this.Gl=T|0,this.Hh=B|0,this.Hl=x|0}process(e,t){for(let L=0;L<16;L++,t+=4)Tr[L]=e.getUint32(t),Mr[L]=e.getUint32(t+=4);for(let L=16;L<80;L++){const U=Tr[L-15]|0,z=Mr[L-15]|0,C=we.rotrSH(U,z,1)^we.rotrSH(U,z,8)^we.shrSH(U,z,7),D=we.rotrSL(U,z,1)^we.rotrSL(U,z,8)^we.shrSL(U,z,7),K=Tr[L-2]|0,V=Mr[L-2]|0,ee=we.rotrSH(K,V,19)^we.rotrBH(K,V,61)^we.shrSH(K,V,6),Q=we.rotrSL(K,V,19)^we.rotrBL(K,V,61)^we.shrSL(K,V,6),he=we.add4L(D,Q,Mr[L-7],Mr[L-16]),M=we.add4H(he,C,ee,Tr[L-7],Tr[L-16]);Tr[L]=M|0,Mr[L]=he|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:p,Dl:y,Eh:v,El:R,Fh:E,Fl:T,Gh:B,Gl:x,Hh:P,Hl:N}=this;for(let L=0;L<80;L++){const U=we.rotrSH(v,R,14)^we.rotrSH(v,R,18)^we.rotrBH(v,R,41),z=we.rotrSL(v,R,14)^we.rotrSL(v,R,18)^we.rotrBL(v,R,41),C=v&E^~v&B,D=R&T^~R&x,K=we.add5L(N,z,D,gf[L],Mr[L]),V=we.add5H(K,P,U,C,pf[L],Tr[L]),ee=K|0,Q=we.rotrSH(n,i,28)^we.rotrBH(n,i,34)^we.rotrBH(n,i,39),he=we.rotrSL(n,i,28)^we.rotrBL(n,i,34)^we.rotrBL(n,i,39),M=n&s^n&a^s&a,c=i&o^i&u^o&u;P=B|0,N=x|0,B=E|0,x=T|0,E=v|0,T=R|0,{h:v,l:R}=we.add(p|0,y|0,V|0,ee|0),p=a|0,y=u|0,a=s|0,u=o|0,s=n|0,o=i|0;const d=we.add3L(ee,he,c);n=we.add3H(d,V,Q,M),i=d|0}({h:n,l:i}=we.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=we.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=we.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:p,l:y}=we.add(this.Dh|0,this.Dl|0,p|0,y|0),{h:v,l:R}=we.add(this.Eh|0,this.El|0,v|0,R|0),{h:E,l:T}=we.add(this.Fh|0,this.Fl|0,E|0,T|0),{h:B,l:x}=we.add(this.Gh|0,this.Gl|0,B|0,x|0),{h:P,l:N}=we.add(this.Hh|0,this.Hl|0,P|0,N|0),this.set(n,i,s,o,a,u,p,y,v,R,E,T,B,x,P,N)}roundClean(){Tr.fill(0),Mr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Fc=To(()=>new yf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $c=BigInt(0),Fi=BigInt(1),mf=BigInt(2);function wr(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}const wf=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Qr(r){if(!wr(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=wf[r[t]];return e}function qc(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function Mo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const _r={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ea(r){if(r>=_r._0&&r<=_r._9)return r-_r._0;if(r>=_r._A&&r<=_r._F)return r-(_r._A-10);if(r>=_r._a&&r<=_r._f)return r-(_r._a-10)}function _n(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=Ea(r.charCodeAt(s)),a=Ea(r.charCodeAt(s+1));if(o===void 0||a===void 0){const u=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function Jr(r){return Mo(Qr(r))}function bn(r){if(!wr(r))throw new Error("Uint8Array expected");return Mo(Qr(Uint8Array.from(r).reverse()))}function En(r,e){return _n(r.toString(16).padStart(e*2,"0"))}function Xn(r,e){return En(r,e).reverse()}function bf(r){return _n(qc(r))}function kt(r,e,t){let n;if(typeof e=="string")try{n=_n(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(wr(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function en(...r){let e=0;for(let i=0;i<r.length;i++){const s=r[i];if(!wr(s))throw new Error("Uint8Array expected");e+=s.length}let t=new Uint8Array(e),n=0;for(let i=0;i<r.length;i++){const s=r[i];t.set(s,n),n+=s.length}return t}function vf(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Sf(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function kf(r){let e;for(e=0;r>$c;r>>=Fi,e+=1);return e}function _f(r,e){return r>>BigInt(e)&Fi}const Ef=(r,e,t)=>r|(t?Fi:$c)<<BigInt(e),Po=r=>(mf<<BigInt(r-1))-Fi,Ps=r=>new Uint8Array(r),Aa=r=>Uint8Array.from(r);function Hc(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=Ps(r),i=Ps(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...v)=>t(i,n,...v),u=(v=Ps())=>{i=a(Aa([0]),v),n=a(),v.length!==0&&(i=a(Aa([1]),v),n=a())},p=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const R=[];for(;v<e;){n=a();const E=n.slice();R.push(E),v+=n.length}return en(...R)};return(v,R)=>{o(),u(v);let E;for(;!(E=R(p()));)u();return o(),E}}const Af={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||wr(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Mn(r,e,t={}){const n=(i,s,o)=>{const a=Af[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=r[i];if(!(o&&u===void 0)&&!a(u,r))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}var If=Object.freeze(Object.defineProperty({__proto__:null,isBytes:wr,bytesToHex:Qr,numberToHexUnpadded:qc,hexToNumber:Mo,hexToBytes:_n,bytesToNumberBE:Jr,bytesToNumberLE:bn,numberToBytesBE:En,numberToBytesLE:Xn,numberToVarBytesBE:bf,ensureBytes:kt,concatBytes:en,equalBytes:vf,utf8ToBytes:Sf,bitLen:kf,bitGet:_f,bitSet:Ef,bitMask:Po,createHmacDrbg:Hc,validateObject:Mn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const At=BigInt(0),Xe=BigInt(1),$r=BigInt(2),xf=BigInt(3),no=BigInt(4),Ia=BigInt(5),xa=BigInt(8);BigInt(9);BigInt(16);function Ge(r,e){const t=r%e;return t>=At?t:e+t}function Bf(r,e,t){if(t<=At||e<At)throw new Error("Expected power/modulo > 0");if(t===Xe)return At;let n=Xe;for(;e>At;)e&Xe&&(n=n*r%t),r=r*r%t,e>>=Xe;return n}function Qe(r,e,t){let n=r;for(;e-- >At;)n*=n,n%=t;return n}function io(r,e){if(r===At||e<=At)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Ge(r,e),n=e,i=At,s=Xe;for(;t!==At;){const a=n/t,u=n%t,p=i-s*a;n=t,t=u,i=s,s=p}if(n!==Xe)throw new Error("invert: does not exist");return Ge(i,e)}function Rf(r){const e=(r-Xe)/$r;let t,n,i;for(t=r-Xe,n=0;t%$r===At;t/=$r,n++);for(i=$r;i<r&&Bf(i,e,r)!==r-Xe;i++);if(n===1){const o=(r+Xe)/no;return function(u,p){const y=u.pow(p,o);if(!u.eql(u.sqr(y),p))throw new Error("Cannot find square root");return y}}const s=(t+Xe)/$r;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let p=n,y=a.pow(a.mul(a.ONE,i),t),v=a.pow(u,s),R=a.pow(u,t);for(;!a.eql(R,a.ONE);){if(a.eql(R,a.ZERO))return a.ZERO;let E=1;for(let B=a.sqr(R);E<p&&!a.eql(B,a.ONE);E++)B=a.sqr(B);const T=a.pow(y,Xe<<BigInt(p-E-1));y=a.sqr(T),v=a.mul(v,T),R=a.mul(R,y),p=E}return v}}function Tf(r){if(r%no===xf){const e=(r+Xe)/no;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%xa===Ia){const e=(r-Ia)/xa;return function(n,i){const s=n.mul(i,$r),o=n.pow(s,e),a=n.mul(i,o),u=n.mul(n.mul(a,$r),o),p=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(p),i))throw new Error("Cannot find square root");return p}}return Rf(r)}const Mf=(r,e)=>(Ge(r,e)&Xe)===Xe,Pf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Lf(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Pf.reduce((n,i)=>(n[i]="function",n),e);return Mn(r,t)}function Cf(r,e,t){if(t<At)throw new Error("Expected power > 0");if(t===At)return r.ONE;if(t===Xe)return e;let n=r.ONE,i=e;for(;t>At;)t&Xe&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Xe;return n}function Of(r,e){const t=new Array(e.length),n=e.reduce((s,o,a)=>r.is0(o)?s:(t[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,a)=>r.is0(o)?s:(t[a]=r.mul(s,t[a]),r.mul(s,o)),i),t}function Vc(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function jc(r,e,t=!1,n={}){if(r<=At)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=Vc(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Tf(r),a=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:Po(i),ZERO:At,ONE:Xe,create:u=>Ge(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return At<=u&&u<r},is0:u=>u===At,isOdd:u=>(u&Xe)===Xe,neg:u=>Ge(-u,r),eql:(u,p)=>u===p,sqr:u=>Ge(u*u,r),add:(u,p)=>Ge(u+p,r),sub:(u,p)=>Ge(u-p,r),mul:(u,p)=>Ge(u*p,r),pow:(u,p)=>Cf(a,u,p),div:(u,p)=>Ge(u*io(p,r),r),sqrN:u=>u*u,addN:(u,p)=>u+p,subN:(u,p)=>u-p,mulN:(u,p)=>u*p,inv:u=>io(u,r),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>Of(a,u),cmov:(u,p,y)=>y?p:u,toBytes:u=>t?Xn(u,s):En(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return t?bn(u):Jr(u)}});return Object.freeze(a)}function Nf(r,e){if(!r.isOdd)throw new Error("Field doesn't have isOdd");const t=r.sqrt(e);return r.isOdd(t)?r.neg(t):t}function Gc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Yc(r){const e=Gc(r);return e+Math.ceil(e/2)}function Uf(r,e,t=!1){const n=r.length,i=Gc(e),s=Yc(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=t?Jr(r):bn(r),a=Ge(o,e-Xe)+Xe;return t?Xn(a,i):En(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zf=BigInt(0),Ls=BigInt(1);function Zc(r,e){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=r.ZERO,a=i;for(;s>zf;)s&Ls&&(o=o.add(a)),a=a.double(),s>>=Ls;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=n(s),u=[];let p=i,y=p;for(let v=0;v<o;v++){y=p,u.push(y);for(let R=1;R<a;R++)y=y.add(p),u.push(y);p=y.double()}return u},wNAF(i,s,o){const{windows:a,windowSize:u}=n(i);let p=r.ZERO,y=r.BASE;const v=BigInt(2**i-1),R=2**i,E=BigInt(i);for(let T=0;T<a;T++){const B=T*u;let x=Number(o&v);o>>=E,x>u&&(x-=R,o+=Ls);const P=B,N=B+Math.abs(x)-1,L=T%2!==0,U=x<0;x===0?y=y.add(t(L,s[P])):p=p.add(t(U,s[N]))}return{p,f:y}},wNAFCached(i,s,o,a){const u=i._WINDOW_SIZE||1;let p=s.get(i);return p||(p=this.precomputeWindow(i,u),u!==1&&s.set(i,a(p))),this.wNAF(u,p,o)}}}function Lo(r){return Lf(r.Fp),Mn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vc(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const er=BigInt(0),$t=BigInt(1),hi=BigInt(2),Wf=BigInt(8),Kf={zip215:!0};function Df(r){const e=Lo(r);return Mn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Co(r){const e=Df(r),{Fp:t,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=e,p=hi<<BigInt(a*8)-$t,y=t.create,v=e.uvRatio||((k,b)=>{try{return{isValid:!0,value:t.sqrt(k*t.inv(b))}}catch{return{isValid:!1,value:er}}}),R=e.adjustScalarBytes||(k=>k),E=e.domain||((k,b,_)=>{if(b.length||_)throw new Error("Contexts/pre-hash are not supported");return k}),T=k=>typeof k=="bigint"&&er<k,B=(k,b)=>T(k)&&T(b)&&k<b,x=k=>k===er||B(k,p);function P(k,b){if(B(k,b))return k;throw new Error(`Expected valid scalar < ${b}, got ${typeof k} ${k}`)}function N(k){return k===er?k:P(k,n)}const L=new Map;function U(k){if(!(k instanceof z))throw new Error("ExtendedPoint expected")}class z{constructor(b,_,g,l){if(this.ex=b,this.ey=_,this.ez=g,this.et=l,!x(b))throw new Error("x required");if(!x(_))throw new Error("y required");if(!x(g))throw new Error("z required");if(!x(l))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof z)throw new Error("extended point not allowed");const{x:_,y:g}=b||{};if(!x(_)||!x(g))throw new Error("invalid affine point");return new z(_,g,$t,y(_*g))}static normalizeZ(b){const _=t.invertBatch(b.map(g=>g.ez));return b.map((g,l)=>g.toAffine(_[l])).map(z.fromAffine)}_setWindowSize(b){this._WINDOW_SIZE=b,L.delete(this)}assertValidity(){const{a:b,d:_}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:g,ey:l,ez:S,et:H}=this,j=y(g*g),Y=y(l*l),ne=y(S*S),oe=y(ne*ne),ce=y(j*b),Re=y(ne*y(ce+Y)),me=y(oe+y(_*y(j*Y)));if(Re!==me)throw new Error("bad point: equation left != right (1)");const Se=y(g*l),Te=y(S*H);if(Se!==Te)throw new Error("bad point: equation left != right (2)")}equals(b){U(b);const{ex:_,ey:g,ez:l}=this,{ex:S,ey:H,ez:j}=b,Y=y(_*j),ne=y(S*l),oe=y(g*j),ce=y(H*l);return Y===ne&&oe===ce}is0(){return this.equals(z.ZERO)}negate(){return new z(y(-this.ex),this.ey,this.ez,y(-this.et))}double(){const{a:b}=e,{ex:_,ey:g,ez:l}=this,S=y(_*_),H=y(g*g),j=y(hi*y(l*l)),Y=y(b*S),ne=_+g,oe=y(y(ne*ne)-S-H),ce=Y+H,Re=ce-j,me=Y-H,Se=y(oe*Re),Te=y(ce*me),ke=y(oe*me),Me=y(Re*ce);return new z(Se,Te,Me,ke)}add(b){U(b);const{a:_,d:g}=e,{ex:l,ey:S,ez:H,et:j}=this,{ex:Y,ey:ne,ez:oe,et:ce}=b;if(_===BigInt(-1)){const Mt=y((S-l)*(ne+Y)),Ue=y((S+l)*(ne-Y)),We=y(Ue-Mt);if(We===er)return this.double();const Wt=y(H*hi*ce),Fe=y(j*hi*oe),w=Fe+Wt,f=Ue+Mt,h=Fe-Wt,I=y(w*We),O=y(f*h),W=y(w*h),q=y(We*f);return new z(I,O,q,W)}const Re=y(l*Y),me=y(S*ne),Se=y(j*g*ce),Te=y(H*oe),ke=y((l+S)*(Y+ne)-Re-me),Me=Te-Se,fr=Te+Se,Oe=y(me-_*Re),Ve=y(ke*Me),fn=y(fr*Oe),De=y(ke*Oe),Ne=y(Me*fr);return new z(Ve,fn,Ne,De)}subtract(b){return this.add(b.negate())}wNAF(b){return K.wNAFCached(this,L,b,z.normalizeZ)}multiply(b){const{p:_,f:g}=this.wNAF(P(b,n));return z.normalizeZ([_,g])[0]}multiplyUnsafe(b){let _=N(b);return _===er?D:this.equals(D)||_===$t?this:this.equals(C)?this.wNAF(_).p:K.unsafeLadder(this,_)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return K.unsafeLadder(this,n).is0()}toAffine(b){const{ex:_,ey:g,ez:l}=this,S=this.is0();b==null&&(b=S?Wf:t.inv(l));const H=y(_*b),j=y(g*b),Y=y(l*b);if(S)return{x:er,y:$t};if(Y!==$t)throw new Error("invZ was invalid");return{x:H,y:j}}clearCofactor(){const{h:b}=e;return b===$t?this:this.multiplyUnsafe(b)}static fromHex(b,_=!1){const{d:g,a:l}=e,S=t.BYTES;b=kt("pointHex",b,S);const H=b.slice(),j=b[S-1];H[S-1]=j&-129;const Y=bn(H);Y===er||(_?P(Y,p):P(Y,t.ORDER));const ne=y(Y*Y),oe=y(ne-$t),ce=y(g*ne-l);let{isValid:Re,value:me}=v(oe,ce);if(!Re)throw new Error("Point.fromHex: invalid y coordinate");const Se=(me&$t)===$t,Te=(j&128)!==0;if(!_&&me===er&&Te)throw new Error("Point.fromHex: x=0 and x_0=1");return Te!==Se&&(me=y(-me)),z.fromAffine({x:me,y:Y})}static fromPrivateKey(b){return Q(b).point}toRawBytes(){const{x:b,y:_}=this.toAffine(),g=Xn(_,t.BYTES);return g[g.length-1]|=b&$t?128:0,g}toHex(){return Qr(this.toRawBytes())}}z.BASE=new z(e.Gx,e.Gy,$t,y(e.Gx*e.Gy)),z.ZERO=new z(er,$t,$t,er);const{BASE:C,ZERO:D}=z,K=Zc(z,a*8);function V(k){return Ge(k,n)}function ee(k){return V(bn(k))}function Q(k){const b=a;k=kt("private key",k,b);const _=kt("hashed private key",s(k),2*b),g=R(_.slice(0,b)),l=_.slice(b,2*b),S=ee(g),H=C.multiply(S),j=H.toRawBytes();return{head:g,prefix:l,scalar:S,point:H,pointBytes:j}}function he(k){return Q(k).pointBytes}function M(k=new Uint8Array,...b){const _=en(...b);return ee(s(E(_,kt("context",k),!!i)))}function c(k,b,_={}){k=kt("message",k),i&&(k=i(k));const{prefix:g,scalar:l,pointBytes:S}=Q(b),H=M(_.context,g,k),j=C.multiply(H).toRawBytes(),Y=M(_.context,j,S,k),ne=V(H+Y*l);N(ne);const oe=en(j,Xn(ne,t.BYTES));return kt("result",oe,a*2)}const d=Kf;function m(k,b,_,g=d){const{context:l,zip215:S}=g,H=t.BYTES;k=kt("signature",k,2*H),b=kt("message",b),i&&(b=i(b));const j=bn(k.slice(H,2*H));let Y,ne,oe;try{Y=z.fromHex(_,S),ne=z.fromHex(k.slice(0,H),S),oe=C.multiplyUnsafe(j)}catch{return!1}if(!S&&Y.isSmallOrder())return!1;const ce=M(l,ne.toRawBytes(),Y.toRawBytes(),b);return ne.add(Y.multiplyUnsafe(ce)).subtract(oe).clearCofactor().equals(z.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:he,sign:c,verify:m,ExtendedPoint:z,utils:{getExtendedPublicKey:Q,randomPrivateKey:()=>o(t.BYTES),precompute(k=8,b=z.BASE){return b._setWindowSize(k),b.multiply(BigInt(3)),b}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ba=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ff=BigInt(1),so=BigInt(2),$f=BigInt(5),Ra=BigInt(10),qf=BigInt(20),Hf=BigInt(40),Ta=BigInt(80);function Vf(r){const e=Oo,n=r*r%e*r%e,i=Qe(n,so,e)*n%e,s=Qe(i,Ff,e)*r%e,o=Qe(s,$f,e)*s%e,a=Qe(o,Ra,e)*o%e,u=Qe(a,qf,e)*a%e,p=Qe(u,Hf,e)*u%e,y=Qe(p,Ta,e)*p%e,v=Qe(y,Ta,e)*p%e,R=Qe(v,Ra,e)*o%e;return{pow_p_5_8:Qe(R,so,e)*r%e,b2:n}}function jf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Gf(r,e){const t=Oo,n=Ge(e*e*e,t),i=Ge(n*n*e,t),s=Vf(r*i).pow_p_5_8;let o=Ge(r*n*s,t);const a=Ge(e*o*o,t),u=o,p=Ge(o*Ba,t),y=a===r,v=a===Ge(-r,t),R=a===Ge(-r*Ba,t);return y&&(o=u),(v||R)&&(o=p),Mf(o,t)&&(o=Ge(-o,t)),{isValid:y||v,value:o}}const Rr=jc(Oo,void 0,!0),No={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Rr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Fc,randomBytes:Cc,adjustScalarBytes:jf,uvRatio:Gf},Pn=Co(No);function Jc(r,e,t){if(e.length>255)throw new Error("Context is too big");return Lc(Pc("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,r)}({...No});({...No});const Yf=(Rr.ORDER+BigInt(3))/BigInt(8);Rr.pow(so,Yf);Rr.sqrt(Rr.neg(Rr.ONE));(Rr.ORDER-BigInt(5))/BigInt(8);BigInt(486662);Nf(Rr,Rr.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Uo={exports:{}};(function(r){(function(e,t){function n(M,c){if(!M)throw new Error(c||"Assertion failed")}function i(M,c){M.super_=c;var d=function(){};d.prototype=c.prototype,M.prototype=new d,M.prototype.constructor=M}function s(M,c,d){if(s.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(M||0,c||10,d||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,d){return c.cmp(d)>0?c:d},s.min=function(c,d){return c.cmp(d)<0?c:d},s.prototype._init=function(c,d,m){if(typeof c=="number")return this._initNumber(c,d,m);if(typeof c=="object")return this._initArray(c,d,m);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var A=0;c[0]==="-"&&(A++,this.negative=1),A<c.length&&(d===16?this._parseHex(c,A,m):(this._parseBase(c,d,A),m==="le"&&this._initArray(this.toArray(),d,m)))},s.prototype._initNumber=function(c,d,m){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},s.prototype._initArray=function(c,d,m){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var k,b,_=0;if(m==="be")for(A=c.length-1,k=0;A>=0;A-=3)b=c[A]|c[A-1]<<8|c[A-2]<<16,this.words[k]|=b<<_&67108863,this.words[k+1]=b>>>26-_&67108863,_+=24,_>=26&&(_-=26,k++);else if(m==="le")for(A=0,k=0;A<c.length;A+=3)b=c[A]|c[A+1]<<8|c[A+2]<<16,this.words[k]|=b<<_&67108863,this.words[k+1]=b>>>26-_&67108863,_+=24,_>=26&&(_-=26,k++);return this._strip()};function a(M,c){var d=M.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+M)}function u(M,c,d){var m=a(M,d);return d-1>=c&&(m|=a(M,d-1)<<4),m}s.prototype._parseHex=function(c,d,m){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var k=0,b=0,_;if(m==="be")for(A=c.length-1;A>=d;A-=2)_=u(c,d,A)<<k,this.words[b]|=_&67108863,k>=18?(k-=18,b+=1,this.words[b]|=_>>>26):k+=8;else{var g=c.length-d;for(A=g%2===0?d+1:d;A<c.length;A+=2)_=u(c,d,A)<<k,this.words[b]|=_&67108863,k>=18?(k-=18,b+=1,this.words[b]|=_>>>26):k+=8}this._strip()};function p(M,c,d,m){for(var A=0,k=0,b=Math.min(M.length,d),_=c;_<b;_++){var g=M.charCodeAt(_)-48;A*=m,g>=49?k=g-49+10:g>=17?k=g-17+10:k=g,n(g>=0&&k<m,"Invalid character"),A+=k}return A}s.prototype._parseBase=function(c,d,m){this.words=[0],this.length=1;for(var A=0,k=1;k<=67108863;k*=d)A++;A--,k=k/d|0;for(var b=c.length-m,_=b%A,g=Math.min(b,b-_)+m,l=0,S=m;S<g;S+=A)l=p(c,S,S+A,d),this.imuln(k),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(_!==0){var H=1;for(l=p(c,S,c.length,d),S=0;S<_;S++)H*=d;this.imuln(H),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function y(M,c){M.words=c.words,M.length=c.length,M.negative=c.negative,M.red=c.red}if(s.prototype._move=function(c){y(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{s.prototype.inspect=v}else s.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var R=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,d){c=c||10,d=d|0||1;var m;if(c===16||c==="hex"){m="";for(var A=0,k=0,b=0;b<this.length;b++){var _=this.words[b],g=((_<<A|k)&16777215).toString(16);k=_>>>24-A&16777215,A+=2,A>=26&&(A-=26,b--),k!==0||b!==this.length-1?m=R[6-g.length]+g+m:m=g+m}for(k!==0&&(m=k.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(c===(c|0)&&c>=2&&c<=36){var l=E[c],S=T[c];m="";var H=this.clone();for(H.negative=0;!H.isZero();){var j=H.modrn(S).toString(c);H=H.idivn(S),H.isZero()?m=j+m:m=R[l-j.length]+j+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),s.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var B=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};s.prototype.toArrayLike=function(c,d,m){this._strip();var A=this.byteLength(),k=m||Math.max(1,A);n(A<=k,"byte array longer than desired length"),n(k>0,"Requested array length <= 0");var b=B(c,k),_=d==="le"?"LE":"BE";return this["_toArrayLike"+_](b,A),b},s.prototype._toArrayLikeLE=function(c,d){for(var m=0,A=0,k=0,b=0;k<this.length;k++){var _=this.words[k]<<b|A;c[m++]=_&255,m<c.length&&(c[m++]=_>>8&255),m<c.length&&(c[m++]=_>>16&255),b===6?(m<c.length&&(c[m++]=_>>24&255),A=0,b=0):(A=_>>>24,b+=2)}if(m<c.length)for(c[m++]=A;m<c.length;)c[m++]=0},s.prototype._toArrayLikeBE=function(c,d){for(var m=c.length-1,A=0,k=0,b=0;k<this.length;k++){var _=this.words[k]<<b|A;c[m--]=_&255,m>=0&&(c[m--]=_>>8&255),m>=0&&(c[m--]=_>>16&255),b===6?(m>=0&&(c[m--]=_>>24&255),A=0,b=0):(A=_>>>24,b+=2)}if(m>=0)for(c[m--]=A;m>=0;)c[m--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var d=c,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},s.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,m=0;return(d&8191)===0&&(m+=13,d>>>=13),(d&127)===0&&(m+=7,d>>>=7),(d&15)===0&&(m+=4,d>>>=4),(d&3)===0&&(m+=2,d>>>=2),(d&1)===0&&m++,m},s.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function x(M){for(var c=new Array(M.bitLength()),d=0;d<c.length;d++){var m=d/26|0,A=d%26;c[d]=M.words[m]>>>A&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(c+=m,m!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&c.words[m];return this.length=d.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var d,m;this.length>c.length?(d=this,m=c):(d=c,m=this);for(var A=0;A<m.length;A++)this.words[A]=d.words[A]^m.words[A];if(this!==d)for(;A<d.length;A++)this.words[A]=d.words[A];return this.length=d.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,m=c%26;this._expand(d),m>0&&d--;for(var A=0;A<d;A++)this.words[A]=~this.words[A]&67108863;return m>0&&(this.words[A]=~this.words[A]&67108863>>26-m),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var m=c/26|0,A=c%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<A:this.words[m]=this.words[m]&~(1<<A),this._strip()},s.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var m,A;this.length>c.length?(m=this,A=c):(m=c,A=this);for(var k=0,b=0;b<A.length;b++)d=(m.words[b]|0)+(A.words[b]|0)+k,this.words[b]=d&67108863,k=d>>>26;for(;k!==0&&b<m.length;b++)d=(m.words[b]|0)+k,this.words[b]=d&67108863,k=d>>>26;if(this.length=m.length,k!==0)this.words[this.length]=k,this.length++;else if(m!==this)for(;b<m.length;b++)this.words[b]=m.words[b];return this},s.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var m=this.cmp(c);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,k;m>0?(A=this,k=c):(A=c,k=this);for(var b=0,_=0;_<k.length;_++)d=(A.words[_]|0)-(k.words[_]|0)+b,b=d>>26,this.words[_]=d&67108863;for(;b!==0&&_<A.length;_++)d=(A.words[_]|0)+b,b=d>>26,this.words[_]=d&67108863;if(b===0&&_<A.length&&A!==this)for(;_<A.length;_++)this.words[_]=A.words[_];return this.length=Math.max(this.length,_),A!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function P(M,c,d){d.negative=c.negative^M.negative;var m=M.length+c.length|0;d.length=m,m=m-1|0;var A=M.words[0]|0,k=c.words[0]|0,b=A*k,_=b&67108863,g=b/67108864|0;d.words[0]=_;for(var l=1;l<m;l++){for(var S=g>>>26,H=g&67108863,j=Math.min(l,c.length-1),Y=Math.max(0,l-M.length+1);Y<=j;Y++){var ne=l-Y|0;A=M.words[ne]|0,k=c.words[Y]|0,b=A*k+H,S+=b/67108864|0,H=b&67108863}d.words[l]=H|0,g=S|0}return g!==0?d.words[l]=g|0:d.length--,d._strip()}var N=function(c,d,m){var A=c.words,k=d.words,b=m.words,_=0,g,l,S,H=A[0]|0,j=H&8191,Y=H>>>13,ne=A[1]|0,oe=ne&8191,ce=ne>>>13,Re=A[2]|0,me=Re&8191,Se=Re>>>13,Te=A[3]|0,ke=Te&8191,Me=Te>>>13,fr=A[4]|0,Oe=fr&8191,Ve=fr>>>13,fn=A[5]|0,De=fn&8191,Ne=fn>>>13,Mt=A[6]|0,Ue=Mt&8191,We=Mt>>>13,Wt=A[7]|0,Fe=Wt&8191,w=Wt>>>13,f=A[8]|0,h=f&8191,I=f>>>13,O=A[9]|0,W=O&8191,q=O>>>13,ye=k[0]|0,ge=ye&8191,de=ye>>>13,$e=k[1]|0,fe=$e&8191,it=$e>>>13,pa=k[2]|0,st=pa&8191,ot=pa>>>13,ga=k[3]|0,at=ga&8191,ct=ga>>>13,ya=k[4]|0,ut=ya&8191,lt=ya>>>13,ma=k[5]|0,ft=ma&8191,ht=ma>>>13,wa=k[6]|0,dt=wa&8191,pt=wa>>>13,ba=k[7]|0,gt=ba&8191,yt=ba>>>13,va=k[8]|0,mt=va&8191,wt=va>>>13,Sa=k[9]|0,bt=Sa&8191,vt=Sa>>>13;m.negative=c.negative^d.negative,m.length=19,g=Math.imul(j,ge),l=Math.imul(j,de),l=l+Math.imul(Y,ge)|0,S=Math.imul(Y,de);var ls=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ls>>>26)|0,ls&=67108863,g=Math.imul(oe,ge),l=Math.imul(oe,de),l=l+Math.imul(ce,ge)|0,S=Math.imul(ce,de),g=g+Math.imul(j,fe)|0,l=l+Math.imul(j,it)|0,l=l+Math.imul(Y,fe)|0,S=S+Math.imul(Y,it)|0;var fs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(fs>>>26)|0,fs&=67108863,g=Math.imul(me,ge),l=Math.imul(me,de),l=l+Math.imul(Se,ge)|0,S=Math.imul(Se,de),g=g+Math.imul(oe,fe)|0,l=l+Math.imul(oe,it)|0,l=l+Math.imul(ce,fe)|0,S=S+Math.imul(ce,it)|0,g=g+Math.imul(j,st)|0,l=l+Math.imul(j,ot)|0,l=l+Math.imul(Y,st)|0,S=S+Math.imul(Y,ot)|0;var hs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(hs>>>26)|0,hs&=67108863,g=Math.imul(ke,ge),l=Math.imul(ke,de),l=l+Math.imul(Me,ge)|0,S=Math.imul(Me,de),g=g+Math.imul(me,fe)|0,l=l+Math.imul(me,it)|0,l=l+Math.imul(Se,fe)|0,S=S+Math.imul(Se,it)|0,g=g+Math.imul(oe,st)|0,l=l+Math.imul(oe,ot)|0,l=l+Math.imul(ce,st)|0,S=S+Math.imul(ce,ot)|0,g=g+Math.imul(j,at)|0,l=l+Math.imul(j,ct)|0,l=l+Math.imul(Y,at)|0,S=S+Math.imul(Y,ct)|0;var ds=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ds>>>26)|0,ds&=67108863,g=Math.imul(Oe,ge),l=Math.imul(Oe,de),l=l+Math.imul(Ve,ge)|0,S=Math.imul(Ve,de),g=g+Math.imul(ke,fe)|0,l=l+Math.imul(ke,it)|0,l=l+Math.imul(Me,fe)|0,S=S+Math.imul(Me,it)|0,g=g+Math.imul(me,st)|0,l=l+Math.imul(me,ot)|0,l=l+Math.imul(Se,st)|0,S=S+Math.imul(Se,ot)|0,g=g+Math.imul(oe,at)|0,l=l+Math.imul(oe,ct)|0,l=l+Math.imul(ce,at)|0,S=S+Math.imul(ce,ct)|0,g=g+Math.imul(j,ut)|0,l=l+Math.imul(j,lt)|0,l=l+Math.imul(Y,ut)|0,S=S+Math.imul(Y,lt)|0;var ps=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ps>>>26)|0,ps&=67108863,g=Math.imul(De,ge),l=Math.imul(De,de),l=l+Math.imul(Ne,ge)|0,S=Math.imul(Ne,de),g=g+Math.imul(Oe,fe)|0,l=l+Math.imul(Oe,it)|0,l=l+Math.imul(Ve,fe)|0,S=S+Math.imul(Ve,it)|0,g=g+Math.imul(ke,st)|0,l=l+Math.imul(ke,ot)|0,l=l+Math.imul(Me,st)|0,S=S+Math.imul(Me,ot)|0,g=g+Math.imul(me,at)|0,l=l+Math.imul(me,ct)|0,l=l+Math.imul(Se,at)|0,S=S+Math.imul(Se,ct)|0,g=g+Math.imul(oe,ut)|0,l=l+Math.imul(oe,lt)|0,l=l+Math.imul(ce,ut)|0,S=S+Math.imul(ce,lt)|0,g=g+Math.imul(j,ft)|0,l=l+Math.imul(j,ht)|0,l=l+Math.imul(Y,ft)|0,S=S+Math.imul(Y,ht)|0;var gs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(gs>>>26)|0,gs&=67108863,g=Math.imul(Ue,ge),l=Math.imul(Ue,de),l=l+Math.imul(We,ge)|0,S=Math.imul(We,de),g=g+Math.imul(De,fe)|0,l=l+Math.imul(De,it)|0,l=l+Math.imul(Ne,fe)|0,S=S+Math.imul(Ne,it)|0,g=g+Math.imul(Oe,st)|0,l=l+Math.imul(Oe,ot)|0,l=l+Math.imul(Ve,st)|0,S=S+Math.imul(Ve,ot)|0,g=g+Math.imul(ke,at)|0,l=l+Math.imul(ke,ct)|0,l=l+Math.imul(Me,at)|0,S=S+Math.imul(Me,ct)|0,g=g+Math.imul(me,ut)|0,l=l+Math.imul(me,lt)|0,l=l+Math.imul(Se,ut)|0,S=S+Math.imul(Se,lt)|0,g=g+Math.imul(oe,ft)|0,l=l+Math.imul(oe,ht)|0,l=l+Math.imul(ce,ft)|0,S=S+Math.imul(ce,ht)|0,g=g+Math.imul(j,dt)|0,l=l+Math.imul(j,pt)|0,l=l+Math.imul(Y,dt)|0,S=S+Math.imul(Y,pt)|0;var ys=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ys>>>26)|0,ys&=67108863,g=Math.imul(Fe,ge),l=Math.imul(Fe,de),l=l+Math.imul(w,ge)|0,S=Math.imul(w,de),g=g+Math.imul(Ue,fe)|0,l=l+Math.imul(Ue,it)|0,l=l+Math.imul(We,fe)|0,S=S+Math.imul(We,it)|0,g=g+Math.imul(De,st)|0,l=l+Math.imul(De,ot)|0,l=l+Math.imul(Ne,st)|0,S=S+Math.imul(Ne,ot)|0,g=g+Math.imul(Oe,at)|0,l=l+Math.imul(Oe,ct)|0,l=l+Math.imul(Ve,at)|0,S=S+Math.imul(Ve,ct)|0,g=g+Math.imul(ke,ut)|0,l=l+Math.imul(ke,lt)|0,l=l+Math.imul(Me,ut)|0,S=S+Math.imul(Me,lt)|0,g=g+Math.imul(me,ft)|0,l=l+Math.imul(me,ht)|0,l=l+Math.imul(Se,ft)|0,S=S+Math.imul(Se,ht)|0,g=g+Math.imul(oe,dt)|0,l=l+Math.imul(oe,pt)|0,l=l+Math.imul(ce,dt)|0,S=S+Math.imul(ce,pt)|0,g=g+Math.imul(j,gt)|0,l=l+Math.imul(j,yt)|0,l=l+Math.imul(Y,gt)|0,S=S+Math.imul(Y,yt)|0;var ms=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ms>>>26)|0,ms&=67108863,g=Math.imul(h,ge),l=Math.imul(h,de),l=l+Math.imul(I,ge)|0,S=Math.imul(I,de),g=g+Math.imul(Fe,fe)|0,l=l+Math.imul(Fe,it)|0,l=l+Math.imul(w,fe)|0,S=S+Math.imul(w,it)|0,g=g+Math.imul(Ue,st)|0,l=l+Math.imul(Ue,ot)|0,l=l+Math.imul(We,st)|0,S=S+Math.imul(We,ot)|0,g=g+Math.imul(De,at)|0,l=l+Math.imul(De,ct)|0,l=l+Math.imul(Ne,at)|0,S=S+Math.imul(Ne,ct)|0,g=g+Math.imul(Oe,ut)|0,l=l+Math.imul(Oe,lt)|0,l=l+Math.imul(Ve,ut)|0,S=S+Math.imul(Ve,lt)|0,g=g+Math.imul(ke,ft)|0,l=l+Math.imul(ke,ht)|0,l=l+Math.imul(Me,ft)|0,S=S+Math.imul(Me,ht)|0,g=g+Math.imul(me,dt)|0,l=l+Math.imul(me,pt)|0,l=l+Math.imul(Se,dt)|0,S=S+Math.imul(Se,pt)|0,g=g+Math.imul(oe,gt)|0,l=l+Math.imul(oe,yt)|0,l=l+Math.imul(ce,gt)|0,S=S+Math.imul(ce,yt)|0,g=g+Math.imul(j,mt)|0,l=l+Math.imul(j,wt)|0,l=l+Math.imul(Y,mt)|0,S=S+Math.imul(Y,wt)|0;var ws=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ws>>>26)|0,ws&=67108863,g=Math.imul(W,ge),l=Math.imul(W,de),l=l+Math.imul(q,ge)|0,S=Math.imul(q,de),g=g+Math.imul(h,fe)|0,l=l+Math.imul(h,it)|0,l=l+Math.imul(I,fe)|0,S=S+Math.imul(I,it)|0,g=g+Math.imul(Fe,st)|0,l=l+Math.imul(Fe,ot)|0,l=l+Math.imul(w,st)|0,S=S+Math.imul(w,ot)|0,g=g+Math.imul(Ue,at)|0,l=l+Math.imul(Ue,ct)|0,l=l+Math.imul(We,at)|0,S=S+Math.imul(We,ct)|0,g=g+Math.imul(De,ut)|0,l=l+Math.imul(De,lt)|0,l=l+Math.imul(Ne,ut)|0,S=S+Math.imul(Ne,lt)|0,g=g+Math.imul(Oe,ft)|0,l=l+Math.imul(Oe,ht)|0,l=l+Math.imul(Ve,ft)|0,S=S+Math.imul(Ve,ht)|0,g=g+Math.imul(ke,dt)|0,l=l+Math.imul(ke,pt)|0,l=l+Math.imul(Me,dt)|0,S=S+Math.imul(Me,pt)|0,g=g+Math.imul(me,gt)|0,l=l+Math.imul(me,yt)|0,l=l+Math.imul(Se,gt)|0,S=S+Math.imul(Se,yt)|0,g=g+Math.imul(oe,mt)|0,l=l+Math.imul(oe,wt)|0,l=l+Math.imul(ce,mt)|0,S=S+Math.imul(ce,wt)|0,g=g+Math.imul(j,bt)|0,l=l+Math.imul(j,vt)|0,l=l+Math.imul(Y,bt)|0,S=S+Math.imul(Y,vt)|0;var bs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(bs>>>26)|0,bs&=67108863,g=Math.imul(W,fe),l=Math.imul(W,it),l=l+Math.imul(q,fe)|0,S=Math.imul(q,it),g=g+Math.imul(h,st)|0,l=l+Math.imul(h,ot)|0,l=l+Math.imul(I,st)|0,S=S+Math.imul(I,ot)|0,g=g+Math.imul(Fe,at)|0,l=l+Math.imul(Fe,ct)|0,l=l+Math.imul(w,at)|0,S=S+Math.imul(w,ct)|0,g=g+Math.imul(Ue,ut)|0,l=l+Math.imul(Ue,lt)|0,l=l+Math.imul(We,ut)|0,S=S+Math.imul(We,lt)|0,g=g+Math.imul(De,ft)|0,l=l+Math.imul(De,ht)|0,l=l+Math.imul(Ne,ft)|0,S=S+Math.imul(Ne,ht)|0,g=g+Math.imul(Oe,dt)|0,l=l+Math.imul(Oe,pt)|0,l=l+Math.imul(Ve,dt)|0,S=S+Math.imul(Ve,pt)|0,g=g+Math.imul(ke,gt)|0,l=l+Math.imul(ke,yt)|0,l=l+Math.imul(Me,gt)|0,S=S+Math.imul(Me,yt)|0,g=g+Math.imul(me,mt)|0,l=l+Math.imul(me,wt)|0,l=l+Math.imul(Se,mt)|0,S=S+Math.imul(Se,wt)|0,g=g+Math.imul(oe,bt)|0,l=l+Math.imul(oe,vt)|0,l=l+Math.imul(ce,bt)|0,S=S+Math.imul(ce,vt)|0;var vs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(vs>>>26)|0,vs&=67108863,g=Math.imul(W,st),l=Math.imul(W,ot),l=l+Math.imul(q,st)|0,S=Math.imul(q,ot),g=g+Math.imul(h,at)|0,l=l+Math.imul(h,ct)|0,l=l+Math.imul(I,at)|0,S=S+Math.imul(I,ct)|0,g=g+Math.imul(Fe,ut)|0,l=l+Math.imul(Fe,lt)|0,l=l+Math.imul(w,ut)|0,S=S+Math.imul(w,lt)|0,g=g+Math.imul(Ue,ft)|0,l=l+Math.imul(Ue,ht)|0,l=l+Math.imul(We,ft)|0,S=S+Math.imul(We,ht)|0,g=g+Math.imul(De,dt)|0,l=l+Math.imul(De,pt)|0,l=l+Math.imul(Ne,dt)|0,S=S+Math.imul(Ne,pt)|0,g=g+Math.imul(Oe,gt)|0,l=l+Math.imul(Oe,yt)|0,l=l+Math.imul(Ve,gt)|0,S=S+Math.imul(Ve,yt)|0,g=g+Math.imul(ke,mt)|0,l=l+Math.imul(ke,wt)|0,l=l+Math.imul(Me,mt)|0,S=S+Math.imul(Me,wt)|0,g=g+Math.imul(me,bt)|0,l=l+Math.imul(me,vt)|0,l=l+Math.imul(Se,bt)|0,S=S+Math.imul(Se,vt)|0;var Ss=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,g=Math.imul(W,at),l=Math.imul(W,ct),l=l+Math.imul(q,at)|0,S=Math.imul(q,ct),g=g+Math.imul(h,ut)|0,l=l+Math.imul(h,lt)|0,l=l+Math.imul(I,ut)|0,S=S+Math.imul(I,lt)|0,g=g+Math.imul(Fe,ft)|0,l=l+Math.imul(Fe,ht)|0,l=l+Math.imul(w,ft)|0,S=S+Math.imul(w,ht)|0,g=g+Math.imul(Ue,dt)|0,l=l+Math.imul(Ue,pt)|0,l=l+Math.imul(We,dt)|0,S=S+Math.imul(We,pt)|0,g=g+Math.imul(De,gt)|0,l=l+Math.imul(De,yt)|0,l=l+Math.imul(Ne,gt)|0,S=S+Math.imul(Ne,yt)|0,g=g+Math.imul(Oe,mt)|0,l=l+Math.imul(Oe,wt)|0,l=l+Math.imul(Ve,mt)|0,S=S+Math.imul(Ve,wt)|0,g=g+Math.imul(ke,bt)|0,l=l+Math.imul(ke,vt)|0,l=l+Math.imul(Me,bt)|0,S=S+Math.imul(Me,vt)|0;var ks=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(ks>>>26)|0,ks&=67108863,g=Math.imul(W,ut),l=Math.imul(W,lt),l=l+Math.imul(q,ut)|0,S=Math.imul(q,lt),g=g+Math.imul(h,ft)|0,l=l+Math.imul(h,ht)|0,l=l+Math.imul(I,ft)|0,S=S+Math.imul(I,ht)|0,g=g+Math.imul(Fe,dt)|0,l=l+Math.imul(Fe,pt)|0,l=l+Math.imul(w,dt)|0,S=S+Math.imul(w,pt)|0,g=g+Math.imul(Ue,gt)|0,l=l+Math.imul(Ue,yt)|0,l=l+Math.imul(We,gt)|0,S=S+Math.imul(We,yt)|0,g=g+Math.imul(De,mt)|0,l=l+Math.imul(De,wt)|0,l=l+Math.imul(Ne,mt)|0,S=S+Math.imul(Ne,wt)|0,g=g+Math.imul(Oe,bt)|0,l=l+Math.imul(Oe,vt)|0,l=l+Math.imul(Ve,bt)|0,S=S+Math.imul(Ve,vt)|0;var _s=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(_s>>>26)|0,_s&=67108863,g=Math.imul(W,ft),l=Math.imul(W,ht),l=l+Math.imul(q,ft)|0,S=Math.imul(q,ht),g=g+Math.imul(h,dt)|0,l=l+Math.imul(h,pt)|0,l=l+Math.imul(I,dt)|0,S=S+Math.imul(I,pt)|0,g=g+Math.imul(Fe,gt)|0,l=l+Math.imul(Fe,yt)|0,l=l+Math.imul(w,gt)|0,S=S+Math.imul(w,yt)|0,g=g+Math.imul(Ue,mt)|0,l=l+Math.imul(Ue,wt)|0,l=l+Math.imul(We,mt)|0,S=S+Math.imul(We,wt)|0,g=g+Math.imul(De,bt)|0,l=l+Math.imul(De,vt)|0,l=l+Math.imul(Ne,bt)|0,S=S+Math.imul(Ne,vt)|0;var Es=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(Es>>>26)|0,Es&=67108863,g=Math.imul(W,dt),l=Math.imul(W,pt),l=l+Math.imul(q,dt)|0,S=Math.imul(q,pt),g=g+Math.imul(h,gt)|0,l=l+Math.imul(h,yt)|0,l=l+Math.imul(I,gt)|0,S=S+Math.imul(I,yt)|0,g=g+Math.imul(Fe,mt)|0,l=l+Math.imul(Fe,wt)|0,l=l+Math.imul(w,mt)|0,S=S+Math.imul(w,wt)|0,g=g+Math.imul(Ue,bt)|0,l=l+Math.imul(Ue,vt)|0,l=l+Math.imul(We,bt)|0,S=S+Math.imul(We,vt)|0;var As=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(As>>>26)|0,As&=67108863,g=Math.imul(W,gt),l=Math.imul(W,yt),l=l+Math.imul(q,gt)|0,S=Math.imul(q,yt),g=g+Math.imul(h,mt)|0,l=l+Math.imul(h,wt)|0,l=l+Math.imul(I,mt)|0,S=S+Math.imul(I,wt)|0,g=g+Math.imul(Fe,bt)|0,l=l+Math.imul(Fe,vt)|0,l=l+Math.imul(w,bt)|0,S=S+Math.imul(w,vt)|0;var Is=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(Is>>>26)|0,Is&=67108863,g=Math.imul(W,mt),l=Math.imul(W,wt),l=l+Math.imul(q,mt)|0,S=Math.imul(q,wt),g=g+Math.imul(h,bt)|0,l=l+Math.imul(h,vt)|0,l=l+Math.imul(I,bt)|0,S=S+Math.imul(I,vt)|0;var xs=(_+g|0)+((l&8191)<<13)|0;_=(S+(l>>>13)|0)+(xs>>>26)|0,xs&=67108863,g=Math.imul(W,bt),l=Math.imul(W,vt),l=l+Math.imul(q,bt)|0,S=Math.imul(q,vt);var Bs=(_+g|0)+((l&8191)<<13)|0;return _=(S+(l>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,b[0]=ls,b[1]=fs,b[2]=hs,b[3]=ds,b[4]=ps,b[5]=gs,b[6]=ys,b[7]=ms,b[8]=ws,b[9]=bs,b[10]=vs,b[11]=Ss,b[12]=ks,b[13]=_s,b[14]=Es,b[15]=As,b[16]=Is,b[17]=xs,b[18]=Bs,_!==0&&(b[19]=_,m.length++),m};Math.imul||(N=P);function L(M,c,d){d.negative=c.negative^M.negative,d.length=M.length+c.length;for(var m=0,A=0,k=0;k<d.length-1;k++){var b=A;A=0;for(var _=m&67108863,g=Math.min(k,c.length-1),l=Math.max(0,k-M.length+1);l<=g;l++){var S=k-l,H=M.words[S]|0,j=c.words[l]|0,Y=H*j,ne=Y&67108863;b=b+(Y/67108864|0)|0,ne=ne+_|0,_=ne&67108863,b=b+(ne>>>26)|0,A+=b>>>26,b&=67108863}d.words[k]=_,m=b,b=A}return m!==0?d.words[k]=m:d.length--,d._strip()}function U(M,c,d){return L(M,c,d)}s.prototype.mulTo=function(c,d){var m,A=this.length+c.length;return this.length===10&&c.length===10?m=N(this,c,d):A<63?m=P(this,c,d):A<1024?m=L(this,c,d):m=U(this,c,d),m},s.prototype.mul=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},s.prototype.mulf=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),U(this,c,d)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var m=0,A=0;A<this.length;A++){var k=(this.words[A]|0)*c,b=(k&67108863)+(m&67108863);m>>=26,m+=k/67108864|0,m+=b>>>26,this.words[A]=b&67108863}return m!==0&&(this.words[A]=m,this.length++),d?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var d=x(c);if(d.length===0)return new s(1);for(var m=this,A=0;A<d.length&&d[A]===0;A++,m=m.sqr());if(++A<d.length)for(var k=m.sqr();A<d.length;A++,k=k.sqr())d[A]!==0&&(m=m.mul(k));return m},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26,A=67108863>>>26-d<<26-d,k;if(d!==0){var b=0;for(k=0;k<this.length;k++){var _=this.words[k]&A,g=(this.words[k]|0)-_<<d;this.words[k]=g|b,b=_>>>26-d}b&&(this.words[k]=b,this.length++)}if(m!==0){for(k=this.length-1;k>=0;k--)this.words[k+m]=this.words[k];for(k=0;k<m;k++)this.words[k]=0;this.length+=m}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,d,m){n(typeof c=="number"&&c>=0);var A;d?A=(d-d%26)/26:A=0;var k=c%26,b=Math.min((c-k)/26,this.length),_=67108863^67108863>>>k<<k,g=m;if(A-=b,A=Math.max(0,A),g){for(var l=0;l<b;l++)g.words[l]=this.words[l];g.length=b}if(b!==0)if(this.length>b)for(this.length-=b,l=0;l<this.length;l++)this.words[l]=this.words[l+b];else this.words[0]=0,this.length=1;var S=0;for(l=this.length-1;l>=0&&(S!==0||l>=A);l--){var H=this.words[l]|0;this.words[l]=S<<26-k|H>>>k,S=H&_}return g&&S!==0&&(g.words[g.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,d,m){return n(this.negative===0),this.iushrn(c,d,m)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26,A=1<<d;if(this.length<=m)return!1;var k=this.words[m];return!!(k&A)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var A=67108863^67108863>>>d<<d;this.words[this.length-1]&=A}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,d,m){var A=c.length+m,k;this._expand(A);var b,_=0;for(k=0;k<c.length;k++){b=(this.words[k+m]|0)+_;var g=(c.words[k]|0)*d;b-=g&67108863,_=(b>>26)-(g/67108864|0),this.words[k+m]=b&67108863}for(;k<this.length-m;k++)b=(this.words[k+m]|0)+_,_=b>>26,this.words[k+m]=b&67108863;if(_===0)return this._strip();for(n(_===-1),_=0,k=0;k<this.length;k++)b=-(this.words[k]|0)+_,_=b>>26,this.words[k]=b&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,d){var m=this.length-c.length,A=this.clone(),k=c,b=k.words[k.length-1]|0,_=this._countBits(b);m=26-_,m!==0&&(k=k.ushln(m),A.iushln(m),b=k.words[k.length-1]|0);var g=A.length-k.length,l;if(d!=="mod"){l=new s(null),l.length=g+1,l.words=new Array(l.length);for(var S=0;S<l.length;S++)l.words[S]=0}var H=A.clone()._ishlnsubmul(k,1,g);H.negative===0&&(A=H,l&&(l.words[g]=1));for(var j=g-1;j>=0;j--){var Y=(A.words[k.length+j]|0)*67108864+(A.words[k.length+j-1]|0);for(Y=Math.min(Y/b|0,67108863),A._ishlnsubmul(k,Y,j);A.negative!==0;)Y--,A.negative=0,A._ishlnsubmul(k,1,j),A.isZero()||(A.negative^=1);l&&(l.words[j]=Y)}return l&&l._strip(),A._strip(),d!=="div"&&m!==0&&A.iushrn(m),{div:l||null,mod:A}},s.prototype.divmod=function(c,d,m){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,k,b;return this.negative!==0&&c.negative===0?(b=this.neg().divmod(c,d),d!=="mod"&&(A=b.div.neg()),d!=="div"&&(k=b.mod.neg(),m&&k.negative!==0&&k.iadd(c)),{div:A,mod:k}):this.negative===0&&c.negative!==0?(b=this.divmod(c.neg(),d),d!=="mod"&&(A=b.div.neg()),{div:A,mod:b.mod}):(this.negative&c.negative)!==0?(b=this.neg().divmod(c.neg(),d),d!=="div"&&(k=b.mod.neg(),m&&k.negative!==0&&k.isub(c)),{div:b.div,mod:k}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,d)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(c):d.mod,A=c.ushrn(1),k=c.andln(1),b=m.cmp(A);return b<0||k===1&&b===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var m=(1<<26)%c,A=0,k=this.length-1;k>=0;k--)A=(m*A+(this.words[k]|0))%c;return d?-A:A},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var m=0,A=this.length-1;A>=0;A--){var k=(this.words[A]|0)+m*67108864;this.words[A]=k/c|0,m=k%c}return this._strip(),d?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,m=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var A=new s(1),k=new s(0),b=new s(0),_=new s(1),g=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++g;for(var l=m.clone(),S=d.clone();!d.isZero();){for(var H=0,j=1;(d.words[0]&j)===0&&H<26;++H,j<<=1);if(H>0)for(d.iushrn(H);H-- >0;)(A.isOdd()||k.isOdd())&&(A.iadd(l),k.isub(S)),A.iushrn(1),k.iushrn(1);for(var Y=0,ne=1;(m.words[0]&ne)===0&&Y<26;++Y,ne<<=1);if(Y>0)for(m.iushrn(Y);Y-- >0;)(b.isOdd()||_.isOdd())&&(b.iadd(l),_.isub(S)),b.iushrn(1),_.iushrn(1);d.cmp(m)>=0?(d.isub(m),A.isub(b),k.isub(_)):(m.isub(d),b.isub(A),_.isub(k))}return{a:b,b:_,gcd:m.iushln(g)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,m=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var A=new s(1),k=new s(0),b=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var _=0,g=1;(d.words[0]&g)===0&&_<26;++_,g<<=1);if(_>0)for(d.iushrn(_);_-- >0;)A.isOdd()&&A.iadd(b),A.iushrn(1);for(var l=0,S=1;(m.words[0]&S)===0&&l<26;++l,S<<=1);if(l>0)for(m.iushrn(l);l-- >0;)k.isOdd()&&k.iadd(b),k.iushrn(1);d.cmp(m)>=0?(d.isub(m),A.isub(k)):(m.isub(d),k.isub(A))}var H;return d.cmpn(1)===0?H=A:H=k,H.cmpn(0)<0&&H.iadd(c),H},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),m=c.clone();d.negative=0,m.negative=0;for(var A=0;d.isEven()&&m.isEven();A++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var k=d.cmp(m);if(k<0){var b=d;d=m,m=b}else if(k===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(A)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,m=(c-d)/26,A=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=A,this;for(var k=A,b=m;k!==0&&b<this.length;b++){var _=this.words[b]|0;_+=k,k=_>>>26,_&=67108863,this.words[b]=_}return k!==0&&(this.words[b]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var A=this.words[0]|0;m=A===c?0:A<c?-1:1}return this.negative!==0?-m|0:m},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var A=this.words[m]|0,k=c.words[m]|0;if(A!==k){A<k?d=-1:A>k&&(d=1);break}}return d},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new Q(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var z={k256:null,p224:null,p192:null,p25519:null};function C(M,c){this.name=M,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},C.prototype.ireduce=function(c){var d=c,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var A=m<this.n?-1:d.ucmp(this.p);return A===0?(d.words[0]=0,d.length=1):A>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},C.prototype.split=function(c,d){c.iushrn(this.n,0,d)},C.prototype.imulK=function(c){return c.imul(this.k)};function D(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(D,C),D.prototype.split=function(c,d){for(var m=4194303,A=Math.min(c.length,9),k=0;k<A;k++)d.words[k]=c.words[k];if(d.length=A,c.length<=9){c.words[0]=0,c.length=1;return}var b=c.words[9];for(d.words[d.length++]=b&m,k=10;k<c.length;k++){var _=c.words[k]|0;c.words[k-10]=(_&m)<<4|b>>>22,b=_}b>>>=22,c.words[k-10]=b,b===0&&c.length>10?c.length-=10:c.length-=9},D.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,m=0;m<c.length;m++){var A=c.words[m]|0;d+=A*977,c.words[m]=d&67108863,d=A*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function K(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(K,C);function V(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(V,C);function ee(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ee,C),ee.prototype.imulK=function(c){for(var d=0,m=0;m<c.length;m++){var A=(c.words[m]|0)*19+d,k=A&67108863;A>>>=26,c.words[m]=k,d=A}return d!==0&&(c.words[c.length++]=d),c},s._prime=function(c){if(z[c])return z[c];var d;if(c==="k256")d=new D;else if(c==="p224")d=new K;else if(c==="p192")d=new V;else if(c==="p25519")d=new ee;else throw new Error("Unknown prime "+c);return z[c]=d,d};function Q(M){if(typeof M=="string"){var c=s._prime(M);this.m=c.p,this.prime=c}else n(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}Q.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},Q.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},Q.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(y(c,c.umod(this.m)._forceRed(this)),c)},Q.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},Q.prototype.add=function(c,d){this._verify2(c,d);var m=c.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},Q.prototype.iadd=function(c,d){this._verify2(c,d);var m=c.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},Q.prototype.sub=function(c,d){this._verify2(c,d);var m=c.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},Q.prototype.isub=function(c,d){this._verify2(c,d);var m=c.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},Q.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},Q.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},Q.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},Q.prototype.isqr=function(c){return this.imul(c,c.clone())},Q.prototype.sqr=function(c){return this.mul(c,c)},Q.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var m=this.m.add(new s(1)).iushrn(2);return this.pow(c,m)}for(var A=this.m.subn(1),k=0;!A.isZero()&&A.andln(1)===0;)k++,A.iushrn(1);n(!A.isZero());var b=new s(1).toRed(this),_=b.redNeg(),g=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,g).cmp(_)!==0;)l.redIAdd(_);for(var S=this.pow(l,A),H=this.pow(c,A.addn(1).iushrn(1)),j=this.pow(c,A),Y=k;j.cmp(b)!==0;){for(var ne=j,oe=0;ne.cmp(b)!==0;oe++)ne=ne.redSqr();n(oe<Y);var ce=this.pow(S,new s(1).iushln(Y-oe-1));H=H.redMul(ce),S=ce.redSqr(),j=j.redMul(S),Y=oe}return H},Q.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},Q.prototype.pow=function(c,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var m=4,A=new Array(1<<m);A[0]=new s(1).toRed(this),A[1]=c;for(var k=2;k<A.length;k++)A[k]=this.mul(A[k-1],c);var b=A[0],_=0,g=0,l=d.bitLength()%26;for(l===0&&(l=26),k=d.length-1;k>=0;k--){for(var S=d.words[k],H=l-1;H>=0;H--){var j=S>>H&1;if(b!==A[0]&&(b=this.sqr(b)),j===0&&_===0){g=0;continue}_<<=1,_|=j,g++,!(g!==m&&(k!==0||H!==0))&&(b=this.mul(b,A[_]),g=0,_=0)}l=26}return b},Q.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},Q.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},s.mont=function(c){return new he(c)};function he(M){Q.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(he,Q),he.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},he.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},he.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var m=c.imul(d),A=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=m.isub(A).iushrn(this.shift),b=k;return k.cmp(this.m)>=0?b=k.isub(this.m):k.cmpn(0)<0&&(b=k.iadd(this.m)),b._forceRed(this)},he.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new s(0)._forceRed(this);var m=c.mul(d),A=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=m.isub(A).iushrn(this.shift),b=k;return k.cmp(this.m)>=0?b=k.isub(this.m):k.cmpn(0)<0&&(b=k.iadd(this.m)),b._forceRed(this)},he.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,cr)})(Uo);var Ma=Uo.exports,oo={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=ue,n=t.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,a,u){return n(o,a,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof u=="string"?p.fill(a,u):p.fill(a):p.fill(0),p},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(oo,oo.exports);var di=oo.exports.Buffer;function Zf(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function y(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=di.from(E)),!di.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,B=0,x=0,P=E.length;x!==P&&E[x]===0;)x++,T++;for(var N=(P-x)*p+1>>>0,L=new Uint8Array(N);x!==P;){for(var U=E[x],z=0,C=N-1;(U!==0||z<B)&&C!==-1;C--,z++)U+=256*L[C]>>>0,L[C]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");B=z,x++}for(var D=N-B;D!==N&&L[D]===0;)D++;for(var K=a.repeat(T);D<N;++D)K+=r.charAt(L[D]);return K}function v(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return di.alloc(0);for(var T=0,B=0,x=0;E[T]===a;)B++,T++;for(var P=(E.length-T)*u+1>>>0,N=new Uint8Array(P);E[T];){var L=e[E.charCodeAt(T)];if(L===255)return;for(var U=0,z=P-1;(L!==0||U<x)&&z!==-1;z--,U++)L+=o*N[z]>>>0,N[z]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=U,T++}for(var C=P-x;C!==P&&N[C]===0;)C++;var D=di.allocUnsafe(B+(P-C));D.fill(0,0,B);for(var K=B;C!==P;)D[K++]=N[C++];return D}function R(E){var T=v(E);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:v,decode:R}}var Jf=Zf,Xf=Jf,Qf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Et=Xf(Qf);const eh=(r,e,t)=>r&e^~r&t,th=(r,e,t)=>r&e^r&t^e&t,rh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lr=new Uint32Array(64);class nh extends Oc{constructor(){super(64,32,8,!1),this.A=Pr[0]|0,this.B=Pr[1]|0,this.C=Pr[2]|0,this.D=Pr[3]|0,this.E=Pr[4]|0,this.F=Pr[5]|0,this.G=Pr[6]|0,this.H=Pr[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,t,n,i,s,o,a,u]}set(e,t,n,i,s,o,a,u){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,t){for(let v=0;v<16;v++,t+=4)Lr[v]=e.getUint32(t,!1);for(let v=16;v<64;v++){const R=Lr[v-15],E=Lr[v-2],T=hr(R,7)^hr(R,18)^R>>>3,B=hr(E,17)^hr(E,19)^E>>>10;Lr[v]=B+Lr[v-7]+T+Lr[v-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:p,H:y}=this;for(let v=0;v<64;v++){const R=hr(a,6)^hr(a,11)^hr(a,25),E=y+R+eh(a,u,p)+rh[v]+Lr[v]|0,B=(hr(n,2)^hr(n,13)^hr(n,22))+th(n,i,s)|0;y=p,p=u,u=a,a=o+E|0,o=s,s=i,i=n,n=E+B|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,p=p+this.G|0,y=y+this.H|0,this.set(n,i,s,o,a,u,p,y)}roundClean(){Lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ao=To(()=>new nh);var Bt={};function Ar(r,e,t){return e<=r&&r<=t}function $i(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function ih(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,u=o&1023;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function sh(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Ti=-1;function zo(r){this.tokens=[].slice.call(r)}zo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ti},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var An=-1;function Cs(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Mi="utf-8";function Pi(r,e){if(!(this instanceof Pi))return new Pi(r,e);if(r=r!==void 0?String(r).toLowerCase():Mi,r!==Mi)throw new Error("Encoding not supported. Only utf-8 is supported");e=$i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Pi.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=$i(t),this._streaming||(this._decoder=new oh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var i=new zo(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==An);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===An)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),sh(s)}};function Li(r,e){if(!(this instanceof Li))return new Li(r,e);if(r=r!==void 0?String(r).toLowerCase():Mi,r!==Mi)throw new Error("Encoding not supported. Only utf-8 is supported");e=$i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}Li.prototype={encode:function(e,t){e=e?String(e):"",t=$i(t),this._streaming||(this._encoder=new ah(this._options)),this._streaming=Boolean(t.stream);for(var n=[],i=new zo(ih(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==An);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==An;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function oh(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(a,u){if(u===Ti&&i!==0)return i=0,Cs(e);if(u===Ti)return An;if(i===0){if(Ar(u,0,127))return u;if(Ar(u,194,223))i=1,t=u-192;else if(Ar(u,224,239))u===224&&(s=160),u===237&&(o=159),i=2,t=u-224;else if(Ar(u,240,244))u===240&&(s=144),u===244&&(o=143),i=3,t=u-240;else return Cs(e);return t=t<<6*i,null}if(!Ar(u,s,o))return t=i=n=0,s=128,o=191,a.prepend(u),Cs(e);if(s=128,o=191,n+=1,t+=u-128<<6*(i-n),n!==i)return null;var p=t;return t=i=n=0,p}}function ah(r){r.fatal,this.handler=function(e,t){if(t===Ti)return An;if(Ar(t,0,127))return t;var n,i;Ar(t,128,2047)?(n=1,i=192):Ar(t,2048,65535)?(n=2,i=224):Ar(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}var ch=Object.freeze(Object.defineProperty({__proto__:null,TextEncoder:Li,TextDecoder:Pi},Symbol.toStringTag,{value:"Module"})),uh=Ic(ch),lh=cr&&cr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),fh=cr&&cr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),vr=cr&&cr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hh=cr&&cr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&lh(e,r,t);return fh(e,r),e},Xc=cr&&cr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bt,"__esModule",{value:!0});var Qc=Bt.deserializeUnchecked=su=Bt.deserialize=iu=Bt.serialize=Bt.BinaryReader=Bt.BinaryWriter=Bt.BorshError=Bt.baseDecode=Bt.baseEncode=void 0;const Or=Xc(Uo.exports),eu=Xc(Et),dh=hh(uh),ph=typeof TextDecoder!="function"?dh.TextDecoder:TextDecoder,gh=new ph("utf-8",{fatal:!0});function yh(r){return typeof r=="string"&&(r=nt.Buffer.from(r,"utf8")),eu.default.encode(nt.Buffer.from(r))}Bt.baseEncode=yh;function mh(r){return nt.Buffer.from(eu.default.decode(r))}Bt.baseDecode=mh;const Os=1024;class zt extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Bt.BorshError=zt;class tu{constructor(){this.buf=nt.Buffer.alloc(Os),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=nt.Buffer.concat([this.buf,nt.Buffer.alloc(Os)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new Or.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new Or.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new Or.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new Or.default(e).toArray("le",64)))}writeBuffer(e){this.buf=nt.Buffer.concat([nt.Buffer.from(this.buf.subarray(0,this.length)),e,nt.Buffer.alloc(Os)]),this.length+=e.length}writeString(e){this.maybeResize();const t=nt.Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(nt.Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}Bt.BinaryWriter=tu;function Sr(r,e,t){const n=t.value;t.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new zt("Reached the end of buffer when deserializing")}throw s}}}class Yt{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Or.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Or.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Or.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Or.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new zt(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return gh.decode(t)}catch(n){throw new zt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let i=0;i<t;++i)n.push(e());return n}}vr([Sr],Yt.prototype,"readU8",null);vr([Sr],Yt.prototype,"readU16",null);vr([Sr],Yt.prototype,"readU32",null);vr([Sr],Yt.prototype,"readU64",null);vr([Sr],Yt.prototype,"readU128",null);vr([Sr],Yt.prototype,"readU256",null);vr([Sr],Yt.prototype,"readU512",null);vr([Sr],Yt.prototype,"readString",null);vr([Sr],Yt.prototype,"readFixedArray",null);vr([Sr],Yt.prototype,"readArray",null);Bt.BinaryReader=Yt;function ru(r){return r.charAt(0).toUpperCase()+r.slice(1)}function qr(r,e,t,n,i){try{if(typeof n=="string")i[`write${ru(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new zt(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new zt(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let s=0;s<n[1];s++)qr(r,null,t[s],n[0],i)}else i.writeArray(t,s=>{qr(r,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),qr(r,e,t,n.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{qr(r,e,o,n.key,i),qr(r,e,s,n.value,i)});break}default:throw new zt(`FieldType ${n} unrecognized`)}else nu(r,t,i)}catch(s){throw s instanceof zt&&s.addToFieldPath(e),s}}function nu(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=r.get(e.constructor);if(!n)throw new zt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{qr(r,i,e[i],s,t)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){t.writeU8(s),qr(r,o,e[o],a,t);break}}}else throw new zt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function wh(r,e,t=tu){const n=new t;return nu(r,e,n),n.toArray()}var iu=Bt.serialize=wh;function Hr(r,e,t,n){try{if(typeof t=="string")return n[`read${ru(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(Hr(r,null,t[0],n));return i}else return n.readArray(()=>Hr(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?Hr(r,e,t.type,n):void 0;if(t.kind==="map"){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const a=Hr(r,e,t.key,n),u=Hr(r,e,t.value,n);i.set(a,u)}return i}return Wo(r,t,n)}catch(i){throw i instanceof zt&&i.addToFieldPath(e),i}}function Wo(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=r.get(e);if(!n)throw new zt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of r.get(e).fields)i[s]=Hr(r,s,o,t);return new e(i)}if(n.kind==="enum"){const i=t.readU8();if(i>=n.values.length)throw new zt(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=Hr(r,s,o,t);return new e({[s]:a})}throw new zt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function bh(r,e,t,n=Yt){const i=new n(t),s=Wo(r,e,i);if(i.offset<t.length)throw new zt(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}var su=Bt.deserialize=bh;function vh(r,e,t,n=Yt){const i=new n(t);return Wo(r,e,i)}Qc=Bt.deserializeUnchecked=vh;var $={};Object.defineProperty($,"__esModule",{value:!0});$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=xt=$.nu64=$.u48=$.u40=ie=$.u32=$.u24=Xt=$.u16=Ie=$.u8=Ur=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0;$.constant=$.utf8=$.cstr=He=$.blob=$.unionLayoutDiscriminator=$.union=Rt=$.seq=$.bits=se=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=Ht=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;const Ko=ue;function Ln(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=Ln;function Be(r){return Ln(r),Ko.Buffer.from(r.buffer,r.byteOffset,r.length)}$.uint8ArrayToBuffer=Be;class Ce{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}$.Layout=Ce;function Do(r,e){return e.property?r+"["+e.property+"]":r}$.nameWithProperty=Do;function Sh(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ce))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}$.bindConstructorLayout=Sh;class Dt extends Ce{isCount(){throw new Error("ExternalLayout is abstract")}}$.ExternalLayout=Dt;class ou extends Dt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Ln(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}$.GreedyCount=ou;class Fo extends Dt{constructor(e,t=0,n){if(!(e instanceof Ce))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Qt||this.layout instanceof ar}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}$.OffsetLayout=Fo;class Qt extends Ce{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntLE(e,n,this.span),this.span}}$.UInt=Qt;class ar extends Ce{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntBE(e,n,this.span),this.span}}$.UIntBE=ar;class an extends Ce{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntLE(e,n,this.span),this.span}}$.Int=an;class Cn extends Ce{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntBE(e,n,this.span),this.span}}$.IntBE=Cn;const co=Math.pow(2,32);function qi(r){const e=Math.floor(r/co),t=r-e*co;return{hi32:e,lo32:t}}function Hi(r,e){return r*co+e}class au extends Ce{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),i=n.readUInt32LE(t),s=n.readUInt32LE(t+4);return Hi(s,i)}encode(e,t,n=0){const i=qi(e),s=Be(t);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}$.NearUInt64=au;class cu extends Ce{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),i=n.readUInt32BE(t),s=n.readUInt32BE(t+4);return Hi(i,s)}encode(e,t,n=0){const i=qi(e),s=Be(t);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}$.NearUInt64BE=cu;class uu extends Ce{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),i=n.readUInt32LE(t),s=n.readInt32LE(t+4);return Hi(s,i)}encode(e,t,n=0){const i=qi(e),s=Be(t);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}$.NearInt64=uu;class lu extends Ce{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),i=n.readInt32BE(t),s=n.readUInt32BE(t+4);return Hi(i,s)}encode(e,t,n=0){const i=qi(e),s=Be(t);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}$.NearInt64BE=lu;class fu extends Ce{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatLE(t)}encode(e,t,n=0){return Be(t).writeFloatLE(e,n),4}}$.Float=fu;class hu extends Ce{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatBE(t)}encode(e,t,n=0){return Be(t).writeFloatBE(e,n),4}}$.FloatBE=hu;class du extends Ce{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleLE(t)}encode(e,t,n=0){return Be(t).writeDoubleLE(e,n),8}}$.Double=du;class pu extends Ce{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleBE(t)}encode(e,t,n=0){return Be(t).writeDoubleBE(e,n),8}}$.DoubleBE=pu;class gu extends Ce{constructor(e,t,n){if(!(e instanceof Ce))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Dt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Dt)&&0<e.span&&(i=t*e.span),super(i,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof Dt&&(i=i.decode(e,t)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(e,t+n),++s}return n}decode(e,t=0){const n=[];let i=0,s=this.count;for(s instanceof Dt&&(s=s.decode(e,t));i<s;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return n}encode(e,t,n=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,n+o),0);return this.count instanceof Dt&&this.count.encode(e.length,t,n),s}}$.Sequence=gu;class yu extends Ce{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Ce,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){Ln(e);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const i=n;let s=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>u&&(u=a.getSpan(t,n)))}s=n,n+=u}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}$.Structure=yu;class $o{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}$.UnionDiscriminator=$o;class Ci extends $o{constructor(e,t){if(!(e instanceof Dt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}$.UnionLayoutDiscriminator=Ci;class qo extends Ce{constructor(e,t,n){let i;if(e instanceof Qt||e instanceof ar)i=new Ci(new Fo(e));else if(e instanceof Dt&&e.isCount())i=new Ci(e);else if(e instanceof $o)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ce))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof Qt||e instanceof ar)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Qt||e instanceof ar,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=a.decode(e,t+u)}else n=o.decode(e,t);return n}encode(e,t,n=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,n),a+o.encode(e[o.property],t,n+a)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new mu(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}}$.Union=qo;class mu extends Ce{constructor(e,t,n,i){if(!(e instanceof qo))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof Ce))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+n)),n+i}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}$.VariantLayout=mu;function dn(r){return 0>r&&(r+=4294967296),r}class Ho extends Ce{constructor(e,t,n){if(!(e instanceof Qt||e instanceof ar))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=dn(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){const n=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(e));return n}encode(e,t,n=0){const i=this.word.decode(t,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new Vo(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new wu(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}$.BitStructure=Ho;class Vo{constructor(e,t,n){if(!(e instanceof Ho))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=dn(this.valueMask<<this.start),this.property=n}decode(e,t){const n=this.container._packedGetValue();return dn(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==dn(e&this.valueMask))throw new TypeError(Do("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=dn(e<<this.start);this.container._packedSetValue(dn(t&~this.wordMask)|n)}}$.BitField=Vo;class wu extends Vo{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}}$.Boolean=wu;class bu extends Ce{constructor(e,t){if(!(e instanceof Dt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Dt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Be(e).slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Dt&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Do("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>t.length)throw new RangeError("encoding overruns Uint8Array");const s=Be(e);return Be(t).write(s.toString("hex"),n,i,"hex"),this.length instanceof Dt&&this.length.encode(i,t,n),i}}$.Blob=bu;class vu extends Ce{constructor(e){super(-1,e)}getSpan(e,t=0){Ln(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Be(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const i=Ko.Buffer.from(e,"utf8"),s=i.length;if(n+s>t.length)throw new RangeError("encoding overruns Buffer");const o=Be(t);return i.copy(o,n),o[n+s]=0,s+1}}$.CString=vu;class Su extends Ce{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Ln(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Be(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const i=Ko.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(Be(t),n),s}}$.UTF8=Su;class ku extends Ce{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}$.Constant=ku;$.greedy=(r,e)=>new ou(r,e);var Ur=$.offset=(r,e,t)=>new Fo(r,e,t),Ie=$.u8=r=>new Qt(1,r),Xt=$.u16=r=>new Qt(2,r);$.u24=r=>new Qt(3,r);var ie=$.u32=r=>new Qt(4,r);$.u40=r=>new Qt(5,r);$.u48=r=>new Qt(6,r);var xt=$.nu64=r=>new au(r);$.u16be=r=>new ar(2,r);$.u24be=r=>new ar(3,r);$.u32be=r=>new ar(4,r);$.u40be=r=>new ar(5,r);$.u48be=r=>new ar(6,r);$.nu64be=r=>new cu(r);$.s8=r=>new an(1,r);$.s16=r=>new an(2,r);$.s24=r=>new an(3,r);$.s32=r=>new an(4,r);$.s40=r=>new an(5,r);$.s48=r=>new an(6,r);var Ht=$.ns64=r=>new uu(r);$.s16be=r=>new Cn(2,r);$.s24be=r=>new Cn(3,r);$.s32be=r=>new Cn(4,r);$.s40be=r=>new Cn(5,r);$.s48be=r=>new Cn(6,r);$.ns64be=r=>new lu(r);$.f32=r=>new fu(r);$.f32be=r=>new hu(r);$.f64=r=>new du(r);$.f64be=r=>new pu(r);var se=$.struct=(r,e,t)=>new yu(r,e,t);$.bits=(r,e,t)=>new Ho(r,e,t);var Rt=$.seq=(r,e,t)=>new gu(r,e,t);$.union=(r,e,t)=>new qo(r,e,t);$.unionLayoutDiscriminator=(r,e)=>new Ci(r,e);var He=$.blob=(r,e)=>new bu(r,e);$.cstr=r=>new vu(r);$.utf8=(r,e)=>new Su(r,e);$.constant=(r,e)=>new ku(r,e);var si={};Object.defineProperty(si,"__esModule",{value:!0});function kh(r){{const e=nt.Buffer.from(r);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var _h=si.toBigIntLE=kh;function Eh(r){{const e=r.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}si.toBigIntBE=Eh;function Ah(r,e){{const t=r.toString(16),n=nt.Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}}var _u=si.toBufferLE=Ah;function Ih(r,e){{const t=r.toString(16);return nt.Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}si.toBufferBE=Ih;class xh extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:o}=e,a=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=n)!=null?u:n=[e,...t()]}}}function Bh(r){return zr(r)&&typeof r[Symbol.iterator]=="function"}function zr(r){return typeof r=="object"&&r!=null}function ur(r){return typeof r=="string"?JSON.stringify(r):""+r}function Rh(r){const{done:e,value:t}=r.next();return e?void 0:t}function Th(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:u="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+ur(n)+"`"}=r;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...r,message:u}}function*Pa(r,e,t,n){Bh(r)||(r=[r]);for(const i of r){const s=Th(i,e,t,n);s&&(yield s)}}function*jo(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,a={path:n,branch:i};if(s&&(r=e.coercer(r,a),o&&e.type!=="type"&&zr(e.schema)&&zr(r)&&!Array.isArray(r)))for(const p in r)e.schema[p]===void 0&&delete r[p];let u=!0;for(const p of e.validator(r,a))u=!1,yield[p,void 0];for(let[p,y,v]of e.entries(r,a)){const R=jo(y,v,{path:p===void 0?n:[...n,p],branch:p===void 0?i:[...i,y],coerce:s,mask:o});for(const E of R)E[0]?(u=!1,yield[E[0],void 0]):s&&(y=E[1],p===void 0?r=y:r instanceof Map?r.set(p,y):r instanceof Set?r.add(y):zr(r)&&(r[p]=y))}if(u)for(const p of e.refiner(r,a))u=!1,yield[p,void 0];u&&(yield[void 0,r])}class kr{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(u,p)=>{const y=i(u,p);return Pa(y,p,this,u)}:this.validator=()=>[],s?this.refiner=(u,p)=>{const y=s(u,p);return Pa(y,p,this,u)}:this.refiner=()=>[]}assert(e){return Eu(e,this)}create(e){return X(e,this)}is(e){return Au(e,this)}mask(e){return Mh(e,this)}validate(e,t={}){return oi(e,this,t)}}function Eu(r,e){const t=oi(r,e);if(t[0])throw t[0]}function X(r,e){const t=oi(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Mh(r,e){const t=oi(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function Au(r,e){return!oi(r,e)[0]}function oi(r,e,t={}){const n=jo(r,e,t),i=Rh(n);if(i[0])return[new xh(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0];{const s=i[1];return[void 0,s]}}function cn(r,e){return new kr({type:r,schema:null,validator:e})}function Ph(){return cn("any",()=>!0)}function re(r){return new kr({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+ur(e)}})}function br(){return cn("boolean",r=>typeof r=="boolean")}function Go(r){return cn("instance",e=>e instanceof r||"Expected a `"+r.name+"` instance, but received: "+ur(e))}function Je(r){const e=ur(r),t=typeof r;return new kr({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||"Expected the literal `"+e+"`, but received: "+ur(n)}})}function Lh(){return cn("never",()=>!1)}function te(r){return new kr({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function F(){return cn("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+ur(r))}function le(r){return new kr({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Iu(r,e){return new kr({type:"record",schema:null,*entries(t){if(zr(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return zr(t)||"Expected an object, but received: "+ur(t)}})}function J(){return cn("string",r=>typeof r=="string"||"Expected a string, but received: "+ur(r))}function Yo(r){const e=Lh();return new kr({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||"Expected an array, but received: "+ur(t)}})}function G(r){const e=Object.keys(r);return new kr({type:"type",schema:r,*entries(t){if(zr(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return zr(t)||"Expected an object, but received: "+ur(t)}})}function Ft(r){const e=r.map(t=>t.type).join(" | ");return new kr({type:"union",schema:null,validator(t,n){const i=[];for(const s of r){const[...o]=jo(t,s,n),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+ur(t),...i]}})}function ai(){return cn("unknown",()=>!0)}function ci(r,e,t){return new kr({...r,coercer:(n,i)=>Au(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var pi,Ch=new Uint8Array(16);function xu(){if(!pi&&(pi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(Ch)}var Oh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vi(r){return typeof r=="string"&&Oh.test(r)}var It=[];for(var Ns=0;Ns<256;++Ns)It.push((Ns+256).toString(16).substr(1));function ji(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(It[r[e+0]]+It[r[e+1]]+It[r[e+2]]+It[r[e+3]]+"-"+It[r[e+4]]+It[r[e+5]]+"-"+It[r[e+6]]+It[r[e+7]]+"-"+It[r[e+8]]+It[r[e+9]]+"-"+It[r[e+10]]+It[r[e+11]]+It[r[e+12]]+It[r[e+13]]+It[r[e+14]]+It[r[e+15]]).toLowerCase();if(!Vi(t))throw TypeError("Stringified UUID is invalid");return t}var La,Us,zs=0,Ws=0;function Nh(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||La,o=r.clockseq!==void 0?r.clockseq:Us;if(s==null||o==null){var a=r.random||(r.rng||xu)();s==null&&(s=La=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Us=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:Ws+1,y=u-zs+(p-Ws)/1e4;if(y<0&&r.clockseq===void 0&&(o=o+1&16383),(y<0||u>zs)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");zs=u,Ws=p,Us=o,u+=122192928e5;var v=((u&268435455)*1e4+p)%4294967296;i[n++]=v>>>24&255,i[n++]=v>>>16&255,i[n++]=v>>>8&255,i[n++]=v&255;var R=u/4294967296*1e4&268435455;i[n++]=R>>>8&255,i[n++]=R&255,i[n++]=R>>>24&15|16,i[n++]=R>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var E=0;E<6;++E)i[n+E]=s[E];return e||ji(i)}function Bu(r){if(!Vi(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Uh(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var zh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Wh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ru(r,e,t){function n(i,s,o,a){if(typeof i=="string"&&(i=Uh(i)),typeof s=="string"&&(s=Bu(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=u[p];return o}return ji(u)}try{n.name=r}catch{}return n.DNS=zh,n.URL=Wh,n}function Kh(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return Dh(Fh($h(r),r.length*8))}function Dh(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function Tu(r){return(r+64>>>9<<4)+14+1}function Fh(r,e){r[e>>5]|=128<<e%32,r[Tu(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var a=t,u=n,p=i,y=s;t=Pt(t,n,i,s,r[o],7,-680876936),s=Pt(s,t,n,i,r[o+1],12,-389564586),i=Pt(i,s,t,n,r[o+2],17,606105819),n=Pt(n,i,s,t,r[o+3],22,-1044525330),t=Pt(t,n,i,s,r[o+4],7,-176418897),s=Pt(s,t,n,i,r[o+5],12,1200080426),i=Pt(i,s,t,n,r[o+6],17,-1473231341),n=Pt(n,i,s,t,r[o+7],22,-45705983),t=Pt(t,n,i,s,r[o+8],7,1770035416),s=Pt(s,t,n,i,r[o+9],12,-1958414417),i=Pt(i,s,t,n,r[o+10],17,-42063),n=Pt(n,i,s,t,r[o+11],22,-1990404162),t=Pt(t,n,i,s,r[o+12],7,1804603682),s=Pt(s,t,n,i,r[o+13],12,-40341101),i=Pt(i,s,t,n,r[o+14],17,-1502002290),n=Pt(n,i,s,t,r[o+15],22,1236535329),t=Lt(t,n,i,s,r[o+1],5,-165796510),s=Lt(s,t,n,i,r[o+6],9,-1069501632),i=Lt(i,s,t,n,r[o+11],14,643717713),n=Lt(n,i,s,t,r[o],20,-373897302),t=Lt(t,n,i,s,r[o+5],5,-701558691),s=Lt(s,t,n,i,r[o+10],9,38016083),i=Lt(i,s,t,n,r[o+15],14,-660478335),n=Lt(n,i,s,t,r[o+4],20,-405537848),t=Lt(t,n,i,s,r[o+9],5,568446438),s=Lt(s,t,n,i,r[o+14],9,-1019803690),i=Lt(i,s,t,n,r[o+3],14,-187363961),n=Lt(n,i,s,t,r[o+8],20,1163531501),t=Lt(t,n,i,s,r[o+13],5,-1444681467),s=Lt(s,t,n,i,r[o+2],9,-51403784),i=Lt(i,s,t,n,r[o+7],14,1735328473),n=Lt(n,i,s,t,r[o+12],20,-1926607734),t=Ct(t,n,i,s,r[o+5],4,-378558),s=Ct(s,t,n,i,r[o+8],11,-2022574463),i=Ct(i,s,t,n,r[o+11],16,1839030562),n=Ct(n,i,s,t,r[o+14],23,-35309556),t=Ct(t,n,i,s,r[o+1],4,-1530992060),s=Ct(s,t,n,i,r[o+4],11,1272893353),i=Ct(i,s,t,n,r[o+7],16,-155497632),n=Ct(n,i,s,t,r[o+10],23,-1094730640),t=Ct(t,n,i,s,r[o+13],4,681279174),s=Ct(s,t,n,i,r[o],11,-358537222),i=Ct(i,s,t,n,r[o+3],16,-722521979),n=Ct(n,i,s,t,r[o+6],23,76029189),t=Ct(t,n,i,s,r[o+9],4,-640364487),s=Ct(s,t,n,i,r[o+12],11,-421815835),i=Ct(i,s,t,n,r[o+15],16,530742520),n=Ct(n,i,s,t,r[o+2],23,-995338651),t=Ot(t,n,i,s,r[o],6,-198630844),s=Ot(s,t,n,i,r[o+7],10,1126891415),i=Ot(i,s,t,n,r[o+14],15,-1416354905),n=Ot(n,i,s,t,r[o+5],21,-57434055),t=Ot(t,n,i,s,r[o+12],6,1700485571),s=Ot(s,t,n,i,r[o+3],10,-1894986606),i=Ot(i,s,t,n,r[o+10],15,-1051523),n=Ot(n,i,s,t,r[o+1],21,-2054922799),t=Ot(t,n,i,s,r[o+8],6,1873313359),s=Ot(s,t,n,i,r[o+15],10,-30611744),i=Ot(i,s,t,n,r[o+6],15,-1560198380),n=Ot(n,i,s,t,r[o+13],21,1309151649),t=Ot(t,n,i,s,r[o+4],6,-145523070),s=Ot(s,t,n,i,r[o+11],10,-1120210379),i=Ot(i,s,t,n,r[o+2],15,718787259),n=Ot(n,i,s,t,r[o+9],21,-343485551),t=Nr(t,a),n=Nr(n,u),i=Nr(i,p),s=Nr(s,y)}return[t,n,i,s]}function $h(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Tu(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Nr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function qh(r,e){return r<<e|r>>>32-e}function Gi(r,e,t,n,i,s){return Nr(qh(Nr(Nr(e,r),Nr(n,s)),i),t)}function Pt(r,e,t,n,i,s,o){return Gi(e&t|~e&n,r,e,i,s,o)}function Lt(r,e,t,n,i,s,o){return Gi(e&n|t&~n,r,e,i,s,o)}function Ct(r,e,t,n,i,s,o){return Gi(e^t^n,r,e,i,s,o)}function Ot(r,e,t,n,i,s,o){return Gi(t^(e|~n),r,e,i,s,o)}var Hh=Ru("v3",48,Kh),Vh=Hh;function jh(r,e,t){r=r||{};var n=r.random||(r.rng||xu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return ji(n)}function Gh(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Ks(r,e){return r<<e|r>>>32-e}function Yh(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var p=new Uint32Array(16),y=0;y<16;++y)p[y]=r[u*64+y*4]<<24|r[u*64+y*4+1]<<16|r[u*64+y*4+2]<<8|r[u*64+y*4+3];a[u]=p}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var v=0;v<o;++v){for(var R=new Uint32Array(80),E=0;E<16;++E)R[E]=a[v][E];for(var T=16;T<80;++T)R[T]=Ks(R[T-3]^R[T-8]^R[T-14]^R[T-16],1);for(var B=t[0],x=t[1],P=t[2],N=t[3],L=t[4],U=0;U<80;++U){var z=Math.floor(U/20),C=Ks(B,5)+Gh(z,x,P,N)+L+e[z]+R[U]>>>0;L=N,N=P,P=Ks(x,30)>>>0,x=B,B=C}t[0]=t[0]+B>>>0,t[1]=t[1]+x>>>0,t[2]=t[2]+P>>>0,t[3]=t[3]+N>>>0,t[4]=t[4]+L>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Zh=Ru("v5",80,Yh),Jh=Zh,Xh="00000000-0000-0000-0000-000000000000";function Qh(r){if(!Vi(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var ed=Object.freeze(Object.defineProperty({__proto__:null,v1:Nh,v3:Vh,v4:jh,v5:Jh,NIL:Xh,version:Qh,validate:Vi,stringify:ji,parse:Bu},Symbol.toStringTag,{value:"Module"})),Mu=Ic(ed);const td=Mu.v4,rd=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:r};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const o=typeof n.generator=="function"?n.generator:function(){return td()};s.id=o(s,n)}else i===2&&t===null?n.notificationIdNull&&(s.id=null):s.id=t;return s};var nd=rd;const id=Mu.v4,sd=nd,Qn=function(r,e){if(!(this instanceof Qn))return new Qn(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return id()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};var od=Qn;Qn.prototype.request=function(r,e,t,n){const i=this;let s=null;const o=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof e=="function")n=e,s=r;else{typeof t=="function"&&(n=t,t=void 0);const p=typeof n=="function";try{s=sd(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(y){if(p)return n(y);throw y}if(!p)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(p){return n(p)}return this.callServer(u,function(p,y){i._parseResponse(p,y,n)}),s};Qn.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,n.filter(i),n.filter(s))}else return t(null,n.error,n.result);t(null,n)};var Pu={},Yi={exports:{}};(function(r){function e(t){return t&&t.__esModule?t:{default:t}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Yi);var Lu={exports:{}},On={exports:{}};(function(r){function e(t){return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(On);(function(r){var e=On.exports.default;function t(){r.exports=t=function(){return i},r.exports.__esModule=!0,r.exports.default=r.exports;var n,i={},s=Object.prototype,o=s.hasOwnProperty,a=Object.defineProperty||function(b,_,g){b[_]=g.value},u=typeof Symbol=="function"?Symbol:{},p=u.iterator||"@@iterator",y=u.asyncIterator||"@@asyncIterator",v=u.toStringTag||"@@toStringTag";function R(b,_,g){return Object.defineProperty(b,_,{value:g,enumerable:!0,configurable:!0,writable:!0}),b[_]}try{R({},"")}catch{R=function(g,l,S){return g[l]=S}}function E(b,_,g,l){var S=_&&_.prototype instanceof U?_:U,H=Object.create(S.prototype),j=new A(l||[]);return a(H,"_invoke",{value:M(b,g,j)}),H}function T(b,_,g){try{return{type:"normal",arg:b.call(_,g)}}catch(l){return{type:"throw",arg:l}}}i.wrap=E;var B="suspendedStart",x="suspendedYield",P="executing",N="completed",L={};function U(){}function z(){}function C(){}var D={};R(D,p,function(){return this});var K=Object.getPrototypeOf,V=K&&K(K(k([])));V&&V!==s&&o.call(V,p)&&(D=V);var ee=C.prototype=U.prototype=Object.create(D);function Q(b){["next","throw","return"].forEach(function(_){R(b,_,function(g){return this._invoke(_,g)})})}function he(b,_){function g(S,H,j,Y){var ne=T(b[S],b,H);if(ne.type!=="throw"){var oe=ne.arg,ce=oe.value;return ce&&e(ce)=="object"&&o.call(ce,"__await")?_.resolve(ce.__await).then(function(Re){g("next",Re,j,Y)},function(Re){g("throw",Re,j,Y)}):_.resolve(ce).then(function(Re){oe.value=Re,j(oe)},function(Re){return g("throw",Re,j,Y)})}Y(ne.arg)}var l;a(this,"_invoke",{value:function(H,j){function Y(){return new _(function(ne,oe){g(H,j,ne,oe)})}return l=l?l.then(Y,Y):Y()}})}function M(b,_,g){var l=B;return function(S,H){if(l===P)throw new Error("Generator is already running");if(l===N){if(S==="throw")throw H;return{value:n,done:!0}}for(g.method=S,g.arg=H;;){var j=g.delegate;if(j){var Y=c(j,g);if(Y){if(Y===L)continue;return Y}}if(g.method==="next")g.sent=g._sent=g.arg;else if(g.method==="throw"){if(l===B)throw l=N,g.arg;g.dispatchException(g.arg)}else g.method==="return"&&g.abrupt("return",g.arg);l=P;var ne=T(b,_,g);if(ne.type==="normal"){if(l=g.done?N:x,ne.arg===L)continue;return{value:ne.arg,done:g.done}}ne.type==="throw"&&(l=N,g.method="throw",g.arg=ne.arg)}}}function c(b,_){var g=_.method,l=b.iterator[g];if(l===n)return _.delegate=null,g==="throw"&&b.iterator.return&&(_.method="return",_.arg=n,c(b,_),_.method==="throw")||g!=="return"&&(_.method="throw",_.arg=new TypeError("The iterator does not provide a '"+g+"' method")),L;var S=T(l,b.iterator,_.arg);if(S.type==="throw")return _.method="throw",_.arg=S.arg,_.delegate=null,L;var H=S.arg;return H?H.done?(_[b.resultName]=H.value,_.next=b.nextLoc,_.method!=="return"&&(_.method="next",_.arg=n),_.delegate=null,L):H:(_.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,L)}function d(b){var _={tryLoc:b[0]};1 in b&&(_.catchLoc=b[1]),2 in b&&(_.finallyLoc=b[2],_.afterLoc=b[3]),this.tryEntries.push(_)}function m(b){var _=b.completion||{};_.type="normal",delete _.arg,b.completion=_}function A(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(d,this),this.reset(!0)}function k(b){if(b||b===""){var _=b[p];if(_)return _.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var g=-1,l=function S(){for(;++g<b.length;)if(o.call(b,g))return S.value=b[g],S.done=!1,S;return S.value=n,S.done=!0,S};return l.next=l}}throw new TypeError(e(b)+" is not iterable")}return z.prototype=C,a(ee,"constructor",{value:C,configurable:!0}),a(C,"constructor",{value:z,configurable:!0}),z.displayName=R(C,v,"GeneratorFunction"),i.isGeneratorFunction=function(b){var _=typeof b=="function"&&b.constructor;return!!_&&(_===z||(_.displayName||_.name)==="GeneratorFunction")},i.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,C):(b.__proto__=C,R(b,v,"GeneratorFunction")),b.prototype=Object.create(ee),b},i.awrap=function(b){return{__await:b}},Q(he.prototype),R(he.prototype,y,function(){return this}),i.AsyncIterator=he,i.async=function(b,_,g,l,S){S===void 0&&(S=Promise);var H=new he(E(b,_,g,l),S);return i.isGeneratorFunction(_)?H:H.next().then(function(j){return j.done?j.value:H.next()})},Q(ee),R(ee,v,"Generator"),R(ee,p,function(){return this}),R(ee,"toString",function(){return"[object Generator]"}),i.keys=function(b){var _=Object(b),g=[];for(var l in _)g.push(l);return g.reverse(),function S(){for(;g.length;){var H=g.pop();if(H in _)return S.value=H,S.done=!1,S}return S.done=!0,S}},i.values=k,A.prototype={constructor:A,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(m),!_)for(var g in this)g.charAt(0)==="t"&&o.call(this,g)&&!isNaN(+g.slice(1))&&(this[g]=n)},stop:function(){this.done=!0;var _=this.tryEntries[0].completion;if(_.type==="throw")throw _.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var g=this;function l(oe,ce){return j.type="throw",j.arg=_,g.next=oe,ce&&(g.method="next",g.arg=n),!!ce}for(var S=this.tryEntries.length-1;S>=0;--S){var H=this.tryEntries[S],j=H.completion;if(H.tryLoc==="root")return l("end");if(H.tryLoc<=this.prev){var Y=o.call(H,"catchLoc"),ne=o.call(H,"finallyLoc");if(Y&&ne){if(this.prev<H.catchLoc)return l(H.catchLoc,!0);if(this.prev<H.finallyLoc)return l(H.finallyLoc)}else if(Y){if(this.prev<H.catchLoc)return l(H.catchLoc,!0)}else{if(!ne)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return l(H.finallyLoc)}}}},abrupt:function(_,g){for(var l=this.tryEntries.length-1;l>=0;--l){var S=this.tryEntries[l];if(S.tryLoc<=this.prev&&o.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var H=S;break}}H&&(_==="break"||_==="continue")&&H.tryLoc<=g&&g<=H.finallyLoc&&(H=null);var j=H?H.completion:{};return j.type=_,j.arg=g,H?(this.method="next",this.next=H.finallyLoc,L):this.complete(j)},complete:function(_,g){if(_.type==="throw")throw _.arg;return _.type==="break"||_.type==="continue"?this.next=_.arg:_.type==="return"?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):_.type==="normal"&&g&&(this.next=g),L},finish:function(_){for(var g=this.tryEntries.length-1;g>=0;--g){var l=this.tryEntries[g];if(l.finallyLoc===_)return this.complete(l.completion,l.afterLoc),m(l),L}},catch:function(_){for(var g=this.tryEntries.length-1;g>=0;--g){var l=this.tryEntries[g];if(l.tryLoc===_){var S=l.completion;if(S.type==="throw"){var H=S.arg;m(l)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(_,g,l){return this.delegate={iterator:k(_),resultName:g,nextLoc:l},this.method==="next"&&(this.arg=n),L}},i}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(Lu);var vi=Lu.exports(),ad=vi;try{regeneratorRuntime=vi}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=vi:Function("r","regeneratorRuntime = r")(vi)}var Cu={exports:{}};(function(r){function e(n,i,s,o,a,u,p){try{var y=n[u](p),v=y.value}catch(R){s(R);return}y.done?i(v):Promise.resolve(v).then(o,a)}function t(n){return function(){var i=this,s=arguments;return new Promise(function(o,a){var u=n.apply(i,s);function p(v){e(u,o,a,p,y,"next",v)}function y(v){e(u,o,a,p,y,"throw",v)}p(void 0)})}}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(Cu);var Zi={exports:{}};(function(r){function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Zi);var Ji={exports:{}},Ou={exports:{}},Nu={exports:{}};(function(r){var e=On.exports.default;function t(n,i){if(e(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,i||"default");if(e(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(Nu);(function(r){var e=On.exports.default,t=Nu.exports;function n(i){var s=t(i,"string");return e(s)=="symbol"?s:String(s)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})(Ou);(function(r){var e=Ou.exports;function t(i,s){for(var o=0;o<s.length;o++){var a=s[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,e(a.key),a)}}function n(i,s,o){return s&&t(i.prototype,s),o&&t(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})(Ji);var Zo={exports:{}},Uu={exports:{}};(function(r){function e(t,n){return r.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},r.exports.__esModule=!0,r.exports.default=r.exports,e(t,n)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Uu);(function(r){var e=Uu.exports;function t(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&e(n,i)}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(Zo);var Jo={exports:{}},zu={exports:{}};(function(r){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(zu);(function(r){var e=On.exports.default,t=zu.exports;function n(i,s){if(s&&(e(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(i)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})(Jo);var Xo={exports:{}};(function(r){function e(t){return r.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Xo);var ui={},Wu=Yi.exports;Object.defineProperty(ui,"__esModule",{value:!0});ui.DefaultDataPack=void 0;ui.createError=hd;var cd=Wu(Zi.exports),ud=Wu(Ji.exports),ld=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),fd=function(){function r(){(0,cd.default)(this,r)}return(0,ud.default)(r,[{key:"encode",value:function(t){return JSON.stringify(t)}},{key:"decode",value:function(t){return JSON.parse(t)}}]),r}();ui.DefaultDataPack=fd;function hd(r,e){var t={code:r,message:ld.get(r)||"Internal Server Error"};return e&&(t.data=e),t}(function(r){var e=Yi.exports;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=e(ad),n=e(Cu.exports),i=e(On.exports),s=e(Zi.exports),o=e(Ji.exports),a=e(Zo.exports),u=e(Jo.exports),p=e(Xo.exports),y=Ki.exports,v=ui;function R(x){var P=E();return function(){var L=(0,p.default)(x),U;if(P){var z=(0,p.default)(this).constructor;U=Reflect.construct(L,arguments,z)}else U=L.apply(this,arguments);return(0,u.default)(this,U)}}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var T=function(x,P){var N={};for(var L in x)Object.prototype.hasOwnProperty.call(x,L)&&P.indexOf(L)<0&&(N[L]=x[L]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var U=0,L=Object.getOwnPropertySymbols(x);U<L.length;U++)P.indexOf(L[U])<0&&Object.prototype.propertyIsEnumerable.call(x,L[U])&&(N[L[U]]=x[L[U]]);return N},B=function(x){(0,a.default)(N,x);var P=R(N);function N(L){var U,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=arguments.length>3?arguments[3]:void 0,K=arguments.length>4?arguments[4]:void 0;(0,s.default)(this,N);var V=C.autoconnect,ee=V===void 0?!0:V,Q=C.reconnect,he=Q===void 0?!0:Q,M=C.reconnect_interval,c=M===void 0?1e3:M,d=C.max_reconnects,m=d===void 0?5:d,A=T(C,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return U=P.call(this),U.webSocketFactory=L,U.queue={},U.rpc_id=0,U.address=z,U.autoconnect=ee,U.ready=!1,U.reconnect=he,U.reconnect_timer_id=void 0,U.reconnect_interval=c,U.max_reconnects=m,U.rest_options=A,U.current_reconnects=0,U.generate_request_id=D||function(){return++U.rpc_id},K?U.dataPack=K:U.dataPack=new v.DefaultDataPack,U.autoconnect&&U._connect(U.address,Object.assign({autoconnect:U.autoconnect,reconnect:U.reconnect,reconnect_interval:U.reconnect_interval,max_reconnects:U.max_reconnects},U.rest_options)),U}return(0,o.default)(N,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(U,z,C,D){var K=this;return!D&&(0,i.default)(C)==="object"&&(D=C,C=null),new Promise(function(V,ee){if(!K.ready)return ee(new Error("socket not ready"));var Q=K.generate_request_id(U,z),he={jsonrpc:"2.0",method:U,params:z||void 0,id:Q};K.socket.send(K.dataPack.encode(he),D,function(M){if(M)return ee(M);K.queue[Q]={promise:[V,ee]},C&&(K.queue[Q].timeout=setTimeout(function(){delete K.queue[Q],ee(new Error("reply timeout"))},C))})})}},{key:"login",value:function(){var L=(0,n.default)(t.default.mark(function z(C){var D;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.call("rpc.login",C);case 2:if(D=V.sent,D){V.next=5;break}throw new Error("authentication failed");case 5:return V.abrupt("return",D);case 6:case"end":return V.stop()}},z,this)}));function U(z){return L.apply(this,arguments)}return U}()},{key:"listMethods",value:function(){var L=(0,n.default)(t.default.mark(function z(){return t.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.call("__listMethods");case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},z,this)}));function U(){return L.apply(this,arguments)}return U}()},{key:"notify",value:function(U,z){var C=this;return new Promise(function(D,K){if(!C.ready)return K(new Error("socket not ready"));var V={jsonrpc:"2.0",method:U,params:z};C.socket.send(C.dataPack.encode(V),function(ee){if(ee)return K(ee);D()})})}},{key:"subscribe",value:function(){var L=(0,n.default)(t.default.mark(function z(C){var D;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof C=="string"&&(C=[C]),V.next=3,this.call("rpc.on",C);case 3:if(D=V.sent,!(typeof C=="string"&&D[C]!=="ok")){V.next=6;break}throw new Error("Failed subscribing to an event '"+C+"' with: "+D[C]);case 6:return V.abrupt("return",D);case 7:case"end":return V.stop()}},z,this)}));function U(z){return L.apply(this,arguments)}return U}()},{key:"unsubscribe",value:function(){var L=(0,n.default)(t.default.mark(function z(C){var D;return t.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof C=="string"&&(C=[C]),V.next=3,this.call("rpc.off",C);case 3:if(D=V.sent,!(typeof C=="string"&&D[C]!=="ok")){V.next=6;break}throw new Error("Failed unsubscribing from an event with: "+D);case 6:return V.abrupt("return",D);case 7:case"end":return V.stop()}},z,this)}));function U(z){return L.apply(this,arguments)}return U}()},{key:"close",value:function(U,z){this.socket.close(U||1e3,z)}},{key:"_connect",value:function(U,z){var C=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(U,z),this.socket.addEventListener("open",function(){C.ready=!0,C.emit("open"),C.current_reconnects=0}),this.socket.addEventListener("message",function(D){var K=D.data;K instanceof ArrayBuffer&&(K=nt.Buffer.from(K).toString());try{K=C.dataPack.decode(K)}catch{return}if(K.notification&&C.listeners(K.notification).length){if(!Object.keys(K.params).length)return C.emit(K.notification);var V=[K.notification];if(K.params.constructor===Object)V.push(K.params);else for(var ee=0;ee<K.params.length;ee++)V.push(K.params[ee]);return Promise.resolve().then(function(){C.emit.apply(C,V)})}if(!C.queue[K.id])return K.method?Promise.resolve().then(function(){C.emit(K.method,K==null?void 0:K.params)}):void 0;"error"in K=="result"in K&&C.queue[K.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),C.queue[K.id].timeout&&clearTimeout(C.queue[K.id].timeout),K.error?C.queue[K.id].promise[1](K.error):C.queue[K.id].promise[0](K.result),delete C.queue[K.id]}),this.socket.addEventListener("error",function(D){return C.emit("error",D)}),this.socket.addEventListener("close",function(D){var K=D.code,V=D.reason;C.ready&&setTimeout(function(){return C.emit("close",K,V)},0),C.ready=!1,C.socket=void 0,K!==1e3&&(C.current_reconnects++,C.reconnect&&(C.max_reconnects>C.current_reconnects||C.max_reconnects===0)&&(C.reconnect_timer_id=setTimeout(function(){return C._connect(U,z)},C.reconnect_interval)))})}}]),N}(y.EventEmitter);r.default=B})(Pu);var dd=xc(Pu),Ku={};(function(r){var e=Yi.exports;Object.defineProperty(r,"__esModule",{value:!0}),r.default=v;var t=e(Zi.exports),n=e(Ji.exports),i=e(Zo.exports),s=e(Jo.exports),o=e(Xo.exports),a=Ki.exports;function u(R){var E=p();return function(){var B=(0,o.default)(R),x;if(E){var P=(0,o.default)(this).constructor;x=Reflect.construct(B,arguments,P)}else x=B.apply(this,arguments);return(0,s.default)(this,x)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y=function(R){(0,i.default)(T,R);var E=u(T);function T(B,x,P){var N;return(0,t.default)(this,T),N=E.call(this),N.socket=new window.WebSocket(B,P),N.socket.onopen=function(){return N.emit("open")},N.socket.onmessage=function(L){return N.emit("message",L.data)},N.socket.onerror=function(L){return N.emit("error",L)},N.socket.onclose=function(L){N.emit("close",L.code,L.reason)},N}return(0,n.default)(T,[{key:"send",value:function(x,P,N){var L=N||P;try{this.socket.send(x),L()}catch(U){L(U)}}},{key:"close",value:function(x,P){this.socket.close(x,P)}},{key:"addEventListener",value:function(x,P,N){this.socket.addEventListener(x,P,N)}}]),T}(a.EventEmitter);function v(R,E){return new y(R,E)}})(Ku);var pd=xc(Ku);const[Du,Fu,$u]=[[],[],[]],gd=BigInt(0),Kn=BigInt(1),yd=BigInt(2),md=BigInt(7),wd=BigInt(256),bd=BigInt(113);for(let r=0,e=Kn,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Du.push(2*(5*n+t)),Fu.push((r+1)*(r+2)/2%64);let i=gd;for(let s=0;s<7;s++)e=(e<<Kn^(e>>md)*bd)%wd,e&yd&&(i^=Kn<<(Kn<<BigInt(s))-Kn);$u.push(i)}const[vd,Sd]=Uc($u,!0),Ca=(r,e,t)=>t>32?Kc(r,e,t):zc(r,e,t),Oa=(r,e,t)=>t>32?Dc(r,e,t):Wc(r,e,t);function kd(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,p=t[u],y=t[u+1],v=Ca(p,y,1)^t[a],R=Oa(p,y,1)^t[a+1];for(let E=0;E<50;E+=10)r[o+E]^=v,r[o+E+1]^=R}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=Fu[o],u=Ca(i,s,a),p=Oa(i,s,a),y=Du[o];i=r[y],s=r[y+1],r[y]=u,r[y+1]=p}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=vd[n],r[1]^=Sd[n]}t.fill(0)}class Qo extends Ro{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ri(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=jl(this.state)}keccak(){kd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){kn(this);const{blockLen:t,state:n}=this;e=Di(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){kn(this,!1),Bo(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ri(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Tc(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Qo(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const _d=(r,e,t)=>To(()=>new Qo(e,r,t)),Na=_d(1,136,256/8);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ed(r){const e=Lo(r);Mn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Ad,hexToBytes:Id}=If,Yr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=Yr;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ad(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=Yr,t=typeof r=="string"?Id(r):r;if(!wr(t))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Yr._parseInt(t.subarray(2)),{d:o,l:a}=Yr._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=p=>Number.parseInt(p[0],16)&8?"00"+p:p,t=p=>{const y=p.toString(16);return y.length&1?`0${y}`:y},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,o=i.length/2,a=t(s),u=t(o);return`30${t(o+s+4)}02${u}${i}02${a}${n}`}},Ir=BigInt(0),Jt=BigInt(1);BigInt(2);const Ua=BigInt(3);BigInt(4);function xd(r){const e=Ed(r),{Fp:t}=e,n=e.toBytes||((T,B,x)=>{const P=B.toAffine();return en(Uint8Array.from([4]),t.toBytes(P.x),t.toBytes(P.y))}),i=e.fromBytes||(T=>{const B=T.subarray(1),x=t.fromBytes(B.subarray(0,t.BYTES)),P=t.fromBytes(B.subarray(t.BYTES,2*t.BYTES));return{x,y:P}});function s(T){const{a:B,b:x}=e,P=t.sqr(T),N=t.mul(P,T);return t.add(t.add(N,t.mul(T,B)),x)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(T){return typeof T=="bigint"&&Ir<T&&T<e.n}function a(T){if(!o(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(T){const{allowedPrivateKeyLengths:B,nByteLength:x,wrapPrivateKey:P,n:N}=e;if(B&&typeof T!="bigint"){if(wr(T)&&(T=Qr(T)),typeof T!="string"||!B.includes(T.length))throw new Error("Invalid key");T=T.padStart(x*2,"0")}let L;try{L=typeof T=="bigint"?T:Jr(kt("private key",T,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof T}`)}return P&&(L=Ge(L,N)),a(L),L}const p=new Map;function y(T){if(!(T instanceof v))throw new Error("ProjectivePoint expected")}class v{constructor(B,x,P){if(this.px=B,this.py=x,this.pz=P,B==null||!t.isValid(B))throw new Error("x required");if(x==null||!t.isValid(x))throw new Error("y required");if(P==null||!t.isValid(P))throw new Error("z required")}static fromAffine(B){const{x,y:P}=B||{};if(!B||!t.isValid(x)||!t.isValid(P))throw new Error("invalid affine point");if(B instanceof v)throw new Error("projective point not allowed");const N=L=>t.eql(L,t.ZERO);return N(x)&&N(P)?v.ZERO:new v(x,P,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){const x=t.invertBatch(B.map(P=>P.pz));return B.map((P,N)=>P.toAffine(x[N])).map(v.fromAffine)}static fromHex(B){const x=v.fromAffine(i(kt("pointHex",B)));return x.assertValidity(),x}static fromPrivateKey(B){return v.BASE.multiply(u(B))}_setWindowSize(B){this._WINDOW_SIZE=B,p.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:B,y:x}=this.toAffine();if(!t.isValid(B)||!t.isValid(x))throw new Error("bad point: x or y not FE");const P=t.sqr(x),N=s(B);if(!t.eql(P,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:B}=this.toAffine();if(t.isOdd)return!t.isOdd(B);throw new Error("Field doesn't support isOdd")}equals(B){y(B);const{px:x,py:P,pz:N}=this,{px:L,py:U,pz:z}=B,C=t.eql(t.mul(x,z),t.mul(L,N)),D=t.eql(t.mul(P,z),t.mul(U,N));return C&&D}negate(){return new v(this.px,t.neg(this.py),this.pz)}double(){const{a:B,b:x}=e,P=t.mul(x,Ua),{px:N,py:L,pz:U}=this;let z=t.ZERO,C=t.ZERO,D=t.ZERO,K=t.mul(N,N),V=t.mul(L,L),ee=t.mul(U,U),Q=t.mul(N,L);return Q=t.add(Q,Q),D=t.mul(N,U),D=t.add(D,D),z=t.mul(B,D),C=t.mul(P,ee),C=t.add(z,C),z=t.sub(V,C),C=t.add(V,C),C=t.mul(z,C),z=t.mul(Q,z),D=t.mul(P,D),ee=t.mul(B,ee),Q=t.sub(K,ee),Q=t.mul(B,Q),Q=t.add(Q,D),D=t.add(K,K),K=t.add(D,K),K=t.add(K,ee),K=t.mul(K,Q),C=t.add(C,K),ee=t.mul(L,U),ee=t.add(ee,ee),K=t.mul(ee,Q),z=t.sub(z,K),D=t.mul(ee,V),D=t.add(D,D),D=t.add(D,D),new v(z,C,D)}add(B){y(B);const{px:x,py:P,pz:N}=this,{px:L,py:U,pz:z}=B;let C=t.ZERO,D=t.ZERO,K=t.ZERO;const V=e.a,ee=t.mul(e.b,Ua);let Q=t.mul(x,L),he=t.mul(P,U),M=t.mul(N,z),c=t.add(x,P),d=t.add(L,U);c=t.mul(c,d),d=t.add(Q,he),c=t.sub(c,d),d=t.add(x,N);let m=t.add(L,z);return d=t.mul(d,m),m=t.add(Q,M),d=t.sub(d,m),m=t.add(P,N),C=t.add(U,z),m=t.mul(m,C),C=t.add(he,M),m=t.sub(m,C),K=t.mul(V,d),C=t.mul(ee,M),K=t.add(C,K),C=t.sub(he,K),K=t.add(he,K),D=t.mul(C,K),he=t.add(Q,Q),he=t.add(he,Q),M=t.mul(V,M),d=t.mul(ee,d),he=t.add(he,M),M=t.sub(Q,M),M=t.mul(V,M),d=t.add(d,M),Q=t.mul(he,d),D=t.add(D,Q),Q=t.mul(m,d),C=t.mul(c,C),C=t.sub(C,Q),Q=t.mul(c,he),K=t.mul(m,K),K=t.add(K,Q),new v(C,D,K)}subtract(B){return this.add(B.negate())}is0(){return this.equals(v.ZERO)}wNAF(B){return E.wNAFCached(this,p,B,x=>{const P=t.invertBatch(x.map(N=>N.pz));return x.map((N,L)=>N.toAffine(P[L])).map(v.fromAffine)})}multiplyUnsafe(B){const x=v.ZERO;if(B===Ir)return x;if(a(B),B===Jt)return this;const{endo:P}=e;if(!P)return E.unsafeLadder(this,B);let{k1neg:N,k1:L,k2neg:U,k2:z}=P.splitScalar(B),C=x,D=x,K=this;for(;L>Ir||z>Ir;)L&Jt&&(C=C.add(K)),z&Jt&&(D=D.add(K)),K=K.double(),L>>=Jt,z>>=Jt;return N&&(C=C.negate()),U&&(D=D.negate()),D=new v(t.mul(D.px,P.beta),D.py,D.pz),C.add(D)}multiply(B){a(B);let x=B,P,N;const{endo:L}=e;if(L){const{k1neg:U,k1:z,k2neg:C,k2:D}=L.splitScalar(x);let{p:K,f:V}=this.wNAF(z),{p:ee,f:Q}=this.wNAF(D);K=E.constTimeNegate(U,K),ee=E.constTimeNegate(C,ee),ee=new v(t.mul(ee.px,L.beta),ee.py,ee.pz),P=K.add(ee),N=V.add(Q)}else{const{p:U,f:z}=this.wNAF(x);P=U,N=z}return v.normalizeZ([P,N])[0]}multiplyAndAddUnsafe(B,x,P){const N=v.BASE,L=(z,C)=>C===Ir||C===Jt||!z.equals(N)?z.multiplyUnsafe(C):z.multiply(C),U=L(this,x).add(L(B,P));return U.is0()?void 0:U}toAffine(B){const{px:x,py:P,pz:N}=this,L=this.is0();B==null&&(B=L?t.ONE:t.inv(N));const U=t.mul(x,B),z=t.mul(P,B),C=t.mul(N,B);if(L)return{x:t.ZERO,y:t.ZERO};if(!t.eql(C,t.ONE))throw new Error("invZ was invalid");return{x:U,y:z}}isTorsionFree(){const{h:B,isTorsionFree:x}=e;if(B===Jt)return!0;if(x)return x(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:B,clearCofactor:x}=e;return B===Jt?this:x?x(v,this):this.multiplyUnsafe(e.h)}toRawBytes(B=!0){return this.assertValidity(),n(v,this,B)}toHex(B=!0){return Qr(this.toRawBytes(B))}}v.BASE=new v(e.Gx,e.Gy,t.ONE),v.ZERO=new v(t.ZERO,t.ONE,t.ZERO);const R=e.nBitLength,E=Zc(v,e.endo?Math.ceil(R/2):R);return{CURVE:e,ProjectivePoint:v,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function Bd(r){const e=Lo(r);return Mn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Rd(r){const e=Bd(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(d){return Ir<d&&d<t.ORDER}function a(d){return Ge(d,n)}function u(d){return io(d,n)}const{ProjectivePoint:p,normPrivateKeyToScalar:y,weierstrassEquation:v,isWithinCurveOrder:R}=xd({...e,toBytes(d,m,A){const k=m.toAffine(),b=t.toBytes(k.x),_=en;return A?_(Uint8Array.from([m.hasEvenY()?2:3]),b):_(Uint8Array.from([4]),b,t.toBytes(k.y))},fromBytes(d){const m=d.length,A=d[0],k=d.subarray(1);if(m===i&&(A===2||A===3)){const b=Jr(k);if(!o(b))throw new Error("Point is not on curve");const _=v(b);let g=t.sqrt(_);const l=(g&Jt)===Jt;return(A&1)===1!==l&&(g=t.neg(g)),{x:b,y:g}}else if(m===s&&A===4){const b=t.fromBytes(k.subarray(0,t.BYTES)),_=t.fromBytes(k.subarray(t.BYTES,2*t.BYTES));return{x:b,y:_}}else throw new Error(`Point of length ${m} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),E=d=>Qr(En(d,e.nByteLength));function T(d){const m=n>>Jt;return d>m}function B(d){return T(d)?a(-d):d}const x=(d,m,A)=>Jr(d.slice(m,A));class P{constructor(m,A,k){this.r=m,this.s=A,this.recovery=k,this.assertValidity()}static fromCompact(m){const A=e.nByteLength;return m=kt("compactSignature",m,A*2),new P(x(m,0,A),x(m,A,2*A))}static fromDER(m){const{r:A,s:k}=Yr.toSig(kt("DER",m));return new P(A,k)}assertValidity(){if(!R(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!R(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(m){return new P(this.r,this.s,m)}recoverPublicKey(m){const{r:A,s:k,recovery:b}=this,_=D(kt("msgHash",m));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");const g=b===2||b===3?A+e.n:A;if(g>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=(b&1)===0?"02":"03",S=p.fromHex(l+E(g)),H=u(g),j=a(-_*H),Y=a(k*H),ne=p.BASE.multiplyAndAddUnsafe(S,j,Y);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new P(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return _n(this.toDERHex())}toDERHex(){return Yr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _n(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const N={isValidPrivateKey(d){try{return y(d),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const d=Yc(e.n);return Uf(e.randomBytes(d),e.n)},precompute(d=8,m=p.BASE){return m._setWindowSize(d),m.multiply(BigInt(3)),m}};function L(d,m=!0){return p.fromPrivateKey(d).toRawBytes(m)}function U(d){const m=wr(d),A=typeof d=="string",k=(m||A)&&d.length;return m?k===i||k===s:A?k===2*i||k===2*s:d instanceof p}function z(d,m,A=!0){if(U(d))throw new Error("first arg must be private key");if(!U(m))throw new Error("second arg must be public key");return p.fromHex(m).multiply(y(d)).toRawBytes(A)}const C=e.bits2int||function(d){const m=Jr(d),A=d.length*8-e.nBitLength;return A>0?m>>BigInt(A):m},D=e.bits2int_modN||function(d){return a(C(d))},K=Po(e.nBitLength);function V(d){if(typeof d!="bigint")throw new Error("bigint expected");if(!(Ir<=d&&d<K))throw new Error(`bigint expected < 2^${e.nBitLength}`);return En(d,e.nByteLength)}function ee(d,m,A=Q){if(["recovered","canonical"].some(ce=>ce in A))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:b}=e;let{lowS:_,prehash:g,extraEntropy:l}=A;_==null&&(_=!0),d=kt("msgHash",d),g&&(d=kt("prehashed msgHash",k(d)));const S=D(d),H=y(m),j=[V(H),V(S)];if(l!=null){const ce=l===!0?b(t.BYTES):l;j.push(kt("extraEntropy",ce))}const Y=en(...j),ne=S;function oe(ce){const Re=C(ce);if(!R(Re))return;const me=u(Re),Se=p.BASE.multiply(Re).toAffine(),Te=a(Se.x);if(Te===Ir)return;const ke=a(me*a(ne+Te*H));if(ke===Ir)return;let Me=(Se.x===Te?0:2)|Number(Se.y&Jt),fr=ke;return _&&T(ke)&&(fr=B(ke),Me^=1),new P(Te,fr,Me)}return{seed:Y,k2sig:oe}}const Q={lowS:e.lowS,prehash:!1},he={lowS:e.lowS,prehash:!1};function M(d,m,A=Q){const{seed:k,k2sig:b}=ee(d,m,A),_=e;return Hc(_.hash.outputLen,_.nByteLength,_.hmac)(k,b)}p.BASE._setWindowSize(8);function c(d,m,A,k=he){var Se;const b=d;if(m=kt("msgHash",m),A=kt("publicKey",A),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:g}=k;let l,S;try{if(typeof b=="string"||wr(b))try{l=P.fromDER(b)}catch(Te){if(!(Te instanceof Yr.Err))throw Te;l=P.fromCompact(b)}else if(typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint"){const{r:Te,s:ke}=b;l=new P(Te,ke)}else throw new Error("PARSE");S=p.fromHex(A)}catch(Te){if(Te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&l.hasHighS())return!1;g&&(m=e.hash(m));const{r:H,s:j}=l,Y=D(m),ne=u(j),oe=a(Y*ne),ce=a(H*ne),Re=(Se=p.BASE.multiplyAndAddUnsafe(S,oe,ce))==null?void 0:Se.toAffine();return Re?a(Re.x)===H:!1}return{CURVE:e,getPublicKey:L,getSharedSecret:z,sign:M,verify:c,ProjectivePoint:p,Signature:P,utils:N}}class qu extends Ro{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Vl(e);const n=Di(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return kn(this),this.iHash.update(e),this}digestInto(e){kn(this),Bo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Hu=(r,e,t)=>new qu(r,e).update(t).digest();Hu.create=(r,e)=>new qu(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Td(r){return{hash:r,hmac:(e,...t)=>Hu(r,e,Lc(...t)),randomBytes:Cc}}function Md(r,e){const t=n=>Rd({...r,...Td(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),za=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pd=BigInt(1),uo=BigInt(2),Wa=(r,e)=>(r+e/uo)/e;function Ld(r){const e=Vu,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),p=r*r*r%e,y=p*p*r%e,v=Qe(y,t,e)*y%e,R=Qe(v,t,e)*y%e,E=Qe(R,uo,e)*p%e,T=Qe(E,i,e)*E%e,B=Qe(T,s,e)*T%e,x=Qe(B,a,e)*B%e,P=Qe(x,u,e)*x%e,N=Qe(P,a,e)*B%e,L=Qe(N,t,e)*y%e,U=Qe(L,o,e)*T%e,z=Qe(U,n,e)*p%e,C=Qe(z,uo,e);if(!lo.eql(lo.sqr(C),r))throw new Error("Cannot find square root");return C}const lo=jc(Vu,void 0,void 0,{sqrt:Ld}),Xi=Md({a:BigInt(0),b:BigInt(7),Fp:lo,n:za,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=za,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Pd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=Wa(s*r,e),u=Wa(-n*r,e);let p=Ge(r-a*t-u*i,e),y=Ge(-a*n-u*s,e);const v=p>o,R=y>o;if(v&&(p=e-p),R&&(y=e-y),p>o||y>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:v,k1:p,k2neg:R,k2:y}}}},ao);BigInt(0);Xi.ProjectivePoint;const Cd=Pn.utils.randomPrivateKey,Ka=()=>{const r=Pn.utils.randomPrivateKey(),e=Oi(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Oi=Pn.getPublicKey;function Da(r){try{return Pn.ExtendedPoint.fromHex(r),!0}catch{return!1}}const ea=(r,e)=>Pn.sign(r,e.slice(0,32)),Od=Pn.verify,ve=r=>ue.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ue.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ue.Buffer.from(r);class ta{constructor(e){Object.assign(this,e)}encode(){return ue.Buffer.from(iu(Gn,this))}static decode(e){return su(Gn,this,e)}static decodeUnchecked(e){return Qc(Gn,this,e)}}class Nd extends ta{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Gn=new Map;var ju;let Gu;const Yu=32,Gt=32;function Ud(r){return r._bn!==void 0}let Fa=1;Gu=Symbol.toStringTag;class Z extends ta{constructor(e){if(super({}),this._bn=void 0,Ud(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Et.decode(e);if(t.length!=Gt)throw new Error("Invalid public key input");this._bn=new Ma(t)}else this._bn=new Ma(e);if(this._bn.byteLength()>Gt)throw new Error("Invalid public key input")}}static unique(){const e=new Z(Fa);return Fa+=1,new Z(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Et.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ue.Buffer);if(e.length===Gt)return e;const t=ue.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Gu](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ue.Buffer.concat([e.toBuffer(),ue.Buffer.from(t),n.toBuffer()]),s=ao(i);return new Z(s)}static createProgramAddressSync(e,t){let n=ue.Buffer.alloc(0);e.forEach(function(s){if(s.length>Yu)throw new TypeError("Max seed length exceeded");n=ue.Buffer.concat([n,ve(s)])}),n=ue.Buffer.concat([n,t.toBuffer(),ue.Buffer.from("ProgramDerivedAddress")]);const i=ao(n);if(Da(i))throw new Error("Invalid seeds, address must fall off the curve");return new Z(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ue.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Z(e);return Da(t.toBytes())}}ju=Z;Z.default=new ju("11111111111111111111111111111111");Gn.set(Z,{kind:"struct",fields:[["_bn","u256"]]});class zd{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=ve(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ve(Cd()),this._publicKey=ve(Oi(this._secretKey))}get publicKey(){return new Z(this._publicKey)}get secretKey(){return ue.Buffer.concat([this._secretKey,this._publicKey],64)}}const Wd=new Z("BPFLoader1111111111111111111111111111111111"),Wr=1280-40-8,Qi=127,tn=64;class ra extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ra.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class na extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(na.prototype,"name",{value:"TransactionExpiredTimeoutError"});class gn extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ei{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const _e=(r="publicKey")=>He(32,r),Kd=(r="signature")=>He(64,r),Zr=(r="string")=>{const e=se([ie("length"),ie("lengthPadding"),He(Ur(ie(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const u={chars:ue.Buffer.from(s,"utf8")};return n(u,o,a)},i.alloc=s=>ie().span+ie().span+ue.Buffer.from(s,"utf8").length,i},Dd=(r="authorized")=>se([_e("staker"),_e("withdrawer")],r),Fd=(r="lockup")=>se([Ht("unixTimestamp"),Ht("epoch"),_e("custodian")],r),$d=(r="voteInit")=>se([_e("nodePubkey"),_e("authorizedVoter"),_e("authorizedWithdrawer"),Ie("commission")],r),qd=(r="voteAuthorizeWithSeedArgs")=>se([ie("voteAuthorizationType"),_e("currentAuthorityDerivedKeyOwnerPubkey"),Zr("currentAuthorityDerivedKeySeed"),_e("newAuthorized")],r);function Zu(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return Zu({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Kt(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Vt(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function xe(r,e){if(!r)throw new Error(e||"Assertion failed")}class es{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const u=i(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new es(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];xe(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),i=e.filter(([,u])=>!u.isSigner&&u.isWritable),s=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{xe(t.length>0,"Expected at least one writable signer key");const[u]=t[0];xe(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([u])=>new Z(u)),...n.map(([u])=>new Z(u)),...i.map(([u])=>new Z(u)),...s.map(([u])=>new Z(u))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Z(s),u=e.findIndex(p=>p.equals(a));u>=0&&(xe(u<256,"Max lookup table index exceeded"),n.push(u),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}class lr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Z(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Et.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ei(this.staticAccountKeys)}static compile(e){const t=es.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new ei(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Et.encode(a.data)}));return new lr({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Vt(t,e);const n=this.instructions.map(v=>{const{accounts:R,programIdIndex:E}=v,T=Array.from(Et.decode(v.data));let B=[];Vt(B,R.length);let x=[];return Vt(x,T.length),{programIdIndex:E,keyIndicesCount:ue.Buffer.from(B),keyIndices:R,dataLength:ue.Buffer.from(x),data:T}});let i=[];Vt(i,n.length);let s=ue.Buffer.alloc(Wr);ue.Buffer.from(i).copy(s);let o=i.length;n.forEach(v=>{o+=se([Ie("programIdIndex"),He(v.keyIndicesCount.length,"keyIndicesCount"),Rt(Ie("keyIndex"),v.keyIndices.length,"keyIndices"),He(v.dataLength.length,"dataLength"),Rt(Ie("userdatum"),v.data.length,"data")]).encode(v,s,o)}),s=s.slice(0,o);const a=se([He(1,"numRequiredSignatures"),He(1,"numReadonlySignedAccounts"),He(1,"numReadonlyUnsignedAccounts"),He(t.length,"keyCount"),Rt(_e("key"),e,"keys"),_e("recentBlockhash")]),u={numRequiredSignatures:ue.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ue.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ue.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ue.Buffer.from(t),keys:this.accountKeys.map(v=>ve(v.toBytes())),recentBlockhash:Et.decode(this.recentBlockhash)};let p=ue.Buffer.alloc(2048);const y=a.encode(u,p);return s.copy(p,y),p.slice(0,y+s.length)}static from(e){let t=[...e];const n=t.shift();if(n!==(n&Qi))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=t.shift(),s=t.shift(),o=Kt(t);let a=[];for(let R=0;R<o;R++){const E=t.slice(0,Gt);t=t.slice(Gt),a.push(new Z(ue.Buffer.from(E)))}const u=t.slice(0,Gt);t=t.slice(Gt);const p=Kt(t);let y=[];for(let R=0;R<p;R++){const E=t.shift(),T=Kt(t),B=t.slice(0,T);t=t.slice(T);const x=Kt(t),P=t.slice(0,x),N=Et.encode(ue.Buffer.from(P));t=t.slice(x),y.push({programIdIndex:E,accounts:B,data:N})}const v={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Et.encode(ue.Buffer.from(u)),accountKeys:a,instructions:y};return new lr(v)}}class rn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ei(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=es.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const y of s){const v=t.extractTableLookup(y);if(v!==void 0){const[R,{writable:E,readonly:T}]=v;n.push(R),i.writable.push(...E),i.readonly.push(...T)}}const[o,a]=t.getMessageComponents(),p=new ei(a,i).compileInstructions(e.instructions);return new rn({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const e=Array();Vt(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Vt(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Vt(s,this.addressTableLookups.length);const o=se([Ie("prefix"),se([Ie("numRequiredSignatures"),Ie("numReadonlySignedAccounts"),Ie("numReadonlyUnsignedAccounts")],"header"),He(e.length,"staticAccountKeysLength"),Rt(_e(),this.staticAccountKeys.length,"staticAccountKeys"),_e("recentBlockhash"),He(n.length,"instructionsLength"),He(t.length,"serializedInstructions"),He(s.length,"addressTableLookupsLength"),He(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wr),u=1<<7,p=o.encode({prefix:u,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(y=>y.toBytes()),recentBlockhash:Et.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(Wr);for(const n of this.compiledInstructions){const i=Array();Vt(i,n.accountKeyIndexes.length);const s=Array();Vt(s,n.data.length),e+=se([Ie("programIdIndex"),He(i.length,"encodedAccountKeyIndexesLength"),Rt(Ie(),n.accountKeyIndexes.length,"accountKeyIndexes"),He(s.length,"encodedDataLength"),He(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Wr);for(const n of this.addressTableLookups){const i=Array();Vt(i,n.writableIndexes.length);const s=Array();Vt(s,n.readonlyIndexes.length),e+=se([_e("accountKey"),He(i.length,"encodedWritableIndexesLength"),Rt(Ie(),n.writableIndexes.length,"writableIndexes"),He(s.length,"encodedReadonlyIndexesLength"),Rt(Ie(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=t.shift(),i=n&Qi;xe(n!==i,"Expected versioned message but received legacy message");const s=i;xe(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},a=[],u=Kt(t);for(let T=0;T<u;T++)a.push(new Z(t.splice(0,Gt)));const p=Et.encode(t.splice(0,Gt)),y=Kt(t),v=[];for(let T=0;T<y;T++){const B=t.shift(),x=Kt(t),P=t.splice(0,x),N=Kt(t),L=new Uint8Array(t.splice(0,N));v.push({programIdIndex:B,accountKeyIndexes:P,data:L})}const R=Kt(t),E=[];for(let T=0;T<R;T++){const B=new Z(t.splice(0,Gt)),x=Kt(t),P=t.splice(0,x),N=Kt(t),L=t.splice(0,N);E.push({accountKey:B,writableIndexes:P,readonlyIndexes:L})}return new rn({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:v,addressTableLookups:E})}}const ts={deserializeMessageVersion(r){const e=r[0],t=e&Qi;return t===e?"legacy":t},deserialize:r=>{const e=ts.deserializeMessageVersion(r);if(e==="legacy")return lr.from(r);if(e===0)return rn.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Er=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Hd=ue.Buffer.alloc(tn).fill(0);class ze{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ue.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ae{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ze(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<t.length;B++)if(t[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const i=[],s=[];t.forEach(B=>{B.keys.forEach(P=>{s.push({...P})});const x=B.programId.toString();i.includes(x)||i.push(x)}),i.forEach(B=>{s.push({pubkey:new Z(B),isSigner:!1,isWritable:!1})});const o=[];s.forEach(B=>{const x=B.pubkey.toString(),P=o.findIndex(N=>N.pubkey.toString()===x);P>-1?(o[P].isWritable=o[P].isWritable||B.isWritable,o[P].isSigner=o[P].isSigner||B.isSigner):o.push(B)}),o.sort(function(B,x){if(B.isSigner!==x.isSigner)return B.isSigner?-1:1;if(B.isWritable!==x.isWritable)return B.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",P)});const a=o.findIndex(B=>B.pubkey.equals(n));if(a>-1){const[B]=o.splice(a,1);B.isSigner=!0,B.isWritable=!0,o.unshift(B)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const B of this.signatures){const x=o.findIndex(P=>P.pubkey.equals(B.publicKey));if(x>-1)o[x].isSigner||(o[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let u=0,p=0,y=0;const v=[],R=[];o.forEach(({pubkey:B,isSigner:x,isWritable:P})=>{x?(v.push(B.toString()),u+=1,P||(p+=1)):(R.push(B.toString()),P||(y+=1))});const E=v.concat(R),T=t.map(B=>{const{data:x,programId:P}=B;return{programIdIndex:E.indexOf(P.toString()),accounts:B.keys.map(N=>E.indexOf(N.pubkey.toString())),data:Et.encode(x)}});return T.forEach(B=>{xe(B.programIdIndex>=0),B.accounts.forEach(x=>xe(x>=0))}),new lr({header:{numRequiredSignatures:u,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:y},accountKeys:E,recentBlockhash:e,instructions:T})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=ea(n,i.secretKey);this._addSignature(i.publicKey,ve(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){xe(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ue.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!Od(n,e,i.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Vt(n,t.length);const i=n.length+t.length*64+e.length,s=ue.Buffer.alloc(i);return xe(t.length<256),ue.Buffer.from(n).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(xe(o.length===64,"signature has invalid length"),ue.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+t.length*64),xe(s.length<=Wr,`Transaction too large: ${s.length} > ${Wr}`),s}get keys(){return xe(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return xe(this.instructions.length===1),this.instructions[0].programId}get data(){return xe(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Kt(t);let i=[];for(let s=0;s<n;s++){const o=t.slice(0,tn);t=t.slice(tn),i.push(Et.encode(ue.Buffer.from(o)))}return Ae.populate(lr.from(t),i)}static populate(e,t=[]){const n=new Ae;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Et.encode(Hd)?null:Et.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new ze({keys:s,programId:e.accountKeys[i.programIdIndex],data:Et.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class ia{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=n,p=o-a;xe(p>0,"Message header is invalid");const y=e.staticAccountKeys.length-o-u;xe(y>=0,"Message header is invalid");const v=e.getAccountKeys(t),R=v.get(0);if(R===void 0)throw new Error("Failed to decompile message because no account keys were found");const E=[];for(const T of i){const B=[];for(const P of T.accountKeyIndexes){const N=v.get(P);if(N===void 0)throw new Error(`Failed to find key for account key index ${P}`);const L=P<o;let U;L?U=P<p:P<v.staticAccountKeys.length?U=P-o<y:U=P-v.staticAccountKeys.length<v.accountKeysFromLookups.writable.length,B.push({pubkey:N,isSigner:P<n.numRequiredSignatures,isWritable:U})}const x=v.get(T.programIdIndex);if(x===void 0)throw new Error(`Failed to find program id for program id index ${T.programIdIndex}`);E.push(new ze({programId:x,data:ve(T.data),keys:B}))}return new ia({payerKey:R,instructions:E,recentBlockhash:s})}compileToLegacyMessage(){return lr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return rn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class In{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)xe(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(tn));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Vt(t,this.signatures.length);const n=se([He(t.length,"encodedSignaturesLength"),Rt(Kd(),this.signatures.length,"signatures"),He(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Kt(t);for(let o=0;o<i;o++)n.push(new Uint8Array(t.splice(0,tn)));const s=ts.deserialize(new Uint8Array(t));return new In(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));xe(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=ea(t,i.secretKey)}}addSignature(e,t){xe(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));xe(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const Vd=160,jd=64,Gd=Vd/jd,Ju=1e3/Gd,dr=new Z("SysvarC1ock11111111111111111111111111111111"),Yd=new Z("SysvarEpochSchedu1e111111111111111111111111"),Zd=new Z("Sysvar1nstructions1111111111111111111111111"),Si=new Z("SysvarRecentB1ockHashes11111111111111111111"),xn=new Z("SysvarRent111111111111111111111111111111111"),Jd=new Z("SysvarRewards111111111111111111111111111111"),Xd=new Z("SysvarS1otHashes111111111111111111111111111"),Qd=new Z("SysvarS1otHistory11111111111111111111111111"),ki=new Z("SysvarStakeHistory1111111111111111111111111");async function fo(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,u=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Vr(r){return new Promise(e=>setTimeout(e,r))}function Ee(r,e){const t=r.layout.span>=0?r.layout.span:Zu(r,e),n=ue.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function Pe(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const Xu=xt("lamportsPerSignature"),Qu=se([ie("version"),ie("state"),_e("authorizedPubkey"),_e("nonce"),se([Xu],"feeCalculator")]),ho=Qu.span;class rs{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Qu.decode(ve(e),0);return new rs({authorizedPubkey:new Z(t.authorizedPubkey),nonce:new Z(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const ep=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},tp=r=>e=>{const t=He(r,e),{encode:n,decode:i}=ep(t),s=t;return s.decode=(o,a)=>{const u=i(o,a);return _h(ue.Buffer.from(u))},s.encode=(o,a,u)=>{const p=_u(o,r);return n(p,a,u)},s},Bn=tp(8);class rp{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ie("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Ke))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=Pe(Ke.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Z(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Pe(Ke.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=Pe(Ke.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Z(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Pe(Ke.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=Pe(Ke.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Z(t),seed:n,space:i,programId:new Z(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Pe(Ke.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Z(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=Pe(Ke.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Z(t),seed:n,programId:new Z(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:o}=Pe(Ke.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Z(t),seed:n,lamports:i,space:s,programId:new Z(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Pe(Ke.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Z(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pe(Ke.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Pe(Ke.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Pe(Ke.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Z(t)}}static checkProgramId(e){if(!e.equals(Tt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ke=Object.freeze({Create:{index:0,layout:se([ie("instruction"),Ht("lamports"),Ht("space"),_e("programId")])},Assign:{index:1,layout:se([ie("instruction"),_e("programId")])},Transfer:{index:2,layout:se([ie("instruction"),Bn("lamports")])},CreateWithSeed:{index:3,layout:se([ie("instruction"),_e("base"),Zr("seed"),Ht("lamports"),Ht("space"),_e("programId")])},AdvanceNonceAccount:{index:4,layout:se([ie("instruction")])},WithdrawNonceAccount:{index:5,layout:se([ie("instruction"),Ht("lamports")])},InitializeNonceAccount:{index:6,layout:se([ie("instruction"),_e("authorized")])},AuthorizeNonceAccount:{index:7,layout:se([ie("instruction"),_e("authorized")])},Allocate:{index:8,layout:se([ie("instruction"),Ht("space")])},AllocateWithSeed:{index:9,layout:se([ie("instruction"),_e("base"),Zr("seed"),Ht("space"),_e("programId")])},AssignWithSeed:{index:10,layout:se([ie("instruction"),_e("base"),Zr("seed"),_e("programId")])},TransferWithSeed:{index:11,layout:se([ie("instruction"),Bn("lamports"),Zr("seed"),_e("programId")])},UpgradeNonceAccount:{index:12,layout:se([ie("instruction")])}});class Tt{constructor(){}static createAccount(e){const t=Ke.Create,n=Ee(t,{lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())});return new ze({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Ke.TransferWithSeed;t=Ee(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Ke.Transfer;t=Ee(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ze({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Ke.AssignWithSeed;t=Ee(i,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ke.Assign;t=Ee(i,{programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ze({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ke.CreateWithSeed,n=Ee(t,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ze({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Ae;"basePubkey"in e&&"seed"in e?t.add(Tt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ho,programId:this.programId})):t.add(Tt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ho,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Ke.InitializeNonceAccount,n=Ee(t,{authorized:ve(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:xn,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ze(i)}static nonceAdvance(e){const t=Ke.AdvanceNonceAccount,n=Ee(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ze(i)}static nonceWithdraw(e){const t=Ke.WithdrawNonceAccount,n=Ee(t,{lamports:e.lamports});return new ze({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:xn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Ke.AuthorizeNonceAccount,n=Ee(t,{authorized:ve(e.newAuthorizedPubkey.toBuffer())});return new ze({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Ke.AllocateWithSeed;t=Ee(i,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ke.Allocate;t=Ee(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ze({keys:n,programId:this.programId,data:t})}}Tt.programId=new Z("11111111111111111111111111111111");const np=Wr-300;class nn{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/nn.chunkSize)+1+1)}static async load(e,t,n,i,s){{const v=await e.getMinimumBalanceForRentExemption(s.length),R=await e.getAccountInfo(n.publicKey,"confirmed");let E=null;if(R!==null){if(R.executable)return console.error("Program load failed, account is already executable"),!1;R.data.length!==s.length&&(E=E||new Ae,E.add(Tt.allocate({accountPubkey:n.publicKey,space:s.length}))),R.owner.equals(i)||(E=E||new Ae,E.add(Tt.assign({accountPubkey:n.publicKey,programId:i}))),R.lamports<v&&(E=E||new Ae,E.add(Tt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:v-R.lamports})))}else E=new Ae().add(Tt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:v>0?v:1,space:s.length,programId:i}));E!==null&&await fo(e,E,[t,n],{commitment:"confirmed"})}const o=se([ie("instruction"),ie("offset"),ie("bytesLength"),ie("bytesLengthPadding"),Rt(Ie("byte"),Ur(ie(),-8),"bytes")]),a=nn.chunkSize;let u=0,p=s,y=[];for(;p.length>0;){const v=p.slice(0,a),R=ue.Buffer.alloc(a+16);o.encode({instruction:0,offset:u,bytes:v,bytesLength:0,bytesLengthPadding:0},R);const E=new Ae().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:R});y.push(fo(e,E,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Vr(1e3/4),u+=a,p=p.slice(a)}await Promise.all(y);{const v=se([ie("instruction")]),R=ue.Buffer.alloc(v.span);v.encode({instruction:1},R);const E=new Ae().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:xn,isSigner:!1,isWritable:!1}],programId:i,data:R}),T="processed",B=await e.sendTransaction(E,[t,n],{preflightCommitment:T}),{context:x,value:P}=await e.confirmTransaction({signature:B,lastValidBlockHeight:E.lastValidBlockHeight,blockhash:E.recentBlockhash},T);if(P.err)throw new Error(`Transaction ${B} failed (${JSON.stringify(P)})`);for(;;){try{if(await e.getSlot({commitment:T})>x.slot)break}catch{}await new Promise(N=>setTimeout(N,Math.round(Ju/2)))}}return!0}}nn.chunkSize=np;const ip=new Z("BPFLoader2111111111111111111111111111111111");class sp{static getMinNumSignatures(e){return nn.getMinNumSignatures(e)}static load(e,t,n,i,s){return nn.load(e,t,n,s,i)}}function op(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ap=Object.prototype.toString,cp=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};function qn(r,e){var t,n,i,s,o,a,u;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return qn(r.toJSON(),e);if(u=ap.call(r),u==="[object Array]"){for(i="[",n=r.length-1,t=0;t<n;t++)i+=qn(r[t],!0)+",";return n>-1&&(i+=qn(r[t],!0)),i+"]"}else if(u==="[object Object]"){for(s=cp(r).sort(),n=s.length,i="",t=0;t<n;)o=s[t],a=qn(r[o],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),t++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var up=function(r){var e=qn(r,!1);if(e!==void 0)return""+e},$a=op(up);const Dn=32;function Ds(r){let e=0;for(;r>1;)r/=2,e++;return e}function lp(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class el{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Ds(lp(e+Dn+1))-Ds(Dn)-1,n=this.getSlotsInEpoch(t),i=e-(n-Dn);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Dn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ds(Dn)):this.slotsPerEpoch}}class po extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const fp={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ae extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}var hp=globalThis.fetch;class dp extends dd{constructor(e,t,n){const i=s=>{const o=pd(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function pp(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const qa=56;class go{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=pp(gp,e),n=e.length-qa;xe(n>=0,"lookup table is invalid"),xe(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=se([Rt(_e(),i,"addresses")]).decode(e.slice(qa));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Z(t.authority[0]):void 0,addresses:s.map(o=>new Z(o))}}}const gp={index:1,layout:se([ie("typeIndex"),Bn("deactivationSlot"),xt("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Rt(_e(),Ur(Ie(),-1),"authority")])},yp=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function mp(r){const e=r.match(yp);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${s}`}const St=ci(Go(Z),J(),r=>new Z(r)),tl=Yo([J(),Je("base64")]),sa=ci(Go(ue.Buffer),tl,r=>ue.Buffer.from(r[0],"base64")),rl=30*1e3;function wp(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function je(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function nl(r){return Ft([G({jsonrpc:Je("2.0"),id:J(),result:r}),G({jsonrpc:Je("2.0"),id:J(),error:G({code:ai(),message:J(),data:le(Ph())})})])}const bp=nl(ai());function be(r){return ci(nl(r),bp,e=>"error"in e?e:{...e,result:X(e.result,r)})}function et(r){return be(G({context:G({slot:F()}),value:r}))}function ns(r){return G({context:G({slot:F()}),value:r})}function Fs(r,e){return r===0?new rn({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Z(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Et.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new lr(e)}const vp=G({foundation:F(),foundationTerm:F(),initial:F(),taper:F(),terminal:F()}),Sp=be(re(te(G({epoch:F(),effectiveSlot:F(),amount:F(),postBalance:F(),commission:le(te(F()))})))),kp=re(G({slot:F(),prioritizationFee:F()})),_p=G({total:F(),validator:F(),foundation:F(),epoch:F()}),Ep=G({epoch:F(),slotIndex:F(),slotsInEpoch:F(),absoluteSlot:F(),blockHeight:le(F()),transactionCount:le(F())}),Ap=G({slotsPerEpoch:F(),leaderScheduleSlotOffset:F(),warmup:br(),firstNormalEpoch:F(),firstNormalSlot:F()}),Ip=Iu(J(),re(F())),un=te(Ft([G({}),J()])),xp=G({err:un}),Bp=Je("receivedSignature"),Rp=G({"solana-core":J(),"feature-set":le(F())}),Ha=et(G({err:te(Ft([G({}),J()])),logs:te(re(J())),accounts:le(te(re(te(G({executable:br(),owner:J(),lamports:F(),data:re(J()),rentEpoch:le(F())}))))),unitsConsumed:le(F()),returnData:le(te(G({programId:J(),data:Yo([J(),Je("base64")])})))})),Tp=et(G({byIdentity:Iu(J(),re(F())),range:G({firstSlot:F(),lastSlot:F()})}));function Mp(r,e,t,n,i,s){const o=t||hp;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(y,v)=>{const R=await new Promise((E,T)=>{try{n(y,v,(B,x)=>E([B,x]))}catch(B){T(B)}});return await o(...R)}),new od(async(y,v)=>{const R={method:"POST",body:y,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},P0)};try{let E=5,T,B=500;for(;u?T=await u(r,R):T=await o(r,R),!(T.status!==429||i===!0||(E-=1,E===0));)console.log(`Server responded with ${T.status} ${T.statusText}.  Retrying after ${B}ms delay...`),await Vr(B),B*=2;const x=await T.text();T.ok?v(null,x):v(new Error(`${T.status} ${T.statusText}: ${x}`))}catch(E){E instanceof Error&&v(E)}},{})}function Pp(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function Lp(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const Cp=be(vp),Op=be(_p),Np=be(kp),Up=be(Ep),zp=be(Ap),Wp=be(Ip),Kp=be(F()),Dp=et(G({total:F(),circulating:F(),nonCirculating:F(),nonCirculatingAccounts:re(St)})),yo=G({amount:J(),uiAmount:te(F()),decimals:F(),uiAmountString:le(J())}),Fp=et(re(G({address:St,amount:J(),uiAmount:te(F()),decimals:F(),uiAmountString:le(J())}))),$p=et(re(G({pubkey:St,account:G({executable:br(),owner:St,lamports:F(),data:sa,rentEpoch:F()})}))),mo=G({program:J(),parsed:ai(),space:F()}),qp=et(re(G({pubkey:St,account:G({executable:br(),owner:St,lamports:F(),data:mo,rentEpoch:F()})}))),Hp=et(re(G({lamports:F(),address:St}))),ti=G({executable:br(),owner:St,lamports:F(),data:sa,rentEpoch:F()}),Vp=G({pubkey:St,account:ti}),jp=ci(Ft([Go(ue.Buffer),mo]),Ft([tl,mo]),r=>Array.isArray(r)?X(r,sa):r),wo=G({executable:br(),owner:St,lamports:F(),data:jp,rentEpoch:F()}),Gp=G({pubkey:St,account:wo}),Yp=G({state:Ft([Je("active"),Je("inactive"),Je("activating"),Je("deactivating")]),active:F(),inactive:F()}),Zp=be(re(G({signature:J(),slot:F(),err:un,memo:te(J()),blockTime:le(te(F()))}))),Jp=be(re(G({signature:J(),slot:F(),err:un,memo:te(J()),blockTime:le(te(F()))}))),Xp=G({subscription:F(),result:ns(ti)}),Qp=G({pubkey:St,account:ti}),e0=G({subscription:F(),result:ns(Qp)}),t0=G({parent:F(),slot:F(),root:F()}),r0=G({subscription:F(),result:t0}),n0=Ft([G({type:Ft([Je("firstShredReceived"),Je("completed"),Je("optimisticConfirmation"),Je("root")]),slot:F(),timestamp:F()}),G({type:Je("createdBank"),parent:F(),slot:F(),timestamp:F()}),G({type:Je("frozen"),slot:F(),timestamp:F(),stats:G({numTransactionEntries:F(),numSuccessfulTransactions:F(),numFailedTransactions:F(),maxTransactionsPerEntry:F()})}),G({type:Je("dead"),slot:F(),timestamp:F(),err:J()})]),i0=G({subscription:F(),result:n0}),s0=G({subscription:F(),result:ns(Ft([xp,Bp]))}),o0=G({subscription:F(),result:F()}),a0=G({pubkey:J(),gossip:te(J()),tpu:te(J()),rpc:te(J()),version:te(J())}),Va=G({votePubkey:J(),nodePubkey:J(),activatedStake:F(),epochVoteAccount:br(),epochCredits:re(Yo([F(),F(),F()])),commission:F(),lastVote:F(),rootSlot:te(F())}),c0=be(G({current:re(Va),delinquent:re(Va)})),u0=Ft([Je("processed"),Je("confirmed"),Je("finalized")]),l0=G({slot:F(),confirmations:te(F()),err:un,confirmationStatus:le(u0)}),f0=et(re(te(l0))),h0=be(F()),il=G({accountKey:St,writableIndexes:re(F()),readonlyIndexes:re(F())}),oa=G({signatures:re(J()),message:G({accountKeys:re(J()),header:G({numRequiredSignatures:F(),numReadonlySignedAccounts:F(),numReadonlyUnsignedAccounts:F()}),instructions:re(G({accounts:re(F()),data:J(),programIdIndex:F()})),recentBlockhash:J(),addressTableLookups:le(re(il))})}),sl=G({pubkey:St,signer:br(),writable:br(),source:le(Ft([Je("transaction"),Je("lookupTable")]))}),ol=G({accountKeys:re(sl),signatures:re(J())}),al=G({parsed:ai(),program:J(),programId:St}),cl=G({accounts:re(St),data:J(),programId:St}),d0=Ft([cl,al]),p0=Ft([G({parsed:ai(),program:J(),programId:J()}),G({accounts:re(J()),data:J(),programId:J()})]),ul=ci(d0,p0,r=>"accounts"in r?X(r,cl):X(r,al)),ll=G({signatures:re(J()),message:G({accountKeys:re(sl),instructions:re(ul),recentBlockhash:J(),addressTableLookups:le(te(re(il)))})}),Ni=G({accountIndex:F(),mint:J(),owner:le(J()),uiTokenAmount:yo}),fl=G({writable:re(St),readonly:re(St)}),is=G({err:un,fee:F(),innerInstructions:le(te(re(G({index:F(),instructions:re(G({accounts:re(F()),data:J(),programIdIndex:F()}))})))),preBalances:re(F()),postBalances:re(F()),logMessages:le(te(re(J()))),preTokenBalances:le(te(re(Ni))),postTokenBalances:le(te(re(Ni))),loadedAddresses:le(fl),computeUnitsConsumed:le(F())}),aa=G({err:un,fee:F(),innerInstructions:le(te(re(G({index:F(),instructions:re(ul)})))),preBalances:re(F()),postBalances:re(F()),logMessages:le(te(re(J()))),preTokenBalances:le(te(re(Ni))),postTokenBalances:le(te(re(Ni))),loadedAddresses:le(fl),computeUnitsConsumed:le(F())}),Nn=Ft([Je(0),Je("legacy")]),ln=G({pubkey:J(),lamports:F(),postBalance:te(F()),rewardType:te(J()),commission:le(te(F()))}),g0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:re(G({transaction:oa,meta:te(is),version:le(Nn)})),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),y0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),m0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:re(G({transaction:ol,meta:te(is),version:le(Nn)})),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),w0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:re(G({transaction:ll,meta:te(aa),version:le(Nn)})),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),b0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:re(G({transaction:ol,meta:te(aa),version:le(Nn)})),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),v0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),rewards:le(re(ln)),blockTime:te(F()),blockHeight:te(F())}))),S0=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:re(G({transaction:oa,meta:te(is)})),rewards:le(re(ln)),blockTime:te(F())}))),ja=be(te(G({blockhash:J(),previousBlockhash:J(),parentSlot:F(),signatures:re(J()),blockTime:te(F())}))),$s=be(te(G({slot:F(),meta:te(is),blockTime:le(te(F())),transaction:oa,version:le(Nn)}))),gi=be(te(G({slot:F(),transaction:ll,meta:te(aa),blockTime:le(te(F())),version:le(Nn)}))),k0=et(G({blockhash:J(),feeCalculator:G({lamportsPerSignature:F()})})),_0=et(G({blockhash:J(),lastValidBlockHeight:F()})),E0=et(br()),A0=G({slot:F(),numTransactions:F(),numSlots:F(),samplePeriodSecs:F()}),I0=be(re(A0)),x0=et(te(G({feeCalculator:G({lamportsPerSignature:F()})}))),B0=be(J()),R0=be(J()),T0=G({err:un,logs:re(J()),signature:J()}),M0=G({result:ns(T0),subscription:F()}),P0={"solana-client":"js/0.0.0-development"};class L0{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async y=>{const{commitment:v,config:R}=je(y),E=this._buildArgs([],v,void 0,R),T=$a(E);return p[T]=p[T]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",E),x=X(B,be(F()));if("error"in x)throw new ae(x.error,"failed to get block height information");return x.result}finally{delete p[T]}})(),await p[T]}})();let n,i,s,o,a,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=wp(e),this._rpcWsEndpoint=n||mp(e),this._rpcClient=Mp(e,i,s,o,a,u),this._rpcRequest=Pp(this._rpcClient),this._rpcBatchRequest=Lp(this._rpcClient),this._rpcWebSocket=new dp(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=X(o,et(F()));if("error"in a)throw new ae(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=X(t,be(te(F())));if("error"in n)throw new ae(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=X(e,be(F()));if("error"in t)throw new ae(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=X(e,Kp);if("error"in t)throw new ae(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=X(n,Dp);if("error"in i)throw new ae(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=X(i,et(yo));if("error"in s)throw new ae(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=X(i,et(yo));if("error"in s)throw new ae(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=je(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",a),p=X(u,$p);if("error"in p)throw new ae(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=X(o,qp);if("error"in a)throw new ae(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=X(i,Hp);if("error"in s)throw new ae(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=X(i,Fp);if("error"in s)throw new ae(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=X(o,et(te(ti)));if("error"in a)throw new ae(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=X(o,et(te(wo)));if("error"in a)throw new ae(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=je(t),s=e.map(p=>p.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),u=X(a,et(re(te(wo))));if("error"in u)throw new ae(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=je(t),s=e.map(p=>p.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),u=X(a,et(re(te(ti))));if("error"in u)throw new ae(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=je(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=X(a,be(Yp));if("error"in u)throw new ae(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=je(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",o),u=await this._rpcRequest("getProgramAccounts",a),p=re(Vp),y=o.withContext===!0?X(u,et(p)):X(u,be(p));if("error"in y)throw new ae(y.error,`failed to get accounts owned by program ${e.toBase58()}`);return y.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=X(o,be(re(Gp)));if("error"in a)throw new ae(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=Et.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return xe(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((u,p)=>{try{n=this.onSignature(t,(v,R)=>{n=void 0;const E={context:R,value:v};u({__type:Er.PROCESSED,response:E})},e);const y=new Promise(v=>{n==null?v():i=this._onSubscriptionStateChange(n,R=>{R==="subscribed"&&v()})});(async()=>{if(await y,s)return;const v=await this.getSignatureStatus(t);if(s||v==null)return;const{context:R,value:E}=v;if(E!=null)if(E!=null&&E.err)p(E.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(E.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(E.confirmationStatus==="processed"||E.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:Er.PROCESSED,response:{context:R,value:E}})}})()}catch(y){p(y)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(v=>{const R=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let E=await R();if(!s){for(;E<=n;)if(await Vr(1e3),s||(E=await R(),s))return;v({__type:Er.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),p=this.getCancellationPromise(t);let y;try{const v=await Promise.race([p,u,o]);if(v.__type===Er.PROCESSED)y=v.response;else throw new ra(i)}finally{s=!0,a()}return y}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const u=new Promise(E=>{let T=s,B=null;const x=async()=>{try{const{context:P,value:N}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return B=P.slot,N==null?void 0:N.nonce}catch{return T}};(async()=>{if(T=await x(),!a)for(;;){if(s!==T){E({__type:Er.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await Vr(2e3),a||(T=await x(),a))return}})()}),{abortConfirmation:p,confirmationPromise:y}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),v=this.getCancellationPromise(t);let R;try{const E=await Promise.race([v,y,u]);if(E.__type===Er.PROCESSED)R=E.response;else{let T;for(;;){const B=await this.getSignatureStatus(o);if(B==null)break;if(B.context.slot<(E.slotInWhichNonceDidAdvance??n)){await Vr(400);continue}T=B;break}if(T!=null&&T.value){const B=e||"finalized",{confirmationStatus:x}=T.value;switch(B){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new gn(o);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new gn(o);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new gn(o);break;default:(P=>{})(B)}R={context:T.context,value:{err:T.value.err}}}else throw new gn(o)}}finally{a=!0,p()}return R}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(u=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:Er.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const u=await Promise.race([o,i]);if(u.__type===Er.PROCESSED)a=u.response;else throw new na(t,u.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=X(e,be(re(a0)));if("error"in t)throw new ae(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=X(n,c0);if("error"in i)throw new ae(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=X(s,be(F()));if("error"in o)throw new ae(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=X(s,be(J()));if("error"in o)throw new ae(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=X(i,be(re(St)));if("error"in s)throw new ae(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);xe(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=X(i,f0);if("error"in s)throw new ae(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=X(s,be(F()));if("error"in o)throw new ae(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=X(n,Cp);if("error"in i)throw new ae(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=je(n),o=this._buildArgs([e.map(p=>p.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=X(a,Sp);if("error"in u)throw new ae(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=X(e,Op);if("error"in t)throw new ae(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=X(s,Up);if("error"in o)throw new ae(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=X(e,zp);if("error"in t)throw new ae(t.error,"failed to get epoch schedule");const n=t.result;return new el(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=X(e,Wp);if("error"in t)throw new ae(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=X(i,h0);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",t),i=X(n,k0);if("error"in i)throw new ae(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=X(t,I0);if("error"in n)throw new ae(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=X(i,x0);if("error"in s)throw new ae(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=ve(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=X(s,et(te(F())));if("error"in o)throw new ae(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=X(i,Np);if("error"in s)throw new ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=X(s,_0);if("error"in o)throw new ae(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=X(o,E0);if("error"in a)throw new ae(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=X(e,be(Rp));if("error"in t)throw new ae(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=X(e,be(J()));if("error"in t)throw new ae(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=X(o,m0);if("error"in a)throw a.error;return a.result}case"none":{const a=X(o,y0);if("error"in a)throw a.error;return a.result}default:{const a=X(o,g0);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:p,meta:y,version:v})=>({meta:y,transaction:{...p,message:Fs(v,p.message)},version:v}))}:null}}}catch(a){throw new ae(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=X(o,b0);if("error"in a)throw a.error;return a.result}case"none":{const a=X(o,v0);if("error"in a)throw a.error;return a.result}default:{const a=X(o,w0);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ae(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...u}=e;n=a,t=u}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=X(s,Tp);if("error"in o)throw new ae(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=X(o,$s);if("error"in a)throw new ae(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:Fs(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=je(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=X(o,gi);if("error"in a)throw new ae(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=je(t),s=e.map(u=>{const p=this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",i);return{methodName:"getTransaction",args:p}});return(await this._rpcBatchRequest(s)).map(u=>{const p=X(u,gi);if("error"in p)throw new ae(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:n,config:i}=je(t),s=e.map(u=>{const p=this._buildArgsAtLeastConfirmed([u],n,void 0,i);return{methodName:"getTransaction",args:p}});return(await this._rpcBatchRequest(s)).map(u=>{const p=X(u,$s);if("error"in p)throw new ae(p.error,"failed to get transactions");const y=p.result;return y&&{...y,transaction:{...y.transaction,message:Fs(y.version,y.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",n),s=X(i,S0);if("error"in s)throw new ae(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:p})=>{const y=new lr(u.message);return{meta:p,transaction:{...u,message:y}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:p})=>({meta:p,transaction:Ae.populate(u.message,u.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=X(s,be(re(F())));if("error"in o)throw new ae(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=X(i,ja);if("error"in s)throw new ae(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=X(i,ja);if("error"in s)throw new ae(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",n),s=X(i,$s);if("error"in s)throw new ae(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new lr(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Ae.populate(a,u)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=X(i,gi);if("error"in s)throw new ae(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>{const a=this._buildArgsAtLeastConfirmed([o],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:a}});return(await this._rpcBatchRequest(n)).map(o=>{const a=X(o,gi);if("error"in a)throw new ae(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=X(s,Zp);if("error"in o)throw new ae(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=X(s,Jp);if("error"in o)throw new ae(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new go({key:e,state:go.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=rs.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=X(n,B0);if("error"in i)throw new ae(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Vr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=rl;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Vr(Ju/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=je(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=X(s,et(F()));if("error"in o)throw new ae(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const B=e.serialize(),x=ue.Buffer.from(B).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const P=t||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment);const N=[x,P],L=await this._rpcRequest("simulateTransaction",N),U=X(L,Ha);if("error"in U)throw new Error("failed to simulate transaction: "+U.error.message);return U.result}let i;if(e instanceof Ae){let T=e;i=new Ae,i.feePayer=T.feePayer,i.instructions=e.instructions,i.nonceInfo=T.nonceInfo,i.signatures=T.signatures}else i=Ae.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let T=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(T);if(i.lastValidBlockHeight=B.lastValidBlockHeight,i.recentBlockhash=B.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const x=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else T=!0}}const o=i._compile(),a=o.serialize(),p=i._serialize(a).toString("base64"),y={encoding:"base64",commitment:this.commitment};if(n){const T=(Array.isArray(n)?n:o.nonProgramIds()).map(B=>B.toBase58());y.accounts={encoding:"base64",addresses:T}}s&&(y.sigVerify=!0);const v=[p,y],R=await this._rpcRequest("simulateTransaction",v),E=X(R,Ha);if("error"in E){let T;if("data"in E.error&&(T=E.error.data.logs,T&&Array.isArray(T))){const B=`
    `,x=B+T.join(B);console.error(E.error.message,x)}throw new po("failed to simulate transaction: "+E.error.message,T)}return E.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=ve(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),u=X(a,R0);if("error"in u){let p;throw"data"in u.error&&(p=u.error.data.logs),new po("failed to send transaction: "+u.error.message,p)}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${o} error for argument`,s,a.message),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=X(e,Xp);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=$a([e.method,t],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];xe(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=X(e,e0);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=X(e,M0);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=X(e,r0);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=X(e,i0);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=X(e,s0);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(u,p)=>{t(u,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=X(e,o0);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class vn{constructor(e){this._keypair=void 0,this._keypair=e??Ka()}static generate(){return new vn(Ka())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Oi(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new vn({publicKey:n,secretKey:e})}static fromSeed(e){const t=Oi(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new vn({publicKey:t,secretKey:n})}get publicKey(){return new Z(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const xr=Object.freeze({CreateLookupTable:{index:0,layout:se([ie("instruction"),Bn("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:se([ie("instruction")])},ExtendLookupTable:{index:2,layout:se([ie("instruction"),Bn(),Rt(_e(),Ur(ie(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:se([ie("instruction")])},CloseLookupTable:{index:4,layout:se([ie("instruction")])}});class C0{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ie("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(xr))if(o.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Pe(xr.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Pe(xr.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Z(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ca.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class ca{constructor(){}static createLookupTable(e){const[t,n]=Z.findProgramAddressSync([e.authority.toBuffer(),_u(BigInt(e.recentSlot),8)],this.programId),i=xr.CreateLookupTable,s=Ee(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Tt.programId,isSigner:!1,isWritable:!1}];return[new ze({programId:this.programId,keys:o,data:s}),t]}static freezeLookupTable(e){const t=xr.FreezeLookupTable,n=Ee(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ze({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=xr.ExtendLookupTable,n=Ee(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Tt.programId,isSigner:!1,isWritable:!1}),new ze({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=xr.DeactivateLookupTable,n=Ee(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ze({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=xr.CloseLookupTable,n=Ee(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new ze({programId:this.programId,keys:i,data:n})}}ca.programId=new Z("AddressLookupTab1e1111111111111111111111111");class O0{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ie("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(pr))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Pe(pr.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Pe(pr.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Pe(pr.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Pe(pr.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(ua.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const pr=Object.freeze({RequestUnits:{index:0,layout:se([Ie("instruction"),ie("units"),ie("additionalFee")])},RequestHeapFrame:{index:1,layout:se([Ie("instruction"),ie("bytes")])},SetComputeUnitLimit:{index:2,layout:se([Ie("instruction"),ie("units")])},SetComputeUnitPrice:{index:3,layout:se([Ie("instruction"),Bn("microLamports")])}});class ua{constructor(){}static requestUnits(e){const t=pr.RequestUnits,n=Ee(t,e);return new ze({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=pr.RequestHeapFrame,n=Ee(t,e);return new ze({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=pr.SetComputeUnitLimit,n=Ee(t,e);return new ze({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=pr.SetComputeUnitPrice,n=Ee(t,{microLamports:BigInt(e.microLamports)});return new ze({keys:[],programId:this.programId,data:n})}}ua.programId=new Z("ComputeBudget111111111111111111111111111111");const Ga=64,Ya=32,Za=64,Ja=se([Ie("numSignatures"),Ie("padding"),Xt("signatureOffset"),Xt("signatureInstructionIndex"),Xt("publicKeyOffset"),Xt("publicKeyInstructionIndex"),Xt("messageDataOffset"),Xt("messageDataSize"),Xt("messageInstructionIndex")]);class ss{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;xe(t.length===Ya,`Public Key must be ${Ya} bytes but received ${t.length} bytes`),xe(i.length===Za,`Signature must be ${Za} bytes but received ${i.length} bytes`);const o=Ja.span,a=o+t.length,u=a+i.length,p=1,y=ue.Buffer.alloc(u+n.length),v=s??65535;return Ja.encode({numSignatures:p,padding:0,signatureOffset:a,signatureInstructionIndex:v,publicKeyOffset:o,publicKeyInstructionIndex:v,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:v},y),y.fill(t,o),y.fill(i,a),y.fill(n,u),new ze({keys:[],programId:ss.programId,data:y})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;xe(t.length===Ga,`Private key must be ${Ga} bytes but received ${t.length} bytes`);try{const s=vn.fromSecretKey(t),o=s.publicKey.toBytes(),a=ea(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ss.programId=new Z("Ed25519SigVerify111111111111111111111111111");const N0=(r,e)=>{const t=Xi.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Xi.utils.isValidPrivateKey;const U0=Xi.getPublicKey,Xa=32,qs=20,Qa=64,z0=11,Hs=se([Ie("numSignatures"),Xt("signatureOffset"),Ie("signatureInstructionIndex"),Xt("ethAddressOffset"),Ie("ethAddressInstructionIndex"),Xt("messageDataOffset"),Xt("messageDataSize"),Ie("messageInstructionIndex"),He(20,"ethAddress"),He(64,"signature"),Ie("recoveryId")]);class Sn{constructor(){}static publicKeyToEthAddress(e){xe(e.length===Qa,`Public key must be ${Qa} bytes but received ${e.length} bytes`);try{return ue.Buffer.from(Na(ve(e))).slice(-qs)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:o}=e;return Sn.createInstructionWithEthAddress({ethAddress:Sn.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=ue.Buffer.from(t.substr(2),"hex"):a=ue.Buffer.from(t,"hex"):a=t,xe(a.length===qs,`Address must be ${qs} bytes but received ${a.length} bytes`);const u=1+z0,p=u,y=u+a.length,v=y+i.length+1,R=1,E=ue.Buffer.alloc(Hs.span+n.length);return Hs.encode({numSignatures:R,signatureOffset:y,signatureInstructionIndex:o,ethAddressOffset:p,ethAddressInstructionIndex:o,messageDataOffset:v,messageDataSize:n.length,messageInstructionIndex:o,signature:ve(i),ethAddress:ve(a),recoveryId:s},E),E.fill(ve(n),Hs.span),new ze({keys:[],programId:Sn.programId,data:E})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;xe(t.length===Xa,`Private key must be ${Xa} bytes but received ${t.length} bytes`);try{const s=ve(t),o=U0(s,!1).slice(1),a=ue.Buffer.from(Na(ve(n))),[u,p]=N0(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,recoveryId:p,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Sn.programId=new Z("KeccakSecp256k11111111111111111111111111111");var hl;const dl=new Z("StakeConfig11111111111111111111111111111111");class pl{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class li{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}hl=li;li.default=new hl(0,0,Z.default);class W0{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ie("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(_t))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Pe(_t.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new pl(new Z(t.staker),new Z(t.withdrawer)),lockup:new li(n.unixTimestamp,n.epoch,new Z(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Pe(_t.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Pe(_t.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Z(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=Pe(_t.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Z(s),newAuthorizedPubkey:new Z(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Pe(_t.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pe(_t.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Pe(_t.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pe(_t.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(os.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const _t=Object.freeze({Initialize:{index:0,layout:se([ie("instruction"),Dd(),Fd()])},Authorize:{index:1,layout:se([ie("instruction"),_e("newAuthorized"),ie("stakeAuthorizationType")])},Delegate:{index:2,layout:se([ie("instruction")])},Split:{index:3,layout:se([ie("instruction"),Ht("lamports")])},Withdraw:{index:4,layout:se([ie("instruction"),Ht("lamports")])},Deactivate:{index:5,layout:se([ie("instruction")])},Merge:{index:7,layout:se([ie("instruction")])},AuthorizeWithSeed:{index:8,layout:se([ie("instruction"),_e("newAuthorized"),ie("stakeAuthorizationType"),Zr("authoritySeed"),_e("authorityOwner")])}}),K0=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class os{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||li.default,o=_t.Initialize,a=Ee(o,{authorized:{staker:ve(n.staker.toBuffer()),withdrawer:ve(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:ve(s.custodian.toBuffer())}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:xn,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new ze(u)}static createAccountWithSeed(e){const t=new Ae;t.add(Tt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new Ae;t.add(Tt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=_t.Delegate,o=Ee(s);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:ki,isSigner:!1,isWritable:!1},{pubkey:dl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,a=_t.Authorize,u=Ee(a,{newAuthorized:ve(i.toBuffer()),stakeAuthorizationType:s.index}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!1,isWritable:!1}),new Ae().add({keys:p,programId:this.programId,data:u})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=e,p=_t.AuthorizeWithSeed,y=Ee(p,{newAuthorized:ve(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:ve(s.toBuffer())}),v=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:dr,isSigner:!1,isWritable:!1}];return u&&v.push({pubkey:u,isSigner:!1,isWritable:!1}),new Ae().add({keys:v,programId:this.programId,data:y})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,o=_t.Split,a=Ee(o,{lamports:s});return new ze({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e){const t=new Ae;return t.add(Tt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,u=new Ae;return u.add(Tt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),u.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=_t.Merge,o=Ee(s);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:ki,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:o}=e,a=_t.Withdraw,u=Ee(a,{lamports:s}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:ki,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!1,isWritable:!1}),new Ae().add({keys:p,programId:this.programId,data:u})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=_t.Deactivate,s=Ee(i);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}os.programId=new Z("Stake11111111111111111111111111111111111111");os.space=200;class gl{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class D0{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ie("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Br))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Pe(Br.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new gl(new Z(t.nodePubkey),new Z(t.authorizedVoter),new Z(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Pe(Br.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Z(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=Pe(Br.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Z(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Z(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Pe(Br.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Un.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Br=Object.freeze({InitializeAccount:{index:0,layout:se([ie("instruction"),$d()])},Authorize:{index:1,layout:se([ie("instruction"),_e("newAuthorized"),ie("voteAuthorizationType")])},Withdraw:{index:3,layout:se([ie("instruction"),Ht("lamports")])},AuthorizeWithSeed:{index:10,layout:se([ie("instruction"),qd()])}}),F0=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Un{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Br.InitializeAccount,o=Ee(s,{voteInit:{nodePubkey:ve(i.nodePubkey.toBuffer()),authorizedVoter:ve(i.authorizedVoter.toBuffer()),authorizedWithdrawer:ve(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:xn,isSigner:!1,isWritable:!1},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new ze(a)}static createAccount(e){const t=new Ae;return t.add(Tt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=Br.Authorize,a=Ee(o,{newAuthorized:ve(i.toBuffer()),voteAuthorizationType:s.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ae().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=e,u=Br.AuthorizeWithSeed,p=Ee(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ve(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:ve(s.toBuffer()),voteAuthorizationType:o.index}}),y=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Ae().add({keys:y,programId:this.programId,data:p})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,o=Br.Withdraw,a=Ee(o,{lamports:i}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ae().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return Un.withdraw(e)}}Un.programId=new Z("Vote111111111111111111111111111111111111111");Un.space=3731;const yl=new Z("Va1idator1nfo111111111111111111111111111111"),$0=G({name:J(),website:le(J()),details:le(J()),keybaseUsername:le(J())});class la{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Kt(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new Z(t.slice(0,Gt));t=t.slice(Gt);const a=t.slice(0,1)[0]===1;t=t.slice(1),i.push({publicKey:o,isSigner:a})}if(i[0].publicKey.equals(yl)&&i[1].isSigner){const s=Zr().decode(ue.Buffer.from(t)),o=JSON.parse(s);return Eu(o,$0),new la(i[1].publicKey,o)}return null}}const q0=new Z("Vote111111111111111111111111111111111111111"),H0=se([_e("nodePubkey"),_e("authorizedWithdrawer"),Ie("commission"),xt(),Rt(se([xt("slot"),ie("confirmationCount")]),Ur(ie(),-8),"votes"),Ie("rootSlotValid"),xt("rootSlot"),xt(),Rt(se([xt("epoch"),_e("authorizedVoter")]),Ur(ie(),-8),"authorizedVoters"),se([Rt(se([_e("authorizedPubkey"),xt("epochOfLastAuthorizedSwitch"),xt("targetEpoch")]),32,"buf"),xt("idx"),Ie("isEmpty")],"priorVoters"),xt(),Rt(se([xt("epoch"),xt("credits"),xt("prevCredits")]),Ur(ie(),-8),"epochCredits"),se([xt("slot"),xt("timestamp")],"lastTimestamp")]);class fa{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=H0.decode(ve(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new fa({nodePubkey:new Z(n.nodePubkey),authorizedWithdrawer:new Z(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(V0),priorVoters:j0(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function V0({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Z(r)}}function ec({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Z(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function j0({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(ec),...r.slice(0,e).map(ec)]}const tc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function G0(r,e){const t=e===!1?"http":"https";if(!r)return tc[t].devnet;const n=tc[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function Y0(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await r.sendRawTransaction(e,o),u=s&&s.commitment,y=(await(i?r.confirmTransaction(i,u):r.confirmTransaction(a,u))).value;if(y.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(y)})`);return a}const Z0=1e9;var rw=Object.freeze(Object.defineProperty({__proto__:null,Account:zd,AddressLookupTableAccount:go,AddressLookupTableInstruction:C0,AddressLookupTableProgram:ca,Authorized:pl,BLOCKHASH_CACHE_TIMEOUT_MS:rl,BPF_LOADER_DEPRECATED_PROGRAM_ID:Wd,BPF_LOADER_PROGRAM_ID:ip,BpfLoader:sp,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:pr,ComputeBudgetInstruction:O0,ComputeBudgetProgram:ua,Connection:L0,Ed25519Program:ss,Enum:Nd,EpochSchedule:el,FeeCalculatorLayout:Xu,Keypair:vn,LAMPORTS_PER_SOL:Z0,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:xr,Loader:nn,Lockup:li,MAX_SEED_LENGTH:Yu,Message:lr,MessageAccountKeys:ei,MessageV0:rn,NONCE_ACCOUNT_LENGTH:ho,NonceAccount:rs,PACKET_DATA_SIZE:Wr,PUBLIC_KEY_LENGTH:Gt,PublicKey:Z,SIGNATURE_LENGTH_IN_BYTES:tn,SOLANA_SCHEMA:Gn,STAKE_CONFIG_ID:dl,STAKE_INSTRUCTION_LAYOUTS:_t,SYSTEM_INSTRUCTION_LAYOUTS:Ke,SYSVAR_CLOCK_PUBKEY:dr,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Yd,SYSVAR_INSTRUCTIONS_PUBKEY:Zd,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Si,SYSVAR_RENT_PUBKEY:xn,SYSVAR_REWARDS_PUBKEY:Jd,SYSVAR_SLOT_HASHES_PUBKEY:Xd,SYSVAR_SLOT_HISTORY_PUBKEY:Qd,SYSVAR_STAKE_HISTORY_PUBKEY:ki,Secp256k1Program:Sn,SendTransactionError:po,SolanaJSONRPCError:ae,SolanaJSONRPCErrorCode:fp,StakeAuthorizationLayout:K0,StakeInstruction:W0,StakeProgram:os,Struct:ta,SystemInstruction:rp,SystemProgram:Tt,Transaction:Ae,TransactionExpiredBlockheightExceededError:ra,TransactionExpiredNonceInvalidError:gn,TransactionExpiredTimeoutError:na,TransactionInstruction:ze,TransactionMessage:ia,TransactionStatus:Er,VALIDATOR_INFO_KEY:yl,VERSION_PREFIX_MASK:Qi,VOTE_PROGRAM_ID:q0,ValidatorInfo:la,VersionedMessage:ts,VersionedTransaction:In,VoteAccount:fa,VoteAuthorizationLayout:F0,VoteInit:gl,VoteInstruction:D0,VoteProgram:Un,clusterApiUrl:G0,sendAndConfirmRawTransaction:Y0,sendAndConfirmTransaction:fo},Symbol.toStringTag,{value:"Module"})),rc;const zn=typeof window<"u",J0=r=>typeof r=="function",X0=r=>typeof r=="string",ml=()=>{},bo=zn&&((rc=window==null?void 0:window.navigator)==null?void 0:rc.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function sn(r){return typeof r=="function"?r():Ll(r)}function Q0(r,e){function t(...n){return new Promise((i,s)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(s)})}return t}const wl=r=>r();function eg(r=wl){const e=rt(!0);function t(){e.value=!1}function n(){e.value=!0}const i=(...s)=>{e.value&&r(...s)};return{isActive:Ec(e),pause:t,resume:n,eventFilter:i}}function tg(r){return r}function ha(r){return Ml()?(Pl(r),!0):!1}function rg(r){return typeof r=="function"?Ye(r):rt(r)}function ng(r,e=!0){Cl()?Ol(r):e?r():xo(r)}function ig(r,e,t={}){const{immediate:n=!0}=t,i=rt(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function a(){i.value=!1,o()}function u(...p){o(),i.value=!0,s=setTimeout(()=>{i.value=!1,s=null,r(...p)},sn(e))}return n&&(i.value=!0,zn&&u()),ha(a),{isPending:Ec(i),start:u,stop:a}}var nc=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,ag=(r,e)=>{var t={};for(var n in r)sg.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&nc)for(var n of nc(r))e.indexOf(n)<0&&og.call(r,n)&&(t[n]=r[n]);return t};function cg(r,e,t={}){const n=t,{eventFilter:i=wl}=n,s=ag(n,["eventFilter"]);return Xr(r,Q0(i,e),s)}var ug=Object.defineProperty,lg=Object.defineProperties,fg=Object.getOwnPropertyDescriptors,Ui=Object.getOwnPropertySymbols,bl=Object.prototype.hasOwnProperty,vl=Object.prototype.propertyIsEnumerable,ic=(r,e,t)=>e in r?ug(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hg=(r,e)=>{for(var t in e||(e={}))bl.call(e,t)&&ic(r,t,e[t]);if(Ui)for(var t of Ui(e))vl.call(e,t)&&ic(r,t,e[t]);return r},dg=(r,e)=>lg(r,fg(e)),pg=(r,e)=>{var t={};for(var n in r)bl.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&Ui)for(var n of Ui(r))e.indexOf(n)<0&&vl.call(r,n)&&(t[n]=r[n]);return t};function gg(r,e,t={}){const n=t,{eventFilter:i}=n,s=pg(n,["eventFilter"]),{eventFilter:o,pause:a,resume:u,isActive:p}=eg(i);return{stop:cg(r,e,dg(hg({},s),{eventFilter:o})),pause:a,resume:u,isActive:p}}function Hn(r){var e;const t=sn(r);return(e=t==null?void 0:t.$el)!=null?e:t}const Rn=zn?window:void 0;zn&&window.document;const yg=zn?window.navigator:void 0;zn&&window.location;function Kr(...r){let e,t,n,i;if(X0(r[0])||Array.isArray(r[0])?([t,n,i]=r,e=Rn):[e,t,n,i]=r,!e)return ml;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const s=[],o=()=>{s.forEach(y=>y()),s.length=0},a=(y,v,R,E)=>(y.addEventListener(v,R,E),()=>y.removeEventListener(v,R,E)),u=Xr(()=>[Hn(e),sn(i)],([y,v])=>{o(),y&&s.push(...t.flatMap(R=>n.map(E=>a(y,R,E,v))))},{immediate:!0,flush:"post"}),p=()=>{u(),o()};return ha(p),p}let sc=!1;function Sl(r,e,t={}){const{window:n=Rn,ignore:i=[],capture:s=!0,detectIframe:o=!1}=t;if(!n)return;bo&&!sc&&(sc=!0,Array.from(n.document.body.children).forEach(R=>R.addEventListener("click",ml)));let a=!0;const u=R=>i.some(E=>{if(typeof E=="string")return Array.from(n.document.querySelectorAll(E)).some(T=>T===R.target||R.composedPath().includes(T));{const T=Hn(E);return T&&(R.target===T||R.composedPath().includes(T))}}),y=[Kr(n,"click",R=>{const E=Hn(r);if(!(!E||E===R.target||R.composedPath().includes(E))){if(R.detail===0&&(a=!u(R)),!a){a=!0;return}e(R)}},{passive:!0,capture:s}),Kr(n,"pointerdown",R=>{const E=Hn(r);E&&(a=!R.composedPath().includes(E)&&!u(R))},{passive:!0}),o&&Kr(n,"blur",R=>{var E;const T=Hn(r);((E=n.document.activeElement)==null?void 0:E.tagName)==="IFRAME"&&!(T!=null&&T.contains(n.document.activeElement))&&e(R)})].filter(Boolean);return()=>y.forEach(R=>R())}const mg=r=>typeof r=="function"?r:typeof r=="string"?e=>e.key===r:Array.isArray(r)?e=>r.includes(e.key):()=>!0;function oc(...r){let e,t,n={};r.length===3?(e=r[0],t=r[1],n=r[2]):r.length===2?typeof r[1]=="object"?(e=!0,t=r[0],n=r[1]):(e=r[0],t=r[1]):(e=!0,t=r[0]);const{target:i=Rn,eventName:s="keydown",passive:o=!1}=n,a=mg(e);return Kr(i,s,p=>{a(p)&&t(p)},o)}function wg(r,e=!1){const t=rt(),n=()=>t.value=Boolean(r());return n(),ng(n,e),t}function bg(r={}){const{navigator:e=yg,read:t=!1,source:n,copiedDuring:i=1500,legacy:s=!1}=r,o=["copy","cut"],a=wg(()=>e&&"clipboard"in e),u=Ye(()=>a.value||s),p=rt(""),y=rt(!1),v=ig(()=>y.value=!1,i);function R(){a.value?e.clipboard.readText().then(x=>{p.value=x}):p.value=B()}if(u.value&&t)for(const x of o)Kr(x,R);async function E(x=sn(n)){u.value&&x!=null&&(a.value?await e.clipboard.writeText(x):T(x),p.value=x,y.value=!0,v.start())}function T(x){const P=document.createElement("textarea");P.value=x??"",P.style.position="absolute",P.style.opacity="0",document.body.appendChild(P),P.select(),document.execCommand("copy"),P.remove()}function B(){var x,P,N;return(N=(P=(x=document==null?void 0:document.getSelection)==null?void 0:x.call(document))==null?void 0:P.toString())!=null?N:""}return{isSupported:u,text:p,copied:y,copy:E}}const vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof nt.global<"u"?nt.global:typeof self<"u"?self:{},So="__vueuse_ssr_handlers__";vo[So]=vo[So]||{};const vg=vo[So];function Sg(r,e){return vg[r]||e}function kg(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}var _g=Object.defineProperty,ac=Object.getOwnPropertySymbols,Eg=Object.prototype.hasOwnProperty,Ag=Object.prototype.propertyIsEnumerable,cc=(r,e,t)=>e in r?_g(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,uc=(r,e)=>{for(var t in e||(e={}))Eg.call(e,t)&&cc(r,t,e[t]);if(ac)for(var t of ac(e))Ag.call(e,t)&&cc(r,t,e[t]);return r};const Ig={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},lc="vueuse-storage";function xg(r,e,t,n={}){var i;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:u=!0,mergeDefaults:p=!1,shallow:y,window:v=Rn,eventFilter:R,onError:E=K=>{console.error(K)}}=n,T=(y?ri:rt)(e);if(!t)try{t=Sg("getDefaultStorage",()=>{var K;return(K=Rn)==null?void 0:K.localStorage})()}catch(K){E(K)}if(!t)return T;const B=sn(e),x=kg(B),P=(i=n.serializer)!=null?i:Ig[x],{pause:N,resume:L}=gg(T,()=>U(T.value),{flush:s,deep:o,eventFilter:R});return v&&a&&(Kr(v,"storage",D),Kr(v,lc,C)),D(),T;function U(K){try{if(K==null)t.removeItem(r);else{const V=P.write(K),ee=t.getItem(r);ee!==V&&(t.setItem(r,V),v&&v.dispatchEvent(new CustomEvent(lc,{detail:{key:r,oldValue:ee,newValue:V,storageArea:t}})))}}catch(V){E(V)}}function z(K){const V=K?K.newValue:t.getItem(r);if(V==null)return u&&B!==null&&t.setItem(r,P.write(B)),B;if(!K&&p){const ee=P.read(V);return J0(p)?p(ee,B):x==="object"&&!Array.isArray(ee)?uc(uc({},B),ee):ee}else return typeof V!="string"?V:P.read(V)}function C(K){D(K.detail)}function D(K){if(!(K&&K.storageArea!==t)){if(K&&K.key==null){T.value=B;return}if(!(K&&K.key!==r)){N();try{T.value=z(K)}catch(V){E(V)}finally{K?xo(L):L()}}}}}function Bg(r,e,t={}){const{window:n=Rn}=t;return xg(r,e,n==null?void 0:n.localStorage,t)}var fc;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(fc||(fc={}));function kl(r){const e=window.getComputedStyle(r);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&r.clientHeight<r.scrollHeight||e.overflowY==="auto"&&r.clientWidth<r.scrollWidth)return!0;{const t=r.parentNode;return!t||t.tagName==="BODY"?!1:kl(t)}}function Rg(r){const e=r||window.event,t=e.target;return kl(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}function Tg(r,e=!1){const t=rt(e);let n=null,i;Xr(rg(r),a=>{if(a){const u=a;i=u.style.overflow,t.value&&(u.style.overflow="hidden")}},{immediate:!0});const s=()=>{const a=sn(r);!a||t.value||(bo&&(n=Kr(a,"touchmove",u=>{Rg(u)},{passive:!1})),a.style.overflow="hidden",t.value=!0)},o=()=>{const a=sn(r);!a||!t.value||(bo&&(n==null||n()),a.style.overflow=i,t.value=!1)};return ha(o),Ye({get(){return t.value},set(a){a?s():o()}})}var Mg=Object.defineProperty,hc=Object.getOwnPropertySymbols,Pg=Object.prototype.hasOwnProperty,Lg=Object.prototype.propertyIsEnumerable,dc=(r,e,t)=>e in r?Mg(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cg=(r,e)=>{for(var t in e||(e={}))Pg.call(e,t)&&dc(r,t,e[t]);if(hc)for(var t of hc(e))Lg.call(e,t)&&dc(r,t,e[t]);return r};const Og={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Cg({linear:tg},Og);var Ng=Object.defineProperty,Ug=(r,e,t)=>e in r?Ng(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_l=(r,e,t)=>(Ug(r,typeof e!="symbol"?e+"":e,t),t);class El extends Nt{constructor(){super(...arguments),_l(this,"name","WalletNotSelectedError")}}class zg extends Nt{constructor(){super(...arguments),_l(this,"name","WalletNotSelectedError")}}const Dr={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND"};class Fr extends Error{constructor(...e){const[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class Al extends Error{constructor(...e){const[t,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function jt(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(y){try{p(n.next(y))}catch(v){o(v)}}function u(y){try{p(n.throw(y))}catch(v){o(v)}}function p(y){y.done?s(y.value):i(y.value).then(a,u)}p((n=n.apply(r,e||[])).next())})}function Wg(r,e){return jt(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i})}const yn=4;function Kg(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(yn);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}function Dg(){return jt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Fg(){return jt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}const ko=12;function $g(r,e){return jt(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=Kg(r.id),i=new Uint8Array(ko);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(Il(n,i),e,new TextEncoder().encode(t)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function qg(r,e){return jt(this,void 0,void 0,function*(){const t=r.slice(0,yn),n=r.slice(yn,yn+ko),i=r.slice(yn+ko),s=yield crypto.subtle.decrypt(Il(t,n),e,i),o=Hg().decode(s),a=JSON.parse(o);if(Object.hasOwnProperty.call(a,"error"))throw new Al(a.id,a.error.code,a.error.message);return a})}function Il(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let Vs;function Hg(){return Vs===void 0&&(Vs=new TextDecoder("utf-8")),Vs}function Vg(r,e,t){return jt(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r,{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function jg(){return xl(49152+Math.floor(Math.random()*(65535-49152+1)))}function xl(r){if(r<49152||r>65535)throw new Fr(Dr.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Gg(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function Yg(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const Zg="solana-wallet";function pc(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Jg(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new Fr(Dr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${Zg}:/`));const n=r.startsWith("/")?r:[...pc(t.pathname),...pc(r)].join("/");return new URL(n,t)}function Xg(r,e,t){return jt(this,void 0,void 0,function*(){const n=xl(e),i=yield crypto.subtle.exportKey("raw",r),s=Gg(i),o=Jg("v1/associate/local",t);return o.searchParams.set("association",Yg(s)),o.searchParams.set("port",`${n}`),o})}const zi={Firefox:0,Other:1};function Qg(){return navigator.userAgent.indexOf("Firefox/")!==-1?zi.Firefox:zi.Other}function ey(){return new Promise((r,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const i=setTimeout(()=>{t(),e()},2e3)})}let Fn=null;function ty(r){Fn==null&&(Fn=document.createElement("iframe"),Fn.style.display="none",document.body.appendChild(Fn)),Fn.contentWindow.location.href=r.toString()}function ry(r,e){return jt(this,void 0,void 0,function*(){const t=jg(),n=yield Xg(r,t,e);if(n.protocol==="https:")window.location.assign(n);else try{const i=Qg();switch(i){case zi.Firefox:ty(n);break;case zi.Other:{const s=ey();window.location.assign(n),yield s;break}default:}}catch{throw new Fr(Dr.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}return t})}const gc={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},ny="com.solana.mobilewalletadapter.v1";function iy(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Fr(Dr.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function sy(r){let e;try{e=new URL(r)}catch{throw new Fr(Dr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Fr(Dr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function oy(r){return new DataView(r).getUint32(0,!1)}function ay(r,e){return jt(this,void 0,void 0,function*(){iy();const t=yield Dg(),n=yield ry(t.publicKey,e==null?void 0:e.baseUri),i=`ws://localhost:${n}/solana-wallet`;let s;const o=(()=>{const y=[...gc.retryDelayScheduleMs];return()=>y.length>1?y.shift():y[0]})();let a=1,u=0,p={__type:"disconnected"};return new Promise((y,v)=>{let R;const E={},T=()=>jt(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}const{associationKeypair:z}=p;R.removeEventListener("open",T);const C=yield Fg();R.send(yield Wg(C.publicKey,z.privateKey)),p={__type:"hello_req_sent",associationPublicKey:z.publicKey,ecdhPrivateKey:C.privateKey}}),B=z=>{z.wasClean?p={__type:"disconnected"}:v(new Fr(Dr.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${z.code}: ${z.reason}).`,{closeEvent:z})),N()},x=z=>jt(this,void 0,void 0,function*(){N(),Date.now()-s>=gc.timeoutMs?v(new Fr(Dr.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket on port ${n}.`)):(yield new Promise(C=>{const D=o();L=window.setTimeout(C,D)}),U())}),P=z=>jt(this,void 0,void 0,function*(){const C=yield z.data.arrayBuffer();switch(p.__type){case"connected":try{const D=C.slice(0,yn),K=oy(D);if(K!==u+1)throw new Error("Encrypted message has invalid sequence number");u=K;const V=yield qg(C,p.sharedSecret),ee=E[V.id];delete E[V.id],ee.resolve(V.result)}catch(D){if(D instanceof Al){const K=E[D.jsonRpcMessageId];delete E[D.jsonRpcMessageId],K.reject(D)}else throw D}break;case"hello_req_sent":{const D=yield Vg(C,p.associationPublicKey,p.ecdhPrivateKey);p={__type:"connected",sharedSecret:D};const K=new Proxy({},{get(V,ee){if(V[ee]==null){const Q=ee.toString().replace(/[A-Z]/g,he=>`_${he.toLowerCase()}`).toLowerCase();V[ee]=function(he){return jt(this,void 0,void 0,function*(){const M=a++;return R.send(yield $g({id:M,jsonrpc:"2.0",method:Q,params:he??{}},D)),new Promise((c,d)=>{E[M]={resolve(m){switch(ee){case"authorize":case"reauthorize":{const{wallet_uri_base:A}=m;if(A!=null)try{sy(A)}catch(k){d(k);return}break}}c(m)},reject:d}})})}}return V[ee]},defineProperty(){return!1},deleteProperty(){return!1}});try{y(yield r(K))}catch(V){v(V)}finally{N(),R.close()}break}}});let N,L;const U=()=>{N&&N(),p={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),R=new WebSocket(i,[ny]),R.addEventListener("open",T),R.addEventListener("close",B),R.addEventListener("error",x),R.addEventListener("message",P),N=()=>{window.clearTimeout(L),R.removeEventListener("open",T),R.removeEventListener("close",B),R.removeEventListener("error",x),R.removeEventListener("message",P)}};U()})})}function cy(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function y(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var T=0,B=0,x=0,P=E.length;x!==P&&E[x]===0;)x++,T++;for(var N=(P-x)*p+1>>>0,L=new Uint8Array(N);x!==P;){for(var U=E[x],z=0,C=N-1;(U!==0||z<B)&&C!==-1;C--,z++)U+=256*L[C]>>>0,L[C]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");B=z,x++}for(var D=N-B;D!==N&&L[D]===0;)D++;for(var K=a.repeat(T);D<N;++D)K+=r.charAt(L[D]);return K}function v(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;for(var T=0,B=0,x=0;E[T]===a;)B++,T++;for(var P=(E.length-T)*u+1>>>0,N=new Uint8Array(P);E[T];){var L=e[E.charCodeAt(T)];if(L===255)return;for(var U=0,z=P-1;(L!==0||U<x)&&z!==-1;z--,U++)L+=o*N[z]>>>0,N[z]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=U,T++}for(var C=P-x;C!==P&&N[C]===0;)C++;for(var D=new Uint8Array(B+(P-C)),K=B;C!==P;)D[K++]=N[C++];return D}function R(E){var T=v(E);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:v,decode:R}}var uy=cy;const ly=uy,fy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var hy=ly(fy);function js(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function yi(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(y){try{p(n.next(y))}catch(v){o(v)}}function u(y){try{p(n.throw(y))}catch(v){o(v)}}function p(y){y.done?s(y.value):i(y.value).then(a,u)}p((n=n.apply(r,e||[])).next())})}function Bl(r){return window.btoa(String.fromCharCode.call(null,...r))}function Gs(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function yc(r){const e="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return Bl(e)}function dy(r){const t=r[0]*tn+1;return ts.deserializeMessageVersion(r.slice(t,r.length))==="legacy"?Ae.from(r):In.deserialize(r)}function py(r,e){return yi(this,void 0,void 0,function*(){return yield ay(n=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:u,transactions:p}=a,y=js(a,["minContextSlot","transactions"]);return yi(this,void 0,void 0,function*(){const v=p.map(yc),{signatures:R}=yield n.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},y),u!=null?{options:{min_context_slot:u}}:null),{payloads:v}));return R.map(Gs).map(hy.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:u}=a,p=js(a,["payloads"]);return yi(this,void 0,void 0,function*(){const y=u.map(Bl),{signed_payloads:v}=yield n.signMessages(Object.assign(Object.assign({},p),{payloads:y}));return v.map(Gs)})};break;case"signTransactions":s[o]=function(a){var{transactions:u}=a,p=js(a,["transactions"]);return yi(this,void 0,void 0,function*(){const y=u.map(yc),{signed_payloads:v}=yield n.signTransactions(Object.assign(Object.assign({},p),{payloads:y}));return v.map(Gs).map(dy)})};break;default:{s[o]=n[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return r(i)},e)})}function Le(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(y){try{p(n.next(y))}catch(v){o(v)}}function u(y){try{p(n.throw(y))}catch(v){o(v)}}function p(y){y.done?s(y.value):i(y.value).then(a,u)}p((n=n.apply(r,e||[])).next())})}function gy(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function yy(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const Tn="Mobile Wallet Adapter",my=64;function wy(r){const e=gy(r);return new Z(e)}function mc(r){return"version"in r}class by extends ql{constructor(e){super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=Tn,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=yy()?tt.Loadable:tt.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._cluster=e.cluster,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==tt.Unsupported&&this._authorizationResultCache.get().then(t=>{t&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=wy(this._selectedAddress)}catch(e){throw new eo(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==tt.Installed&&this.emit("readyStateChange",this._readyState=tt.Installed)}runWithGuard(e){return Le(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Le(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Le(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){if(this._readyState!==tt.Installed&&this._readyState!==tt.Loadable)throw new Jn;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new Qs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return Le(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){if(this._readyState!==tt.Installed&&this._readyState!==tt.Loadable)throw new Jn;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();if(e){this.handleAuthorizationResult(e);return}yield this.transact(t=>Le(this,void 0,void 0,function*(){const n=yield t.authorize({cluster:this._cluster,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}))}catch(e){throw new Qs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}handleAuthorizationResult(e){var t;return Le(this,void 0,void 0,function*(){const n=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return Le(this,void 0,void 0,function*(){try{const n=yield e.reauthorize({auth_token:t});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new Bc(n instanceof Error&&(n==null?void 0:n.message)||"Unknown error",n)}})}disconnect(){return Le(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return Le(this,void 0,void 0,function*(){const n=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,i=n?{baseUri:n}:void 0,s=this._connectionGeneration;try{return yield py(e,i)}catch(o){throw this._connectionGeneration!==s&&(yield new Promise(()=>{})),o instanceof Error&&o.name==="SolanaMobileWalletAdapterError"&&o.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),o}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new mr;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return Le(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(n=>Le(this,void 0,void 0,function*(){return yield this.performReauthorization(n,t),yield n.signTransactions({transactions:e})}))}catch(n){throw new Cr(n==null?void 0:n.message,n)}})}sendTransaction(e,t,n){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=n==null?void 0:n.minContextSlot;try{return yield this.transact(o=>Le(this,void 0,void 0,function*(){function a(){let v;switch(t.commitment){case"confirmed":case"finalized":case"processed":v=t.commitment;break;default:v="finalized"}let R;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":R=n.preflightCommitment;break;case void 0:R=v;default:R="finalized"}return(R==="finalized"?2:R==="confirmed"?1:0)<(v==="finalized"?2:v==="confirmed"?1:0)?R:v}const[u,p,y]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),mc(e)?null:(()=>Le(this,void 0,void 0,function*(){var v;if(e.feePayer||(e.feePayer=(v=this.publicKey)!==null&&v!==void 0?v:void 0),e.recentBlockhash==null){const{blockhash:R}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=R}}))()]);if(u.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[v]=yield o.signTransactions({transactions:[e]});if(mc(v))return yield t.sendTransaction(v);{const R=v.serialize();return yield t.sendRawTransaction(R,Object.assign(Object.assign({},n),{preflightCommitment:a()}))}}}))}catch(o){throw new Gr(o==null?void 0:o.message,o)}}))})}signTransaction(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(i=>Le(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);const[s]=yield i.signMessages({addresses:[n],payloads:[e]});return s.slice(-my)}))}catch(i){throw new to(i==null?void 0:i.message,i)}}))})}}function vy(){return{select(r){return Le(this,void 0,void 0,function*(){return r[0]})}}}const Ys="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Sy(){let r;try{r=window.localStorage}catch{}return{clear(){return Le(this,void 0,void 0,function*(){if(!!r)try{r.removeItem(Ys)}catch{}})},get(){return Le(this,void 0,void 0,function*(){if(!!r)try{return JSON.parse(r.getItem(Ys))||void 0}catch{}})},set(e){return Le(this,void 0,void 0,function*(){if(!!r)try{r.setItem(Ys,JSON.stringify(e))}catch{}})}}}function ky(r){return Le(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(r.url)})}function _y(){return ky}function Ey(r,e,t,n,i,s){Xr(r,(o,a)=>{const u=o==null?void 0:o.adapter,p=a==null?void 0:a.adapter;!u||!p||u.name!==p.name&&p.name!==Tn&&p.disconnect()}),on(o=>{var a;const u=(a=r.value)==null?void 0:a.adapter;if(!u)return;const p=()=>{i()},y=()=>{e.value||t.value||n(!0)},v=R=>s(R,u);u.on("connect",p),u.on("disconnect",y),u.on("error",v),o(()=>{u.off("connect",p),u.off("disconnect",y),u.off("error",v)})})}function Ay(r,e,t,n,i,s,o){const a=rt(r),u=rt(!1);return Xr(e,()=>{u.value=!1}),on(()=>{u.value||!a.value||!e.value||!s.value||i.value||n.value||(async()=>{if(!!e.value){n.value=!0,u.value=!0;try{t.value?await e.value.adapter.autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED():await e.value.adapter.connect()}catch{o()}finally{n.value=!1}}})()}),a}function Iy(r){const e=xy(),t=By(),n=Ye(()=>Ry(r.value,e)),i=Ye(()=>n.value===1);return{userAgent:e,uriForAppIdentity:t,environment:n,isMobile:i}}let Zs;function xy(){var r,e;return Zs===void 0&&(Zs=(e=(r=globalThis.navigator)==null?void 0:r.userAgent)!=null?e:null),Zs}function By(){const r=globalThis.location;return r==null?null:`${r.protocol}//${r.host}`}function Ry(r,e){return r.some(i=>i.name!==Tn&&i.readyState===tt.Installed)?0:e&&Ty(e)&&!My(e)?1:0}function Ty(r){return/android/i.test(r)}function My(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Py(r,e){return(t,n)=>r.value?t:e?(e(t,n),t):(console.error(t,n),t instanceof Jn&&typeof window<"u"&&n&&window.open(n.url,"_blank"),t)}function Ly(r,e,t,n){const i=Ye(()=>{if(!e.value)return null;const s=r.value.find(o=>o.name===Tn);return s||new by({addressSelector:vy(),appIdentity:{uri:t||void 0},authorizationResultCache:Sy(),cluster:n.value,onWalletNotFound:_y()})});return Ye(()=>i.value==null||r.value.indexOf(i.value)!==-1?r.value:[i.value,...r.value])}function Cy(r){on(e=>{function t(n){const i=r.value,s=i.findIndex(({adapter:o})=>o===this);s!==-1&&(r.value=[...i.slice(0,s),{adapter:this,readyState:n},...i.slice(s+1)])}r.value.forEach(({adapter:n})=>n.on("readyStateChange",t,n)),e(()=>r.value.forEach(({adapter:n})=>n.off("readyStateChange",t,n)))})}function Oy(r,e){const t=Bg(r,e.value?Tn:null),n=Ye(()=>t.value===Tn),i=Ye(()=>n.value&&e.value);return{name:t,isUsingMwaAdapter:n,isUsingMwaAdapterOnMobile:i,select:a=>{t.value!==a&&(t.value=a)},deselect:(a=!0)=>{(a||n.value)&&(t.value=null)}}}function Js(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const wc="solana:mainnet",Ny="solana:devnet",Uy="solana:testnet",zy="solana:localnet",Wy="https://api.mainnet-beta.solana.com";function Ky(r){return r.includes(Wy)?wc:/\bdevnet\b/i.test(r)?Ny:/\btestnet\b/i.test(r)?Uy:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?zy:wc}function Dy(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}var _o={exports:{}},Rl={},as={};as.byteLength=qy;as.toByteArray=Vy;as.fromByteArray=Yy;var gr=[],Zt=[],Fy=typeof Uint8Array<"u"?Uint8Array:Array,Xs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hn=0,$y=Xs.length;hn<$y;++hn)gr[hn]=Xs[hn],Zt[Xs.charCodeAt(hn)]=hn;Zt["-".charCodeAt(0)]=62;Zt["_".charCodeAt(0)]=63;function Tl(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function qy(r){var e=Tl(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Hy(r,e,t){return(e+t)*3/4-t}function Vy(r){var e,t=Tl(r),n=t[0],i=t[1],s=new Fy(Hy(r,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Zt[r.charCodeAt(u)]<<18|Zt[r.charCodeAt(u+1)]<<12|Zt[r.charCodeAt(u+2)]<<6|Zt[r.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Zt[r.charCodeAt(u)]<<2|Zt[r.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Zt[r.charCodeAt(u)]<<10|Zt[r.charCodeAt(u+1)]<<4|Zt[r.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function jy(r){return gr[r>>18&63]+gr[r>>12&63]+gr[r>>6&63]+gr[r&63]}function Gy(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(jy(n));return i.join("")}function Yy(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(Gy(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(gr[e>>2]+gr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(gr[e>>10]+gr[e>>4&63]+gr[e<<2&63]+"=")),i.join("")}var da={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */da.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,p=u>>1,y=-7,v=t?i-1:0,R=t?-1:1,E=r[e+v];for(v+=R,s=E&(1<<-y)-1,E>>=-y,y+=a;y>0;s=s*256+r[e+v],v+=R,y-=8);for(o=s&(1<<-y)-1,s>>=-y,y+=n;y>0;o=o*256+r[e+v],v+=R,y-=8);if(s===0)s=1-p;else{if(s===u)return o?NaN:(E?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-p}return(E?-1:1)*o*Math.pow(2,s-n)};da.write=function(r,e,t,n,i,s){var o,a,u,p=s*8-i-1,y=(1<<p)-1,v=y>>1,R=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:s-1,T=n?1:-1,B=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=y):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+v>=1?e+=R/u:e+=R*Math.pow(2,1-v),e*u>=2&&(o++,u/=2),o+v>=y?(a=0,o=y):o+v>=1?(a=(e*u-1)*Math.pow(2,i),o=o+v):(a=e*Math.pow(2,v-1)*Math.pow(2,i),o=0));i>=8;r[t+E]=a&255,E+=T,a/=256,i-=8);for(o=o<<i|a,p+=i;p>0;r[t+E]=o&255,E+=T,o/=256,p-=8);r[t+E-T]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=as,t=da,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const w=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(w,f),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function o(w){if(w>i)throw new RangeError('The value "'+w+'" is invalid for option "size"');const f=new Uint8Array(w);return Object.setPrototypeOf(f,a.prototype),f}function a(w,f,h){if(typeof w=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(w)}return u(w,f,h)}a.poolSize=8192;function u(w,f,h){if(typeof w=="string")return R(w,f);if(ArrayBuffer.isView(w))return T(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(Mt(w,ArrayBuffer)||w&&Mt(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(w,SharedArrayBuffer)||w&&Mt(w.buffer,SharedArrayBuffer)))return B(w,f,h);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=w.valueOf&&w.valueOf();if(I!=null&&I!==w)return a.from(I,f,h);const O=x(w);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),f,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,f,h){return u(w,f,h)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function y(w,f,h){return p(w),w<=0?o(w):f!==void 0?typeof h=="string"?o(w).fill(f,h):o(w).fill(f):o(w)}a.alloc=function(w,f,h){return y(w,f,h)};function v(w){return p(w),o(w<0?0:P(w)|0)}a.allocUnsafe=function(w){return v(w)},a.allocUnsafeSlow=function(w){return v(w)};function R(w,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const h=L(w,f)|0;let I=o(h);const O=I.write(w,f);return O!==h&&(I=I.slice(0,O)),I}function E(w){const f=w.length<0?0:P(w.length)|0,h=o(f);for(let I=0;I<f;I+=1)h[I]=w[I]&255;return h}function T(w){if(Mt(w,Uint8Array)){const f=new Uint8Array(w);return B(f.buffer,f.byteOffset,f.byteLength)}return E(w)}function B(w,f,h){if(f<0||w.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<f+(h||0))throw new RangeError('"length" is outside of buffer bounds');let I;return f===void 0&&h===void 0?I=new Uint8Array(w):h===void 0?I=new Uint8Array(w,f):I=new Uint8Array(w,f,h),Object.setPrototypeOf(I,a.prototype),I}function x(w){if(a.isBuffer(w)){const f=P(w.length)|0,h=o(f);return h.length===0||w.copy(h,0,0,f),h}if(w.length!==void 0)return typeof w.length!="number"||Ue(w.length)?o(0):E(w);if(w.type==="Buffer"&&Array.isArray(w.data))return E(w.data)}function P(w){if(w>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return w|0}function N(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,h){if(Mt(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),Mt(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(f)||!a.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let I=f.length,O=h.length;for(let W=0,q=Math.min(I,O);W<q;++W)if(f[W]!==h[W]){I=f[W],O=h[W];break}return I<O?-1:O<I?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let I;if(h===void 0)for(h=0,I=0;I<f.length;++I)h+=f[I].length;const O=a.allocUnsafe(h);let W=0;for(I=0;I<f.length;++I){let q=f[I];if(Mt(q,Uint8Array))W+q.length>O.length?(a.isBuffer(q)||(q=a.from(q)),q.copy(O,W)):Uint8Array.prototype.set.call(O,q,W);else if(a.isBuffer(q))q.copy(O,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=q.length}return O};function L(w,f){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||Mt(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const h=w.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&h===0)return 0;let O=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Oe(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return De(w).length;default:if(O)return I?-1:Oe(w).length;f=(""+f).toLowerCase(),O=!0}}a.byteLength=L;function U(w,f,h){let I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,f>>>=0,h<=f))return"";for(w||(w="utf8");;)switch(w){case"hex":return b(this,f,h);case"utf8":case"utf-8":return c(this,f,h);case"ascii":return A(this,f,h);case"latin1":case"binary":return k(this,f,h);case"base64":return M(this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,f,h);default:if(I)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function z(w,f,h){const I=w[f];w[f]=w[h],w[h]=I}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)z(this,h,h+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)z(this,h,h+3),z(this,h+1,h+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)z(this,h,h+7),z(this,h+1,h+6),z(this,h+2,h+5),z(this,h+3,h+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?c(this,0,f):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const h=r.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(f,h,I,O,W){if(Mt(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),I===void 0&&(I=f?f.length:0),O===void 0&&(O=0),W===void 0&&(W=this.length),h<0||I>f.length||O<0||W>this.length)throw new RangeError("out of range index");if(O>=W&&h>=I)return 0;if(O>=W)return-1;if(h>=I)return 1;if(h>>>=0,I>>>=0,O>>>=0,W>>>=0,this===f)return 0;let q=W-O,ye=I-h;const ge=Math.min(q,ye),de=this.slice(O,W),$e=f.slice(h,I);for(let fe=0;fe<ge;++fe)if(de[fe]!==$e[fe]){q=de[fe],ye=$e[fe];break}return q<ye?-1:ye<q?1:0};function C(w,f,h,I,O){if(w.length===0)return-1;if(typeof h=="string"?(I=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ue(h)&&(h=O?0:w.length-1),h<0&&(h=w.length+h),h>=w.length){if(O)return-1;h=w.length-1}else if(h<0)if(O)h=0;else return-1;if(typeof f=="string"&&(f=a.from(f,I)),a.isBuffer(f))return f.length===0?-1:D(w,f,h,I,O);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(w,f,h):Uint8Array.prototype.lastIndexOf.call(w,f,h):D(w,[f],h,I,O);throw new TypeError("val must be string, number or Buffer")}function D(w,f,h,I,O){let W=1,q=w.length,ye=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(w.length<2||f.length<2)return-1;W=2,q/=2,ye/=2,h/=2}function ge($e,fe){return W===1?$e[fe]:$e.readUInt16BE(fe*W)}let de;if(O){let $e=-1;for(de=h;de<q;de++)if(ge(w,de)===ge(f,$e===-1?0:de-$e)){if($e===-1&&($e=de),de-$e+1===ye)return $e*W}else $e!==-1&&(de-=de-$e),$e=-1}else for(h+ye>q&&(h=q-ye),de=h;de>=0;de--){let $e=!0;for(let fe=0;fe<ye;fe++)if(ge(w,de+fe)!==ge(f,fe)){$e=!1;break}if($e)return de}return-1}a.prototype.includes=function(f,h,I){return this.indexOf(f,h,I)!==-1},a.prototype.indexOf=function(f,h,I){return C(this,f,h,I,!0)},a.prototype.lastIndexOf=function(f,h,I){return C(this,f,h,I,!1)};function K(w,f,h,I){h=Number(h)||0;const O=w.length-h;I?(I=Number(I),I>O&&(I=O)):I=O;const W=f.length;I>W/2&&(I=W/2);let q;for(q=0;q<I;++q){const ye=parseInt(f.substr(q*2,2),16);if(Ue(ye))return q;w[h+q]=ye}return q}function V(w,f,h,I){return Ne(Oe(f,w.length-h),w,h,I)}function ee(w,f,h,I){return Ne(Ve(f),w,h,I)}function Q(w,f,h,I){return Ne(De(f),w,h,I)}function he(w,f,h,I){return Ne(fn(f,w.length-h),w,h,I)}a.prototype.write=function(f,h,I,O){if(h===void 0)O="utf8",I=this.length,h=0;else if(I===void 0&&typeof h=="string")O=h,I=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(I)?(I=I>>>0,O===void 0&&(O="utf8")):(O=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-h;if((I===void 0||I>W)&&(I=W),f.length>0&&(I<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let q=!1;for(;;)switch(O){case"hex":return K(this,f,h,I);case"utf8":case"utf-8":return V(this,f,h,I);case"ascii":case"latin1":case"binary":return ee(this,f,h,I);case"base64":return Q(this,f,h,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,f,h,I);default:if(q)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(w,f,h){return f===0&&h===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(f,h))}function c(w,f,h){h=Math.min(w.length,h);const I=[];let O=f;for(;O<h;){const W=w[O];let q=null,ye=W>239?4:W>223?3:W>191?2:1;if(O+ye<=h){let ge,de,$e,fe;switch(ye){case 1:W<128&&(q=W);break;case 2:ge=w[O+1],(ge&192)===128&&(fe=(W&31)<<6|ge&63,fe>127&&(q=fe));break;case 3:ge=w[O+1],de=w[O+2],(ge&192)===128&&(de&192)===128&&(fe=(W&15)<<12|(ge&63)<<6|de&63,fe>2047&&(fe<55296||fe>57343)&&(q=fe));break;case 4:ge=w[O+1],de=w[O+2],$e=w[O+3],(ge&192)===128&&(de&192)===128&&($e&192)===128&&(fe=(W&15)<<18|(ge&63)<<12|(de&63)<<6|$e&63,fe>65535&&fe<1114112&&(q=fe))}}q===null?(q=65533,ye=1):q>65535&&(q-=65536,I.push(q>>>10&1023|55296),q=56320|q&1023),I.push(q),O+=ye}return m(I)}const d=4096;function m(w){const f=w.length;if(f<=d)return String.fromCharCode.apply(String,w);let h="",I=0;for(;I<f;)h+=String.fromCharCode.apply(String,w.slice(I,I+=d));return h}function A(w,f,h){let I="";h=Math.min(w.length,h);for(let O=f;O<h;++O)I+=String.fromCharCode(w[O]&127);return I}function k(w,f,h){let I="";h=Math.min(w.length,h);for(let O=f;O<h;++O)I+=String.fromCharCode(w[O]);return I}function b(w,f,h){const I=w.length;(!f||f<0)&&(f=0),(!h||h<0||h>I)&&(h=I);let O="";for(let W=f;W<h;++W)O+=We[w[W]];return O}function _(w,f,h){const I=w.slice(f,h);let O="";for(let W=0;W<I.length-1;W+=2)O+=String.fromCharCode(I[W]+I[W+1]*256);return O}a.prototype.slice=function(f,h){const I=this.length;f=~~f,h=h===void 0?I:~~h,f<0?(f+=I,f<0&&(f=0)):f>I&&(f=I),h<0?(h+=I,h<0&&(h=0)):h>I&&(h=I),h<f&&(h=f);const O=this.subarray(f,h);return Object.setPrototypeOf(O,a.prototype),O};function g(w,f,h){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+f>h)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,h,I){f=f>>>0,h=h>>>0,I||g(f,h,this.length);let O=this[f],W=1,q=0;for(;++q<h&&(W*=256);)O+=this[f+q]*W;return O},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,h,I){f=f>>>0,h=h>>>0,I||g(f,h,this.length);let O=this[f+--h],W=1;for(;h>0&&(W*=256);)O+=this[f+--h]*W;return O},a.prototype.readUint8=a.prototype.readUInt8=function(f,h){return f=f>>>0,h||g(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||g(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||g(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||g(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||g(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=Wt(function(f){f=f>>>0,Te(f,"offset");const h=this[f],I=this[f+7];(h===void 0||I===void 0)&&ke(f,this.length-8);const O=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,W=this[++f]+this[++f]*2**8+this[++f]*2**16+I*2**24;return BigInt(O)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=Wt(function(f){f=f>>>0,Te(f,"offset");const h=this[f],I=this[f+7];(h===void 0||I===void 0)&&ke(f,this.length-8);const O=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],W=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I;return(BigInt(O)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(f,h,I){f=f>>>0,h=h>>>0,I||g(f,h,this.length);let O=this[f],W=1,q=0;for(;++q<h&&(W*=256);)O+=this[f+q]*W;return W*=128,O>=W&&(O-=Math.pow(2,8*h)),O},a.prototype.readIntBE=function(f,h,I){f=f>>>0,h=h>>>0,I||g(f,h,this.length);let O=h,W=1,q=this[f+--O];for(;O>0&&(W*=256);)q+=this[f+--O]*W;return W*=128,q>=W&&(q-=Math.pow(2,8*h)),q},a.prototype.readInt8=function(f,h){return f=f>>>0,h||g(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,h){f=f>>>0,h||g(f,2,this.length);const I=this[f]|this[f+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(f,h){f=f>>>0,h||g(f,2,this.length);const I=this[f+1]|this[f]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(f,h){return f=f>>>0,h||g(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,h){return f=f>>>0,h||g(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=Wt(function(f){f=f>>>0,Te(f,"offset");const h=this[f],I=this[f+7];(h===void 0||I===void 0)&&ke(f,this.length-8);const O=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(I<<24);return(BigInt(O)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=Wt(function(f){f=f>>>0,Te(f,"offset");const h=this[f],I=this[f+7];(h===void 0||I===void 0)&&ke(f,this.length-8);const O=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(O)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I)}),a.prototype.readFloatLE=function(f,h){return f=f>>>0,h||g(f,4,this.length),t.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,h){return f=f>>>0,h||g(f,4,this.length),t.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||g(f,8,this.length),t.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||g(f,8,this.length),t.read(this,f,!1,52,8)};function l(w,f,h,I,O,W){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>O||f<W)throw new RangeError('"value" argument is out of bounds');if(h+I>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,h,I,O){if(f=+f,h=h>>>0,I=I>>>0,!O){const ye=Math.pow(2,8*I)-1;l(this,f,h,I,ye,0)}let W=1,q=0;for(this[h]=f&255;++q<I&&(W*=256);)this[h+q]=f/W&255;return h+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,h,I,O){if(f=+f,h=h>>>0,I=I>>>0,!O){const ye=Math.pow(2,8*I)-1;l(this,f,h,I,ye,0)}let W=I-1,q=1;for(this[h+W]=f&255;--W>=0&&(q*=256);)this[h+W]=f/q&255;return h+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,1,255,0),this[h]=f&255,h+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function S(w,f,h,I,O){Se(f,I,O,w,h,7);let W=Number(f&BigInt(4294967295));w[h++]=W,W=W>>8,w[h++]=W,W=W>>8,w[h++]=W,W=W>>8,w[h++]=W;let q=Number(f>>BigInt(32)&BigInt(4294967295));return w[h++]=q,q=q>>8,w[h++]=q,q=q>>8,w[h++]=q,q=q>>8,w[h++]=q,h}function H(w,f,h,I,O){Se(f,I,O,w,h,7);let W=Number(f&BigInt(4294967295));w[h+7]=W,W=W>>8,w[h+6]=W,W=W>>8,w[h+5]=W,W=W>>8,w[h+4]=W;let q=Number(f>>BigInt(32)&BigInt(4294967295));return w[h+3]=q,q=q>>8,w[h+2]=q,q=q>>8,w[h+1]=q,q=q>>8,w[h]=q,h+8}a.prototype.writeBigUInt64LE=Wt(function(f,h=0){return S(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Wt(function(f,h=0){return H(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,h,I,O){if(f=+f,h=h>>>0,!O){const ge=Math.pow(2,8*I-1);l(this,f,h,I,ge-1,-ge)}let W=0,q=1,ye=0;for(this[h]=f&255;++W<I&&(q*=256);)f<0&&ye===0&&this[h+W-1]!==0&&(ye=1),this[h+W]=(f/q>>0)-ye&255;return h+I},a.prototype.writeIntBE=function(f,h,I,O){if(f=+f,h=h>>>0,!O){const ge=Math.pow(2,8*I-1);l(this,f,h,I,ge-1,-ge)}let W=I-1,q=1,ye=0;for(this[h+W]=f&255;--W>=0&&(q*=256);)f<0&&ye===0&&this[h+W+1]!==0&&(ye=1),this[h+W]=(f/q>>0)-ye&255;return h+I},a.prototype.writeInt8=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},a.prototype.writeInt16LE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},a.prototype.writeInt16BE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},a.prototype.writeInt32LE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},a.prototype.writeInt32BE=function(f,h,I){return f=+f,h=h>>>0,I||l(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},a.prototype.writeBigInt64LE=Wt(function(f,h=0){return S(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Wt(function(f,h=0){return H(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function j(w,f,h,I,O,W){if(h+I>w.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Y(w,f,h,I,O){return f=+f,h=h>>>0,O||j(w,f,h,4),t.write(w,f,h,I,23,4),h+4}a.prototype.writeFloatLE=function(f,h,I){return Y(this,f,h,!0,I)},a.prototype.writeFloatBE=function(f,h,I){return Y(this,f,h,!1,I)};function ne(w,f,h,I,O){return f=+f,h=h>>>0,O||j(w,f,h,8),t.write(w,f,h,I,52,8),h+8}a.prototype.writeDoubleLE=function(f,h,I){return ne(this,f,h,!0,I)},a.prototype.writeDoubleBE=function(f,h,I){return ne(this,f,h,!1,I)},a.prototype.copy=function(f,h,I,O){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(I||(I=0),!O&&O!==0&&(O=this.length),h>=f.length&&(h=f.length),h||(h=0),O>0&&O<I&&(O=I),O===I||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),f.length-h<O-I&&(O=f.length-h+I);const W=O-I;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,I,O):Uint8Array.prototype.set.call(f,this.subarray(I,O),h),W},a.prototype.fill=function(f,h,I,O){if(typeof f=="string"){if(typeof h=="string"?(O=h,h=0,I=this.length):typeof I=="string"&&(O=I,I=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!a.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(f.length===1){const q=f.charCodeAt(0);(O==="utf8"&&q<128||O==="latin1")&&(f=q)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<I)throw new RangeError("Out of range index");if(I<=h)return this;h=h>>>0,I=I===void 0?this.length:I>>>0,f||(f=0);let W;if(typeof f=="number")for(W=h;W<I;++W)this[W]=f;else{const q=a.isBuffer(f)?f:a.from(f,O),ye=q.length;if(ye===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(W=0;W<I-h;++W)this[W+h]=q[W%ye]}return this};const oe={};function ce(w,f,h){oe[w]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(w,f){return`The "${w}" argument must be of type number. Received type ${typeof f}`},TypeError),ce("ERR_OUT_OF_RANGE",function(w,f,h){let I=`The value of "${w}" is out of range.`,O=h;return Number.isInteger(h)&&Math.abs(h)>2**32?O=Re(String(h)):typeof h=="bigint"&&(O=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(O=Re(O)),O+="n"),I+=` It must be ${f}. Received ${O}`,I},RangeError);function Re(w){let f="",h=w.length;const I=w[0]==="-"?1:0;for(;h>=I+4;h-=3)f=`_${w.slice(h-3,h)}${f}`;return`${w.slice(0,h)}${f}`}function me(w,f,h){Te(f,"offset"),(w[f]===void 0||w[f+h]===void 0)&&ke(f,w.length-(h+1))}function Se(w,f,h,I,O,W){if(w>h||w<f){const q=typeof f=="bigint"?"n":"";let ye;throw W>3?f===0||f===BigInt(0)?ye=`>= 0${q} and < 2${q} ** ${(W+1)*8}${q}`:ye=`>= -(2${q} ** ${(W+1)*8-1}${q}) and < 2 ** ${(W+1)*8-1}${q}`:ye=`>= ${f}${q} and <= ${h}${q}`,new oe.ERR_OUT_OF_RANGE("value",ye,w)}me(I,O,W)}function Te(w,f){if(typeof w!="number")throw new oe.ERR_INVALID_ARG_TYPE(f,"number",w)}function ke(w,f,h){throw Math.floor(w)!==w?(Te(w,h),new oe.ERR_OUT_OF_RANGE(h||"offset","an integer",w)):f<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${f}`,w)}const Me=/[^+/0-9A-Za-z-_]/g;function fr(w){if(w=w.split("=")[0],w=w.trim().replace(Me,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function Oe(w,f){f=f||1/0;let h;const I=w.length;let O=null;const W=[];for(let q=0;q<I;++q){if(h=w.charCodeAt(q),h>55295&&h<57344){if(!O){if(h>56319){(f-=3)>-1&&W.push(239,191,189);continue}else if(q+1===I){(f-=3)>-1&&W.push(239,191,189);continue}O=h;continue}if(h<56320){(f-=3)>-1&&W.push(239,191,189),O=h;continue}h=(O-55296<<10|h-56320)+65536}else O&&(f-=3)>-1&&W.push(239,191,189);if(O=null,h<128){if((f-=1)<0)break;W.push(h)}else if(h<2048){if((f-=2)<0)break;W.push(h>>6|192,h&63|128)}else if(h<65536){if((f-=3)<0)break;W.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((f-=4)<0)break;W.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return W}function Ve(w){const f=[];for(let h=0;h<w.length;++h)f.push(w.charCodeAt(h)&255);return f}function fn(w,f){let h,I,O;const W=[];for(let q=0;q<w.length&&!((f-=2)<0);++q)h=w.charCodeAt(q),I=h>>8,O=h%256,W.push(O),W.push(I);return W}function De(w){return e.toByteArray(fr(w))}function Ne(w,f,h,I){let O;for(O=0;O<I&&!(O+h>=f.length||O>=w.length);++O)f[O+h]=w[O];return O}function Mt(w,f){return w instanceof f||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===f.name}function Ue(w){return w!==w}const We=function(){const w="0123456789abcdef",f=new Array(256);for(let h=0;h<16;++h){const I=h*16;for(let O=0;O<16;++O)f[I+O]=w[h]+w[O]}return f}();function Wt(w){return typeof BigInt>"u"?Fe:w}function Fe(){throw new Error("BigInt not supported")}})(Rl);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=Rl,n=t.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,a,u){return n(o,a,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof u=="string"?p.fill(a,u):p.fill(a):p.fill(0),p},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(_o,_o.exports);var mi=_o.exports.Buffer;function Zy(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function y(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=mi.from(E)),!mi.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,B=0,x=0,P=E.length;x!==P&&E[x]===0;)x++,T++;for(var N=(P-x)*p+1>>>0,L=new Uint8Array(N);x!==P;){for(var U=E[x],z=0,C=N-1;(U!==0||z<B)&&C!==-1;C--,z++)U+=256*L[C]>>>0,L[C]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");B=z,x++}for(var D=N-B;D!==N&&L[D]===0;)D++;for(var K=a.repeat(T);D<N;++D)K+=r.charAt(L[D]);return K}function v(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return mi.alloc(0);for(var T=0,B=0,x=0;E[T]===a;)B++,T++;for(var P=(E.length-T)*u+1>>>0,N=new Uint8Array(P);E[T];){var L=e[E.charCodeAt(T)];if(L===255)return;for(var U=0,z=P-1;(L!==0||U<x)&&z!==-1;z--,U++)L+=o*N[z]>>>0,N[z]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=U,T++}for(var C=P-x;C!==P&&N[C]===0;)C++;var D=mi.allocUnsafe(B+(P-C));D.fill(0,0,B);for(var K=B;C!==P;)D[K++]=N[C++];return D}function R(E){var T=v(E);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:v,decode:R}}var Jy=Zy,Xy=Jy,Qy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",em=Xy(Qy);function Vn(r){return"version"in r}var tr=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},pe=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},or,yr,mn,pn,Yn,qe,_i,Ei,Wi,Ai,Eo,bc,vc,Sc;function tm(r){return"standard:connect"in r.features&&"standard:events"in r.features&&("solana:signAndSendTransaction"in r.features||"solana:signTransaction"in r.features)}class rm extends Rc{constructor({wallet:e}){super(),or.add(this),yr.set(this,void 0),mn.set(this,void 0),pn.set(this,void 0),Yn.set(this,void 0),qe.set(this,void 0),_i.set(this,void 0),Ei.set(this,typeof window>"u"||typeof document>"u"?tt.Unsupported:tt.Installed),Eo.set(this,n=>{if(!pe(this,yr,"f")||!pe(this,mn,"f")||!("accounts"in n))return;const i=pe(this,qe,"f").accounts[0];if(!i){pe(this,or,"m",Ai).call(this),this.emit("error",new Bc),this.emit("disconnect");return}if(i===pe(this,yr,"f"))return;let s;try{s=new Z(i.publicKey)}catch(o){pe(this,or,"m",Ai).call(this),this.emit("error",new eo(o==null?void 0:o.message)),this.emit("disconnect");return}pe(this,or,"m",Wi).call(this,i,s),this.emit("connect",s)}),tr(this,qe,e,"f");const t="solana:signAndSendTransaction"in e.features?e.features["solana:signAndSendTransaction"].supportedTransactionVersions:e.features["solana:signTransaction"].supportedTransactionVersions;tr(this,_i,Dy(t,["legacy"])?null:new Set(t),"f"),tr(this,yr,null,"f"),tr(this,mn,null,"f"),tr(this,pn,!1,"f")}get supportedTransactionVersions(){return pe(this,_i,"f")}get name(){return pe(this,qe,"f").name}get icon(){return pe(this,qe,"f").icon}get url(){return"https://github.com/wallet-standard"}get publicKey(){return pe(this,mn,"f")}get connecting(){return pe(this,pn,"f")}get readyState(){return pe(this,Ei,"f")}get wallet(){return pe(this,qe,"f")}get standard(){return!0}async connect(){try{if(this.connected||this.connecting)return;if(pe(this,Ei,"f")!==tt.Installed)throw new Jn;if(tr(this,pn,!0,"f"),!pe(this,qe,"f").accounts.length)try{await pe(this,qe,"f").features["standard:connect"].connect()}catch(n){throw new Qs(n==null?void 0:n.message,n)}if(!pe(this,qe,"f").accounts.length)throw new bi;const e=pe(this,qe,"f").accounts[0];let t;try{t=new Z(e.publicKey)}catch(n){throw new eo(n==null?void 0:n.message,n)}tr(this,Yn,pe(this,qe,"f").features["standard:events"].on("change",pe(this,Eo,"f")),"f"),pe(this,or,"m",Wi).call(this,e,t),this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{tr(this,pn,!1,"f")}}async disconnect(){if("standard:disconnect"in pe(this,qe,"f").features)try{await pe(this,qe,"f").features["standard:disconnect"].disconnect()}catch(e){this.emit("error",new Fl(e==null?void 0:e.message,e))}pe(this,or,"m",Ai).call(this),this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const i=pe(this,yr,"f");if(!i)throw new mr;let s;if("solana:signAndSendTransaction"in pe(this,qe,"f").features)if(i.features.includes("solana:signAndSendTransaction"))s="solana:signAndSendTransaction";else if("solana:signTransaction"in pe(this,qe,"f").features&&i.features.includes("solana:signTransaction"))s="solana:signTransaction";else throw new bi;else if("solana:signTransaction"in pe(this,qe,"f").features){if(!i.features.includes("solana:signTransaction"))throw new bi;s="solana:signTransaction"}else throw new wi;const o=Ky(t.rpcEndpoint);if(!i.chains.includes(o))throw new Gr;try{const{signers:a,...u}=n;let p;if(Vn(e)?(a!=null&&a.length&&e.sign(a),p=e.serialize()):(e=await this.prepareTransaction(e,t,u),a!=null&&a.length&&e.partialSign(...a),p=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s==="solana:signAndSendTransaction"){const[y]=await pe(this,qe,"f").features["solana:signAndSendTransaction"].signAndSendTransaction({account:i,chain:o,transaction:p,options:{preflightCommitment:Js(u.preflightCommitment||t.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return em.encode(y.signature)}else{const[y]=await pe(this,qe,"f").features["solana:signTransaction"].signTransaction({account:i,chain:o,transaction:p,options:{preflightCommitment:Js(u.preflightCommitment||t.commitment),minContextSlot:u.minContextSlot}});return await t.sendRawTransaction(y.signedTransaction,{...u,preflightCommitment:Js(u.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof Nt?a:new Gr(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}yr=new WeakMap,mn=new WeakMap,pn=new WeakMap,Yn=new WeakMap,qe=new WeakMap,_i=new WeakMap,Ei=new WeakMap,Eo=new WeakMap,or=new WeakSet,Wi=function(e,t){tr(this,yr,e,"f"),tr(this,mn,t,"f"),e!=null&&e.features.includes("solana:signTransaction")?(this.signTransaction=pe(this,or,"m",bc),this.signAllTransactions=pe(this,or,"m",vc)):(delete this.signTransaction,delete this.signAllTransactions),e!=null&&e.features.includes("solana:signMessage")?this.signMessage=pe(this,or,"m",Sc):delete this.signMessage},Ai=function(){const e=pe(this,Yn,"f");e&&(tr(this,Yn,void 0,"f"),e()),pe(this,or,"m",Wi).call(this,null,null)},bc=async function(e){try{const t=pe(this,yr,"f");if(!t)throw new mr;if(!("solana:signTransaction"in pe(this,qe,"f").features))throw new wi;if(!t.features.includes("solana:signTransaction"))throw new bi;try{const i=(await pe(this,qe,"f").features["solana:signTransaction"].signTransaction({account:t,transaction:Vn(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Vn(e)?In.deserialize(i):Ae.from(i)}catch(n){throw n instanceof Nt?n:new Cr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},vc=async function(e){try{const t=pe(this,yr,"f");if(!t)throw new mr;if(!("solana:signTransaction"in pe(this,qe,"f").features))throw new wi;if(!t.features.includes("solana:signTransaction"))throw new Cr;try{const n=await pe(this,qe,"f").features["solana:signTransaction"].signTransaction(...e.map(i=>({account:t,transaction:Vn(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return Vn(i)?In.deserialize(o):Ae.from(o)})}catch(n){throw new Cr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Sc=async function(e){try{const t=pe(this,yr,"f");if(!t)throw new mr;if(!("solana:signMessage"in pe(this,qe,"f").features))throw new wi;if(!t.features.includes("solana:signMessage"))throw new to;try{return(await pe(this,qe,"f").features["solana:signMessage"].signMessage({account:t,message:e}))[0].signature}catch(n){throw new to(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}};var nm=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},im=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ii;let qt;const xi=new Set,wn={};function sm(){if(qt||(qt=Object.freeze({register:kc,get:om,on:am}),typeof window>"u"))return qt;const r=Object.freeze({register:kc});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new cm(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return qt}function kc(...r){var e;return r=r.filter(t=>!xi.has(t)),r.length?(r.forEach(t=>xi.add(t)),(e=wn.register)==null||e.forEach(t=>Ao(()=>t(...r))),function(){var n;r.forEach(i=>xi.delete(i)),(n=wn.unregister)==null||n.forEach(i=>Ao(()=>i(...r)))}):()=>{}}function om(){return[...xi]}function am(r,e){var t;return(t=wn[r])!=null&&t.push(e)||(wn[r]=[e]),function(){var i;wn[r]=(i=wn[r])==null?void 0:i.filter(s=>e!==s)}}function Ao(r){try{r()}catch(e){console.error(e)}}class cm extends Event{constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Ii.set(this,void 0),nm(this,Ii,e,"f")}get detail(){return im(this,Ii,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Ii=new WeakMap;function um(){if(qt||(qt=sm(),typeof window>"u"))return qt;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),qt;const{register:e}=qt,t=(...n)=>n.forEach(i=>Ao(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),qt}return t(...r),qt}function lm(r){const e=new Set,{get:t,on:n}=um(),i=ri(_c(t()));return on(s=>{const o=[n("register",(...a)=>i.value=[...i.value,..._c(a)]),n("unregister",(...a)=>i.value=i.value.filter(u=>a.some(p=>p===u.wallet)))];s(()=>o.forEach(a=>a()))}),Ye(()=>[...i.value,...r.value.filter(({name:s})=>i.value.some(o=>o.name===s)?(e.has(s)||(e.add(s),console.warn(`${s} was registered as a Standard Wallet. The Wallet Adapter for ${s} can be removed from your app.`)),!1):!0)])}function _c(r){return r.filter(tm).map(e=>new rm({wallet:e}))}function fm(r,e){const t=async(o,a,u)=>{var p;const y=(p=r.value)==null?void 0:p.adapter;if(!y)throw e(new El);if(!y.connected)throw e(new mr,y);return await y.sendTransaction(o,a,u)},n=Ye(()=>{var o;const a=(o=r.value)==null?void 0:o.adapter;if(!!(a&&"signTransaction"in a))return async u=>{if(!a.connected)throw e(new mr);return await a.signTransaction(u)}}),i=Ye(()=>{var o;const a=(o=r.value)==null?void 0:o.adapter;if(!!(a&&"signAllTransactions"in a))return async u=>{if(!a.connected)throw e(new mr);return await a.signAllTransactions(u)}}),s=Ye(()=>{var o;const a=(o=r.value)==null?void 0:o.adapter;if(!!(a&&"signMessage"in a))return async u=>{if(!a.connected)throw e(new mr);return await a.signMessage(u)}});return{sendTransaction:t,signTransaction:n,signAllTransactions:i,signMessage:s}}function hm(r){const e=rt(!1);return typeof window>"u"||on(t=>{if(r.value)return;const n=()=>e.value=!0;window.addEventListener("beforeunload",n),t(()=>window.removeEventListener("beforeunload",n))}),e}function dm(r,e){const t=ri(null),n=rt(null),i=rt(!1),s=rt(tt.Unsupported),o=Ye(()=>s.value===tt.Installed||s.value===tt.Loadable),a=()=>{var u,p,y,v,R,E;n.value=(p=(u=t.value)==null?void 0:u.adapter.publicKey)!=null?p:null,i.value=(v=(y=t.value)==null?void 0:y.adapter.connected)!=null?v:!1,s.value=(E=(R=t.value)==null?void 0:R.readyState)!=null?E:tt.Unsupported};return on(()=>{var u;t.value=e.value&&(u=r.value.find(({adapter:p})=>p.name===e.value))!=null?u:null,a()}),{wallet:t,publicKey:n,connected:i,readyState:s,ready:o,refreshWalletState:a}}function pm(r){const e=ri([]);return on(()=>{e.value=r.value.map(t=>({adapter:t,readyState:t.readyState}))}),e}const gm=({wallets:r=[],autoConnect:e=!1,cluster:t="mainnet-beta",onError:n,localStorageKey:i="walletName"})=>{const s=rt(t),o=rt(!1),a=rt(!1),u=ri(r),p=lm(u),{isMobile:y,uriForAppIdentity:v}=Iy(p),R=Ly(p,y,v,s),E=pm(R),{name:T,isUsingMwaAdapterOnMobile:B,select:x,deselect:P}=Oy(i,y),{wallet:N,publicKey:L,connected:U,readyState:z,ready:C,refreshWalletState:D}=dm(E,T),K=hm(B),V=Py(K,n);Cy(E),Ey(N,K,B,P,D,V);const ee=Ay(e,N,B,o,U,C,P),{sendTransaction:Q,signTransaction:he,signAllTransactions:M,signMessage:c}=fm(N,V);return{wallets:E,autoConnect:ee,cluster:s,wallet:N,publicKey:L,readyState:z,ready:C,connected:U,connecting:o,disconnecting:a,select:x,connect:async()=>{if(U.value||o.value||a.value)return;if(!N.value)throw V(new El);const A=N.value.adapter;if(!C.value)throw V(new Jn,A);try{o.value=!0,await A.connect()}catch(k){throw P(),k}finally{o.value=!1}},disconnect:async()=>{if(!(a.value||!N.value))try{a.value=!0,await N.value.adapter.disconnect()}finally{a.value=!1}},sendTransaction:Q,signTransaction:he,signAllTransactions:M,signMessage:c}};let Io=null;const Wn=()=>{if(Io)return Io;throw new zg("Wallet not initialized. Please use the `initWallet` method to initialize the wallet.")},ym=r=>{Io=gm(r)},mm=ni({props:{wallet:Object},setup(r){return ii(r)}}),cs=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},wm={class:"swv-button-icon"},bm=["src","alt"];function vm(r,e,t,n,i,s){return Ut(),rr("i",wm,[r.wallet?(Ut(),rr("img",{key:0,src:r.wallet.adapter.icon,alt:`${r.wallet.adapter.name} icon`},null,8,bm)):jr("",!0)])}const us=cs(mm,[["render",vm]]),Sm=ni({components:{WalletIcon:us},props:{disabled:Boolean},setup(r,{emit:e}){const{disabled:t}=ii(r),{wallet:n,connect:i,connecting:s,connected:o}=Wn(),a=Ye(()=>s.value?"Connecting ...":o.value?"Connected":n.value?"Connect":"Connect Wallet"),p={wallet:n,disabled:t,connecting:s,connected:o,content:a,onClick:y=>{e("click",y),!y.defaultPrevented&&i().catch(()=>{})}};return{scope:p,...p}}}),km=["disabled"],_m=["textContent"];function Em(r,e,t,n,i,s){const o=jn("wallet-icon");return nr(r.$slots,"default",ir(sr(r.scope)),()=>[Ze("button",{class:"swv-button swv-button-trigger",disabled:r.disabled||!r.wallet||r.connecting||r.connected,onClick:e[0]||(e[0]=(...a)=>r.onClick&&r.onClick(...a))},[r.wallet?(Ut(),Bi(o,{key:0,wallet:r.wallet},null,8,["wallet"])):jr("",!0),Ze("p",{textContent:Zn(r.content)},null,8,_m)],8,km)])}const Am=cs(Sm,[["render",Em]]);ni({components:{WalletIcon:us},props:{disabled:Boolean},setup(r,{emit:e}){const{disabled:t}=ii(r),{wallet:n,disconnect:i,disconnecting:s}=Wn(),o=Ye(()=>s.value?"Disconnecting ...":n.value?"Disconnect":"Disconnect Wallet"),u={wallet:n,disconnecting:s,disabled:t,content:o,handleClick:p=>{e("click",p),!p.defaultPrevented&&i().catch(()=>{})}};return{scope:u,...u}}});const Im=ni({components:{WalletIcon:us},props:{featured:{type:Number,default:3},container:{type:String,default:"body"},logo:String,dark:Boolean},setup(r,{slots:e}){const{featured:t,container:n,logo:i,dark:s}=ii(r),o=rt(null),a=rt(!1),u=()=>a.value=!0,p=()=>a.value=!1,y=Ye(()=>!!e.logo||!!i.value),{wallets:v,select:R}=Wn(),E=Ye(()=>{const U=[],z=[],C=[];return v.value.forEach(D=>{D.readyState===tt.NotDetected?z.push(D):D.readyState===tt.Loadable?C.push(D):D.readyState===tt.Installed&&U.push(D)}),[...U,...C,...z]}),T=rt(!1),B=Ye(()=>E.value.slice(0,t.value)),x=Ye(()=>E.value.slice(t.value)),P=Ye(()=>T.value?v.value:B.value);Sl(o,p),oc("Escape",p),oc("Tab",U=>{var z,C;const D=(C=(z=o.value)==null?void 0:z.querySelectorAll("button"))!=null?C:[],K=D==null?void 0:D[0],V=D==null?void 0:D[D.length-1];U.shiftKey&&document.activeElement===K&&V?(V.focus(),U.preventDefault()):!U.shiftKey&&document.activeElement===V&&K&&(K.focus(),U.preventDefault())}),Xr(a,U=>{!U||xo(()=>{var z,C,D;return(D=(C=(z=o.value)==null?void 0:z.querySelectorAll("button"))==null?void 0:C[0])==null?void 0:D.focus()})});const N=Tg(document.body);Xr(a,U=>N.value=U);const L={dark:s,logo:i,hasLogo:y,featured:t,container:n,modalPanel:o,modalOpened:a,openModal:u,closeModal:p,expandedWallets:T,walletsToDisplay:P,featuredWallets:B,hiddenWallets:x,selectWallet:R};return{scope:L,...L}}}),xm=Ze("div",{class:"swv-modal-overlay"},null,-1),Bm={class:"swv-modal-container",ref:"modalPanel"},Rm={key:0,class:"swv-modal-logo-wrapper"},Tm=["src"],Mm=Ze("h1",{class:"swv-modal-title",id:"swv-modal-title"},"Connect Wallet",-1),Pm=Ze("svg",{width:"14",height:"14"},[Ze("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})],-1),Lm=[Pm],Cm={class:"swv-modal-list"},Om=["onClick"],Nm={class:"swv-button"},Um=["textContent"],zm={key:0,class:"swv-wallet-status"},Wm=["aria-expanded"],Km=Ze("i",{class:"swv-button-icon"},[Ze("svg",{width:"11",height:"6",xmlns:"http://www.w3.org/2000/svg"},[Ze("path",{d:"m5.938 5.73 4.28-4.126a.915.915 0 0 0 0-1.322 1 1 0 0 0-1.371 0L5.253 3.736 1.659.272a1 1 0 0 0-1.371 0A.93.93 0 0 0 0 .932c0 .246.1.48.288.662l4.28 4.125a.99.99 0 0 0 1.37.01z"})])],-1);function Dm(r,e,t,n,i,s){const o=jn("wallet-icon");return Ut(),rr(ka,null,[Ze("div",{class:$n(r.dark?"swv-dark":"")},[nr(r.$slots,"default",ir(sr(r.scope)))],2),r.modalOpened?(Ut(),Bi(Wl,{key:0,to:r.container},[Ze("div",{"aria-labelledby":"swv-modal-title","aria-modal":"true",class:$n(["swv-modal",r.dark?"swv-dark":""]),role:"dialog"},[nr(r.$slots,"overlay",ir(sr(r.scope)),()=>[xm]),Ze("div",Bm,[nr(r.$slots,"modal",ir(sr(r.scope)),()=>[Ze("div",{class:$n(["swv-modal-wrapper",{"swv-modal-wrapper-no-logo":!r.hasLogo}])},[r.hasLogo?(Ut(),rr("div",Rm,[nr(r.$slots,"logo",ir(sr(r.scope)),()=>[Ze("img",{alt:"logo",class:"swv-modal-logo",src:r.logo},null,8,Tm)])])):jr("",!0),Mm,Ze("button",{onClick:e[0]||(e[0]=Nl((...a)=>r.closeModal&&r.closeModal(...a),["prevent"])),class:"swv-modal-button-close"},Lm),Ze("ul",Cm,[(Ut(!0),rr(ka,null,Ul(r.walletsToDisplay,a=>(Ut(),rr("li",{key:a.adapter.name,onClick:u=>{r.selectWallet(a.adapter.name),r.closeModal()}},[Ze("button",Nm,[Ac(o,{wallet:a},null,8,["wallet"]),Ze("p",{textContent:Zn(a.adapter.name)},null,8,Um),a.readyState==="Installed"?(Ut(),rr("div",zm," Detected ")):jr("",!0)])],8,Om))),128))]),r.hiddenWallets.length>0?(Ut(),rr("button",{key:1,"aria-controls":"swv-modal-collapse","aria-expanded":r.expandedWallets,class:$n(["swv-button swv-modal-collapse-button",{"swv-modal-collapse-button-active":r.expandedWallets}]),onClick:e[1]||(e[1]=a=>r.expandedWallets=!r.expandedWallets)},[zl(Zn(r.expandedWallets?"Less":"More")+" options ",1),Km],10,Wm)):jr("",!0)],2)])],512)],2)],8,["to"])):jr("",!0)],64)}const Fm=cs(Im,[["render",Dm]]),$m=ni({components:{WalletConnectButton:Am,WalletIcon:us,WalletModalProvider:Fm},props:{featured:{type:Number,default:3},container:{type:String,default:"body"},logo:String,dark:Boolean},setup(r){const{featured:e,container:t,logo:n,dark:i}=ii(r),{publicKey:s,wallet:o,disconnect:a}=Wn(),u=rt(),p=rt(!1),y=()=>{p.value=!0},v=()=>{p.value=!1};Sl(u,v);const R=Ye(()=>{var L;return(L=s.value)==null?void 0:L.toBase58()}),E=Ye(()=>!o.value||!R.value?null:R.value.slice(0,4)+".."+R.value.slice(-4)),{copy:T,copied:B,isSupported:x}=bg(),N={featured:e,container:t,logo:n,dark:i,wallet:o,publicKey:s,publicKeyTrimmed:E,publicKeyBase58:R,canCopy:x,addressCopied:B,dropdownPanel:u,dropdownOpened:p,openDropdown:y,closeDropdown:v,copyAddress:()=>R.value&&T(R.value),disconnect:a};return{scope:N,...N}}}),qm=["onClick"],Hm={key:2,class:"swv-dropdown"},Vm=["aria-expanded","title"],jm=["textContent"],Gm=["onClick"];function Ym(r,e,t,n,i,s){const o=jn("wallet-connect-button"),a=jn("wallet-icon"),u=jn("wallet-modal-provider");return Ut(),Bi(u,{featured:r.featured,container:r.container,logo:r.logo,dark:r.dark},{default:Rs(p=>[nr(r.$slots,"default",ir(sr({...p,...r.scope})),()=>[r.wallet?r.publicKeyBase58?(Ut(),rr("div",Hm,[nr(r.$slots,"dropdown-button",ir(sr({...p,...r.scope})),()=>[Ze("button",{class:"swv-button swv-button-trigger",style:Kl({pointerEvents:r.dropdownOpened?"none":"auto"}),"aria-expanded":r.dropdownOpened,title:r.publicKeyBase58,onClick:e[0]||(e[0]=(...y)=>r.openDropdown&&r.openDropdown(...y))},[Ac(a,{wallet:r.wallet},null,8,["wallet"]),Ze("p",{textContent:Zn(r.publicKeyTrimmed)},null,8,jm)],12,Vm)]),nr(r.$slots,"dropdown",ir(sr({...p,...r.scope})),()=>[Ze("ul",{"aria-label":"dropdown-list",class:$n(["swv-dropdown-list",{"swv-dropdown-list-active":r.dropdownOpened}]),ref:"dropdownPanel",role:"menu"},[nr(r.$slots,"dropdown-list",ir(sr({...p,...r.scope})),()=>[r.canCopy?(Ut(),rr("li",{key:0,onClick:e[1]||(e[1]=(...y)=>r.copyAddress&&r.copyAddress(...y)),class:"swv-dropdown-list-item",role:"menuitem"},Zn(r.addressCopied?"Copied":"Copy address"),1)):jr("",!0),Ze("li",{onClick:y=>{p.openModal(),r.closeDropdown()},class:"swv-dropdown-list-item",role:"menuitem"}," Change wallet ",8,Gm),Ze("li",{onClick:e[2]||(e[2]=y=>{r.disconnect(),r.closeDropdown()}),class:"swv-dropdown-list-item",role:"menuitem"}," Disconnect ")])],2)])])):(Ut(),Bi(o,{key:1})):(Ut(),rr("button",{key:0,class:"swv-button swv-button-trigger",onClick:p.openModal}," Select Wallet ",8,qm))])]),overlay:Rs(p=>[nr(r.$slots,"modal-overlay",ir(sr({...p,...r.scope})))]),modal:Rs(p=>[nr(r.$slots,"modal",ir(sr({...p,...r.scope})))]),_:3},8,["featured","container","logo","dark"])}const iw=cs($m,[["render",Ym]]);function sw(){const r=Wn();return Ye(()=>{if(!r)return;const{signTransaction:e,signAllTransactions:t,publicKey:n}=r;if(!(!n.value||!e.value||!t.value))return{publicKey:n.value,signTransaction:e.value,signAllTransactions:t.value}})}const ow={install:(r,e={})=>{ym(e),r.config.globalProperties.$wallet=Wn()}};export{Tt as A,ql as B,L0 as C,dr as D,ze as E,Dl as F,si as G,Xd as H,Zd as I,vn as K,$ as L,ho as N,Z as P,po as S,Ae as T,In as V,tt as W,Bc as a,eo as b,Jn as c,Qs as d,bi as e,Fl as f,mr as g,_a as h,ew as i,Nt as j,Gr as k,Cr as l,to as m,Xm as n,wi as o,ow as p,G0 as q,Wn as r,Qm as s,iw as t,sw as u,Et as v,rw as w,Uo as x,Ma as y,xn as z};
